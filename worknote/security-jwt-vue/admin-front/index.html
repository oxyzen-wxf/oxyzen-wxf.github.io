<!-- build time:Mon Jul 18 2022 22:16:36 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" href="https://oxyzen-wxf.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" href="https://oxyzen-wxf.github.io/atom.xml"><link rel="alternate" type="application/json" href="https://oxyzen-wxf.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="vue"><link rel="canonical" href="https://oxyzen-wxf.github.io/worknote/security-jwt-vue/admin-front/"><title>开发SpringBoot+Jwt+Vue的前后端分离后台管理系统VueAdmin - 前端笔记 - Vue - 工作日常笔记 | Oxygen Anoxia = = 人生当苦无妨，良人当归即好!</title><meta name="generator" content="Hexo 5.4.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">开发SpringBoot+Jwt+Vue的前后端分离后台管理系统VueAdmin - 前端笔记</h1><div class="meta"><span class="item" title="创建时间：2021-05-12 20:46:25"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2021-05-12T20:46:25+08:00">2021-05-12</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>52k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>47 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Oxygen Anoxia</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><img src="https://picsum.photos/id/1051/1912/500"></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/worknote/" itemprop="item" rel="index" title="分类于 工作日常笔记"><span itemprop="name">工作日常笔记</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/worknote/vue/" itemprop="item" rel="index" title="分类于 Vue"><span itemprop="name">Vue</span></a><meta itemprop="position" content="2"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://oxyzen-wxf.github.io/worknote/security-jwt-vue/admin-front/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="WangXuefeng"><meta itemprop="description" content="人生当苦无妨，良人当归即好!, 日常学习 & 复习记录"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content=""></span><div class="body md" itemprop="articleBody"><div class="note info"><p>首发公众号：MarkerHub<br>作者：吕一明<br>视频讲解：<span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWFmNHkxczdXaC8/ZmlsZUd1aWQ9T25aRHdveEZGTDhiblAxYw==">https://www.bilibili.com/video/BV1af4y1s7Wh/</span><br>线上演示：<span class="exturl" data-url="aHR0cHM6Ly93d3cubWFya2VyaHViLmNvbS92dWVhZG1pbi8/ZmlsZUd1aWQ9T25aRHdveEZGTDhiblAxYw==">https://www.markerhub.com/vueadmin/</span><br>转载请保留此应用，万分感谢！</p></div><p>关注公众号 MarkerHub，回复【 VueAdmin 】可以加群讨论学习、另外还会不定时安排 B 站视频直播答疑！</p><p>一个 spring security + jwt + vue 的前后端分离项目！综合运用！</p><hr><blockquote><p>首发公众号：MarkerHub<br>作者：吕一明<br>视频讲解：<span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWFmNHkxczdXaC8/ZmlsZUd1aWQ9cHh3eUpIZ3FjV2pXa1RLWA==">https://www.bilibili.com/video/BV1af4y1s7Wh/</span><br>线上演示：<span class="exturl" data-url="aHR0cHM6Ly93d3cubWFya2VyaHViLmNvbS92dWVhZG1pbi8/ZmlsZUd1aWQ9cHh3eUpIZ3FjV2pXa1RLWA==">https://www.markerhub.com/vueadmin/</span><br>转载请保留此应用，万分感谢！</p></blockquote><h2 id="1-前言"><a class="anchor" href="#1-前言">#</a> 1. 前言</h2><p>在之前，我写了一个前后端分离的简易<span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMVBRNHkxUDdoWi8/ZmlsZUd1aWQ9cHh3eUpIZ3FjV2pXa1RLWA==">博客系统 vueblog</span>，在 B 站也已经收获了 13 万的播放量了，也还算受欢迎吧，感谢大家的认同与支持！同时有些刚入门的同学还是说有些地方不清楚，跟着做的时候还是会出现错误，或者不理解为啥这样处理，这次我更详细点。</p><p>而接下来，我们即将开发一个前后端分离的后台管理系统<span class="exturl" data-url="aHR0cHM6Ly93d3cubWFya2VyaHViLmNvbS92dWVhZG1pbi8/ZmlsZUd1aWQ9cHh3eUpIZ3FjV2pXa1RLWA=="> VueAdmin</span>。这个管理系统与我们之前的博客系统技术选型上其实有很多相似之处，只不过权限框架我选用了 spring security，然后相对来说权限模块开发就多点代码，也仅此而已了。对了前端的系统界面也是我们一步步开发的，所以希望能帮助大家熟悉一个后台管理系统，也希望大家学到东西哈。</p><p>我的公众号 MarkerHub，希望大家能关注支持我哈！</p><h2 id="2-安装vue环境并新建vue项目"><a class="anchor" href="#2-安装vue环境并新建vue项目">#</a> 2. 安装 vue 环境，并新建 Vue 项目</h2><p>前端我们依然选择的是 Vue+ElementUI 的组合，主要还是因为这个主流呀。针对 Vue，如果还不熟悉的同学，建议去看看这个视频【<span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMTI1NDExVzczVy8/ZmlsZUd1aWQ9cHh3eUpIZ3FjV2pXa1RLWA==">4 个小时带你快速入门 vue</span>】，我也是学这个视频入门的，就学了半天，哈哈。主要 Js 基础扎实点学起来挺快的。</p><p>首先我们安装 vue 的环境，我实践的环境是 windows 10 哈。</p><p>1、首先我们上 node.js 官网 (<span class="exturl" data-url="aHR0cHM6Ly9ub2RlanMub3JnL3poLWNuLz9maWxlR3VpZD1weHd5SkhncWNXaldrVEtY">https://nodejs.org/zh-cn/</span>)，下载最新的长期版本，直接运行安装完成之后，我们就已经具备了 node 和 npm 的环境啦。</p><p><img data-src="../../../assets/image-20210512202048144.png" alt="image-20210512202048144"> 之后检查下版本信息：</p><p><img data-src="../../../assets/image-20210512202101057.png" alt="image-20210512202101057"></p><p>这就表示你已经安装成功啦，牛逼开始的第一步！</p><p>2、接下来，我们安装 vue 的环境</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 安装淘宝 npm</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">npm</span> <span class="token function">install</span> -g cnpm --registry<span class="token operator">=</span>https://registry.npm.taobao.org</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment"># vue-cli 安装依赖包</span></pre></td></tr><tr><td data-num="4"></td><td><pre>cnpm <span class="token function">install</span> --g vue-cli</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment"># 打开 vue 的可视化管理工具界面</span></pre></td></tr><tr><td data-num="6"></td><td><pre>vue ui</pre></td></tr></table></figure><p>上面我们分别安装了淘宝 npm，cnpm 是为了提高我们安装依赖的速度。vue ui 是 @vue/cli3.0 增加一个可视化项目管理工具，可以运行项目、打包项目，检查等操作。对于初学者来说，可以少记一些命令，哈哈。<br>3、创建 vueadmin-vue 项目</p><p>运行 vue ui 之后，</p><p>会为我们打开一个<span class="exturl" data-url="aHR0cDovL2xvY2FsaG9zdDo4MDgwP2ZpbGVHdWlkPXB4d3lKSGdxY1dqV2tUS1g="> http://localhost:8080</span> 的页面：</p><p><img data-src="../../../assets/image-20210512202158899.png" alt="image-20210512202158899"></p><p>我们将在这个页面完成我们的前端 Vue 项目的新建。然后切换到【创建】，注意创建的目录最好是和你运行 vue ui 同一级。这样方便管理和切换。</p><p><img data-src="../../../assets/image-20210512202529412.png" alt="image-20210512202529412"></p><p>然后点击按钮【在此创建新项目】下一步中，项目文件夹中输入项目名称 “vueblog-vue”，其他不用改。</p><p><img data-src="../../../assets/image-20210512202653675.png" alt="image-20210512202653675"></p><p>点击下一步，选择【手动】，再点击下一步，如图点击按钮，勾选上路由 Router、状态管理 Vuex，去掉 js 的校验。</p><p><img data-src="../../../assets/image-20210512202519848.png" alt="image-20210512202519848"></p><p><img data-src="../../../assets/image-20210512202707229.png" alt="image-20210512202707229"></p><p>下一步中，也选上【Use history mode for router】，点击创建项目，然后弹窗中选择按钮【创建项目，不保存预设】，就进入项目创建啦。</p><p>稍等片刻之后，项目就初始化完成了。上面的步骤中，我们创建了一个 vue 项目，并且安装了 Router、Vuex。这样我们后面就可以直接使用。</p><ul><li>**Router：**WebApp 的链接路径管理系统，简单就是建立起 url 和页面之间的映射关系</li><li>**Vuex：** 一个专为 Vue.js 应用程序开发的 <code>状态管理模式</code> ，简单来说就是为了方便数据的操作而建立的一个临时” 前端数据库 “，用于各个组件间共享和检测数据变化。</li></ul><p>ok，我们使用 IDEA 导入项目，看看创建好的项目长啥样子：</p><p><img data-src="../../../assets/image-20210512202725745.png" alt="image-20210512202725745"></p><p>当然了，IDEA 我们要预先先安装好一个 Vue 插件，这样我们就可以使用 IDEA 像 WebStorm 一样开发 Vue 项目啦，毕竟都是同一个家族出品的哈哈。</p><p><img data-src="../../../assets/image-20210512202736937.png" alt="image-20210512202736937"></p><p>然后我们在 IDEA 窗口的底部打开 Terminal 命令行窗口，输入 npm run serve 运行 vue 项目，我们就可以通过<span class="exturl" data-url="aHR0cDovL2xvY2FsaG9zdDo4MDgwLz9maWxlR3VpZD1weHd5SkhncWNXaldrVEtY"> http://localhost:8080/</span> 打开我们的项目了。</p><p><img data-src="../../../assets/image-20210512202748397.png" alt="image-20210512202748397"></p><p>效果如下，Hello Vue！</p><p><img data-src="../../../assets/image-20210512202800941.png" alt="image-20210512202800941"></p><p>线上演示：<span class="exturl" data-url="aHR0cHM6Ly93d3cubWFya2VyaHViLmNvbS92dWVhZG1pbi8/ZmlsZUd1aWQ9cHh3eUpIZ3FjV2pXa1RLWA==">https://www.markerhub.com/vueadmin/</span></p><h2 id="3-安装element-ui"><a class="anchor" href="#3-安装element-ui">#</a> 3. 安装 element-ui</h2><p>接下来我们引入 element-ui 组件（<span class="exturl" data-url="aHR0cHM6Ly9lbGVtZW50LmVsZW1lLmNuLyMvemgtQ04vY29tcG9uZW50L2luc3RhbGxhdGlvbj9maWxlR3VpZD1weHd5SkhncWNXaldrVEtY">https://element.eleme.cn</span>），这样我们就可以获得好看的 vue 组件，开发好看的后台管理系统的界面啦。</p><p><img data-src="../../../assets/image-20210512202812809.png" alt="image-20210512202812809"> 简单：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 切换到项目根目录</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token builtin class-name">cd</span> vueadmin-vue</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment"># 或者直接在 idea 中执行下面命令</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment"># 安装 element-ui</span></pre></td></tr><tr><td data-num="5"></td><td><pre>cnpm <span class="token function">install</span> element-ui --save</pre></td></tr></table></figure><p>然后我们打开项目 src 目录下的 main.js，引入 element-ui 依赖。</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> Element <span class="token keyword">from</span> <span class="token string">'element-ui'</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> <span class="token string">"element-ui/lib/theme-chalk/index.css"</span></pre></td></tr><tr><td data-num="3"></td><td><pre>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Element<span class="token punctuation">)</span></pre></td></tr></table></figure><p>这样我们就可以愉快得在官网上选择组件复制代码到我们项目中直接使用啦。</p><h2 id="4-安装axios-qs-mockjs"><a class="anchor" href="#4-安装axios-qs-mockjs">#</a> 4. 安装 axios、qs、mockjs</h2><ul><li><strong>axios</strong>：一个基于 promise 的 HTTP 库，类 ajax</li><li><strong>qs</strong>：查询参数序列化和解析库</li><li><strong>mockjs</strong>：为我们生成随机数据的工具库</li></ul><p>接下来，我们来安装 axios（<span class="exturl" data-url="aHR0cDovL3d3dy5heGlvcy1qcy5jb20vP2ZpbGVHdWlkPXB4d3lKSGdxY1dqV2tUS1g=">http://www.axios-js.com/</span>），axios 是一个基于 promise 的 HTTP 库，这样我们进行前后端对接的时候，使用这个工具可以提高我们的开发效率。</p><p>安装命令：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>cnpm <span class="token function">install</span> axios --save</pre></td></tr></table></figure><p>然后同样我们在 main.js 中全局引入 axios。</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$axios <span class="token operator">=</span> axios <span class="token comment">//</span></pre></td></tr></table></figure><p>组件中，我们就可以通过 this.$axios.get () 来发起我们的请求了哈。当然了，后面我们添加 axios 拦截的时候我们需要修改引入的编写。 同时，我们同步安装一个 qs，什么是 qs？qs 是一个流行的查询参数序列化和解析库。可以将一个普通的 object 序列化成一个查询字符串，或者反过来将一个查询字符串解析成一个 object, 帮助我们查询字符串解析和序列化字符串。</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>cnpm <span class="token function">install</span> qs --save</pre></td></tr></table></figure><p>然后因为后台我们现在还没有搭建，无法与前端完成数据交互，因此我们这里需要 mock 数据，因此我们引入 mockjs（<span class="exturl" data-url="aHR0cDovL21vY2tqcy5jb20vP2ZpbGVHdWlkPXB4d3lKSGdxY1dqV2tUS1g=">http://mockjs.com/</span>），方便后续我们提供 api 返回数据。</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>cnpm <span class="token function">install</span> mockjs --save-dev</pre></td></tr></table></figure><p>然后我们在 src 目录下新建 mock.js 文件，用于编写随机数据的 api，然后我们需要在 main.js 中引入这个文件：</p><ul><li>src/main.js</li></ul><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"./mock"</span><span class="token punctuation">)</span> <span class="token comment">// 引入 mock 数据，关闭则注释该行</span></pre></td></tr></table></figure><p>后面我们 mackjs 会自动为我们拦截 ajax，并自动匹配路径返回数据！</p><h2 id="5-页面路由"><a class="anchor" href="#5-页面路由">#</a> 5. 页面路由</h2><p>接下来，在开发页面之前我们需要先定义路由。传统项目开发，我们都是通过链接到达控制器然后再到页面渲染的。而类似于 Vue 这样的前后端分离性质的框架，我们是先访问页面，然后再异步加载数据渲染。而在 Vue 中，路由的管理是有个专门的组件叫 Router 管理的。</p><p>我们在新建项目的时候也提了一下，大家还记得吧。我们当时说：</p><ul><li><strong>Router</strong>：WebApp 的链接路径管理系统，简单就是建立起 url 和页面之间的映射关系</li></ul><p>所以我们要打开页面然后开发页面，我们需要先配置路由，然后再开发，这样我们可以试试看到效果。项目中，src\router\index.js 就是用来配置路由的。</p><p>我们在 views 文件夹下定义几个页面：</p><ul><li>Login.vue（登录页面）</li><li>Index.vue（首页）</li></ul><p>我们新建 Vue 页面的时候可以这样新建：</p><p><img data-src="../../../assets/image-20210512202910986.png" alt="image-20210512202910986"></p><p>然后再路由中心配置配置 url 与 vue 页面的映射关系，参考原本的默认写法，我们很容易写出以下代码：</p><ul><li>src\router\index.js</li></ul><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> VueRouter <span class="token keyword">from</span> <span class="token string">'vue-router'</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> Login <span class="token keyword">from</span> <span class="token string">"../views/Login"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueRouter<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    path<span class="token operator">:</span> <span class="token string">'/index'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    name<span class="token operator">:</span> <span class="token string">'Index'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/Index.vue'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    path<span class="token operator">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    name<span class="token operator">:</span> <span class="token string">'Login'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    component<span class="token operator">:</span> Login</pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  mode<span class="token operator">:</span> <span class="token string">'history'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="19"></td><td><pre>  base<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">BASE_URL</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  routes</pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> router</pre></td></tr></table></figure><p>得到效果如下：<br><img data-src="../../../assets/image-20210512203000307.png" alt="image-20210512203000307"></p><p>通过 npm run serve 运行项目，打开<span class="exturl" data-url="aHR0cDovL2xvY2FsaG9zdDo4MDgwL2xvZ2luP2ZpbGVHdWlkPXB4d3lKSGdxY1dqV2tUS1g="> http://localhost:8080/login</span> 发现页面长这样，明显我们新建的 Login.vue 里面是没有内容的，但这里有个 Home|About，明显是被其他地方嵌套过来的，这是啥原因呢？</p><p><img data-src="../../../assets/image-20210512203011223.png" alt="image-20210512203011223"></p><p>这里解释一下，我们新建的 Vue 项目，如果没其他配置，那么默认的就是一个单页面应用，也就是说这个应用是由一个外壳页面和多个页面片段组成的，页面跳转的时候其实始终都没有离开外壳页面，替换的只是加载的页面片段而已。</p><p>那么对应到我们的 vueadmin 项目，外壳页面就是 App.vue，片段页面就是 Login.vue，所以我们刚刚通过 /login 链接看到的页面效果就是 App.vue+Login.vue 的结果。所以我们进入 App.vue 页面看看：</p><ul><li>src/App.vue</li></ul><p><img data-src="../../../assets/image-20210512203029439.png" alt="image-20210512203029439"></p><p>果然我们在 template 标签中找到了相关的 html，我们把 id 为 nav 的这个 div 直接删除不要了。这个 &lt;router-view/&gt; 在这里就是现实我们链接到的片段页面，也就是 Login.vue。所以这样就清晰了，我们输入 url 的时候会调整到 App.vue，然后路由会匹配到我们对应的 vue 页面，这样完成的页面就渲染出来了。</p><p>然后我们再调整一下全局的样式，具体代码如下：</p><ul><li>src/App.vue</li></ul><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="3"></td><td><pre>      <span class="token operator">&lt;</span>router<span class="token operator">-</span>view<span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="4"></td><td><pre>   <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token operator">&lt;</span>style<span class="token operator">></span></pre></td></tr><tr><td data-num="7"></td><td><pre>   html<span class="token punctuation">,</span> body<span class="token punctuation">,</span> #app <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      font<span class="token operator">-</span>family<span class="token operator">:</span> <span class="token string">'Helvetica Neue'</span><span class="token punctuation">,</span> <span class="token string">'Hiragino Sans GB'</span><span class="token punctuation">,</span> <span class="token string">'WenQuanYi Micro Hei'</span><span class="token punctuation">,</span> <span class="token string">'Microsoft Yahei'</span><span class="token punctuation">,</span> sans<span class="token operator">-</span>serif<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      height<span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      padding<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      margin<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>      font<span class="token operator">-</span>size<span class="token operator">:</span> <span class="token number">15</span>px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span></pre></td></tr></table></figure><h2 id="6-登陆界面开发"><a class="anchor" href="#6-登陆界面开发">#</a> 6. 登陆界面开发</h2><p>ok，万事具备，接下来我们来开发我们第一个页面 Login.vue（<span class="exturl" data-url="aHR0cDovL2xvY2FsaG9zdDo4MDgwL2xvZ2luP2ZpbGVHdWlkPXB4d3lKSGdxY1dqV2tUS1g=">http://localhost:8080/login</span>），目前页面是完全空白的。一般登录页面就一个简单的表单：用户名、登录密码和验证码。然后我还想在表单左边添加一个图片，是我自己的公众号的二维码，然后中间用一条竖线分开。</p><p>一开始的时候为了页面风格的统一，我们采用了 Element Ui 的组件库，所以这里我们就直接去 element 的官网。上面描述中我们需要左右分开显示，所以先找到 Loyout 布局然后再弄表单，然后我们涉及到的后台交互有 2 个：</p><ul><li>获取登录验证码</li><li>提交登录表单完成登录</li></ul><p>因为后台系统我们暂时还没有开发，所以这里我们需要自己 mock 数据完成交互。前面我们已经引入了 mockjs，所以我们到 mock.js 文件中开发我们的 api。</p><h4 id="登录交互过程"><a class="anchor" href="#登录交互过程">#</a> 登录交互过程</h4><p>我们梳理一下交互流程：</p><ol><li>浏览器打开登录页面</li><li>动态加载登录验证码，因为这是前后端分离的项目，我们不再使用 session 进行交互，所以后端我打算禁用 session，那么验证码的验证就是问题了，所以后端设计上我打算生成验证码同时生成一个随机码，随机码作为 key，验证码为 value 保存到 redis 中，然后把随机码和验证码图片的 Base64 字符串码发送到前端</li><li>前端提交用户名、密码、验证码还有随机码</li><li>后台验证验证码是否匹配以及密码是否正确</li></ol><p><img data-src="../../../assets/image-20210512203055093.png" alt="image-20210512203055093"></p><p>ok，这样我们就知道 mock 应该弄成什么样的 api 了。</p><ul><li>mock.js - 获取登录验证码</li></ul><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 引入 mockjs</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">const</span> Mock <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mockjs'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 获取 mock.Random 对象</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">// 参考：https://github.com/nuysoft/Mock/wiki/Mock.Random</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">const</span> Random <span class="token operator">=</span> Mock<span class="token punctuation">.</span>Random</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">let</span> Result <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>   code<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>   msg<span class="token operator">:</span> <span class="token string">'操作成功'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>   data<span class="token operator">:</span> <span class="token keyword">null</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="12"></td><td><pre> * Mock.mock (url, post/get , function (options))；</pre></td></tr><tr><td data-num="13"></td><td><pre> * url 表示需要拦截的 URL，</pre></td></tr><tr><td data-num="14"></td><td><pre> * post/get 需要拦截的 Ajax 请求类型</pre></td></tr><tr><td data-num="15"></td><td><pre> *</pre></td></tr><tr><td data-num="16"></td><td><pre> * 用于生成响应数据的函数</pre></td></tr><tr><td data-num="17"></td><td><pre> */</pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token comment">// 获取验证码图片 base64 编码以及一个随机码</span></pre></td></tr><tr><td data-num="19"></td><td><pre>Mock<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">'/captcha'</span><span class="token punctuation">,</span> <span class="token string">'get'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>   Result<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>      token<span class="token operator">:</span> Random<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 获取一个 32 位的随机字符串，</span></pre></td></tr><tr><td data-num="22"></td><td><pre>      captchaImg<span class="token operator">:</span> Random<span class="token punctuation">.</span><span class="token function">dataImage</span><span class="token punctuation">(</span> <span class="token string">"120x40"</span><span class="token punctuation">,</span> <span class="token string">"11111"</span> <span class="token punctuation">)</span> <span class="token comment">// 生成验证码为 11111 的 base64 图片编码</span></pre></td></tr><tr><td data-num="23"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>   <span class="token keyword">return</span> Result</pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>mock 生成数据还算简单，一般都是利用 Mock.Random 对象来生成一些随机数据，具体的用法可以参考<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL251eXNvZnQvTW9jay93aWtpL01vY2suUmFuZG9tP2ZpbGVHdWlkPXB4d3lKSGdxY1dqV2tUS1g="> https://github.com/nuysoft/Mock/wiki/Mock.Random</span>。然后 Result 是为了统一返回结果，因为后台设计的时候，前后端交互，一般都有固定的返回格式，所以就有了 Result。</p><ul><li>mock.js - 登录接口</li></ul><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 因为 mock 不认识 /login?username=xxx，所以用了正则表达式</span></pre></td></tr><tr><td data-num="2"></td><td><pre>Mock<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token function">RegExp</span><span class="token punctuation">(</span><span class="token string">'/login*'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'post'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>   <span class="token comment">// 这里无法在 header 添加 authorization，直接跳过</span></pre></td></tr><tr><td data-num="4"></td><td><pre>   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"mock----------------login"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>   <span class="token keyword">return</span> Result</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>Mock 我们不需要什么处理，只需要放回的数据符合前端的要求就行哈。这样我们前端就可以继续往后面开发。<br>然后编写登录页面的 js</p><ul><li>src/views/Login.vue</li></ul><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token operator">&lt;</span>el<span class="token operator">-</span>row type<span class="token operator">=</span><span class="token string">"flex"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"row-bg"</span> justify<span class="token operator">=</span><span class="token string">"center"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="3"></td><td><pre>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>col <span class="token operator">:</span>xl<span class="token operator">=</span><span class="token string">"6"</span> <span class="token operator">:</span>lg<span class="token operator">=</span><span class="token string">"7"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="4"></td><td><pre>         <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"login-form"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="5"></td><td><pre>            <span class="token operator">&lt;</span>h2<span class="token operator">></span>欢迎来到VueAdmin管理系统<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span></pre></td></tr><tr><td data-num="6"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>image</pre></td></tr><tr><td data-num="7"></td><td><pre>                  style<span class="token operator">=</span><span class="token string">"width: 180px; height: 180px"</span></pre></td></tr><tr><td data-num="8"></td><td><pre>                  <span class="token operator">:</span>src<span class="token operator">=</span><span class="token string">"require('@/assets/markerhub/MarkerHub.jpg')"</span></pre></td></tr><tr><td data-num="9"></td><td><pre>            <span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>image<span class="token operator">></span></pre></td></tr><tr><td data-num="10"></td><td><pre>            <span class="token operator">&lt;</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="11"></td><td><pre>               公众号 MarkerHub</pre></td></tr><tr><td data-num="12"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="13"></td><td><pre>            <span class="token operator">&lt;</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="14"></td><td><pre>               扫码二维码，回复【VueAdmin】获取登录密码</pre></td></tr><tr><td data-num="15"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="16"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="17"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>col<span class="token operator">></span></pre></td></tr><tr><td data-num="18"></td><td><pre>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>col <span class="token operator">:</span>span<span class="token operator">=</span><span class="token string">"1"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="19"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>divider direction<span class="token operator">=</span><span class="token string">"vertical"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>divider<span class="token operator">></span></pre></td></tr><tr><td data-num="20"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>col<span class="token operator">></span></pre></td></tr><tr><td data-num="21"></td><td><pre>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>col <span class="token operator">:</span>xl<span class="token operator">=</span><span class="token string">"6"</span> <span class="token operator">:</span>lg<span class="token operator">=</span><span class="token string">"7"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="22"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>form label<span class="token operator">-</span>position<span class="token operator">=</span><span class="token string">"right"</span> <span class="token operator">:</span>rules<span class="token operator">=</span><span class="token string">"rules"</span> label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">"80px"</span> <span class="token operator">:</span>model<span class="token operator">=</span><span class="token string">"loginForm"</span> ref<span class="token operator">=</span><span class="token string">"loginForm"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="23"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"用户名"</span> prop<span class="token operator">=</span><span class="token string">"username"</span> style<span class="token operator">=</span><span class="token string">"width: 380px;"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="24"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"loginForm.username"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">></span></pre></td></tr><tr><td data-num="25"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="26"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"密码"</span> prop<span class="token operator">=</span><span class="token string">"password"</span> style<span class="token operator">=</span><span class="token string">"width: 380px;"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="27"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>input type<span class="token operator">=</span><span class="token string">"password"</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"loginForm.password"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">></span></pre></td></tr><tr><td data-num="28"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="29"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"验证码"</span> prop<span class="token operator">=</span><span class="token string">"code"</span> style<span class="token operator">=</span><span class="token string">"width: 380px;"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="30"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"loginForm.code"</span> style<span class="token operator">=</span><span class="token string">"width: 172px; float: left;"</span> maxlength<span class="token operator">=</span><span class="token string">"5"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">></span></pre></td></tr><tr><td data-num="31"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>image <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"captchaImg"</span> <span class="token operator">:</span>src<span class="token operator">=</span><span class="token string">"captchaImg"</span> @click<span class="token operator">=</span><span class="token string">"getCaptcha"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>image<span class="token operator">></span></pre></td></tr><tr><td data-num="32"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="33"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="34"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"primary"</span> @click<span class="token operator">=</span><span class="token string">"submitForm('loginForm')"</span><span class="token operator">></span>提交<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="35"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>button @click<span class="token operator">=</span><span class="token string">"getPass"</span><span class="token operator">></span>获取密码<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="36"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="37"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">></span></pre></td></tr><tr><td data-num="38"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>col<span class="token operator">></span></pre></td></tr><tr><td data-num="39"></td><td><pre>   <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>row<span class="token operator">></span></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token operator">&lt;</span>script<span class="token operator">></span></pre></td></tr><tr><td data-num="42"></td><td><pre>   <span class="token keyword">import</span> qs <span class="token keyword">from</span> <span class="token string">'qs'</span></pre></td></tr><tr><td data-num="43"></td><td><pre>   <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>      name<span class="token operator">:</span> <span class="token string">"Login"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="45"></td><td><pre>      <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>         <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>            loginForm<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>               username<span class="token operator">:</span> <span class="token string">'admin'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="49"></td><td><pre>               password<span class="token operator">:</span> <span class="token string">'markerhub'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="50"></td><td><pre>               code<span class="token operator">:</span> <span class="token string">'11111'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="51"></td><td><pre>               token<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="52"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="53"></td><td><pre>            rules<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>               username<span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="55"></td><td><pre>                  <span class="token punctuation">&#123;</span>required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'请输入用户名'</span><span class="token punctuation">,</span> trigger<span class="token operator">:</span> <span class="token string">'blur'</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>               <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="57"></td><td><pre>               password<span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="58"></td><td><pre>                  <span class="token punctuation">&#123;</span>required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'请输入密码'</span><span class="token punctuation">,</span> trigger<span class="token operator">:</span> <span class="token string">'blur'</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>               <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="60"></td><td><pre>               code<span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="61"></td><td><pre>                  <span class="token punctuation">&#123;</span>required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'请输入验证码'</span><span class="token punctuation">,</span> trigger<span class="token operator">:</span> <span class="token string">'blur'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="62"></td><td><pre>                  <span class="token punctuation">&#123;</span>min<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> max<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'验证码为5个字符'</span><span class="token punctuation">,</span> trigger<span class="token operator">:</span> <span class="token string">'blur'</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="63"></td><td><pre>               <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="64"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="65"></td><td><pre>            captchaImg<span class="token operator">:</span> <span class="token string">''</span></pre></td></tr><tr><td data-num="66"></td><td><pre>         <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="67"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="68"></td><td><pre>      methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="69"></td><td><pre>         <span class="token function">submitForm</span><span class="token punctuation">(</span><span class="token parameter">formName</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="70"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">[</span>formName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">valid</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="71"></td><td><pre>               <span class="token keyword">if</span> <span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="72"></td><td><pre>                  <span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/login?'</span> <span class="token operator">+</span> qs<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>loginForm<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="73"></td><td><pre>                     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="74"></td><td><pre>                     <span class="token keyword">const</span> jwt <span class="token operator">=</span> res<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'authorization'</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="75"></td><td><pre>                     <span class="token comment">// 将 jwt 存储到应用 store 中</span></pre></td></tr><tr><td data-num="76"></td><td><pre>                     <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">"SET_TOKEN"</span><span class="token punctuation">,</span> jwt<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="77"></td><td><pre>                     <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"/index"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="78"></td><td><pre>                  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="79"></td><td><pre>                     <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getCaptcha</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="80"></td><td><pre>                     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'error submit!!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="81"></td><td><pre>                  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="82"></td><td><pre>               <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="83"></td><td><pre>                  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getCaptcha</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="84"></td><td><pre>                  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'error submit!!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="85"></td><td><pre>                  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="86"></td><td><pre>               <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="87"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="88"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="89"></td><td><pre>         <span class="token function">resetForm</span><span class="token punctuation">(</span><span class="token parameter">formName</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="90"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">[</span>formName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">resetFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="91"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="92"></td><td><pre>         <span class="token function">getPass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="93"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token string">"请扫描左边的二维码，回复【VueAdmin】获取登录密码"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="94"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="95"></td><td><pre>         <span class="token function">getCaptcha</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="96"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/captcha'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="97"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span>loginForm<span class="token punctuation">.</span>token <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>token</pre></td></tr><tr><td data-num="98"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span>captchaImg <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>captchaImg</pre></td></tr><tr><td data-num="99"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="100"></td><td><pre>         <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="101"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="102"></td><td><pre>      <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="103"></td><td><pre>         <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getCaptcha</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="104"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="105"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="106"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></pre></td></tr><tr><td data-num="107"></td><td><pre><span class="token operator">&lt;</span>style scoped<span class="token operator">></span></pre></td></tr><tr><td data-num="108"></td><td><pre>   <span class="token punctuation">.</span>el<span class="token operator">-</span>col <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="109"></td><td><pre>      display<span class="token operator">:</span> flex<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="110"></td><td><pre>      justify<span class="token operator">-</span>content<span class="token operator">:</span> center<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="111"></td><td><pre>      align<span class="token operator">-</span>items<span class="token operator">:</span> center<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="112"></td><td><pre>      height<span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="113"></td><td><pre>      text<span class="token operator">-</span>align<span class="token operator">:</span> center<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="114"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="115"></td><td><pre>   <span class="token punctuation">.</span>el<span class="token operator">-</span>row <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="116"></td><td><pre>      height<span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="117"></td><td><pre>      background<span class="token operator">-</span>color<span class="token operator">:</span> #fafafa<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="118"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="119"></td><td><pre>   <span class="token punctuation">.</span>el<span class="token operator">-</span>divider <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="120"></td><td><pre>      height<span class="token operator">:</span> <span class="token number">200</span>px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="121"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="122"></td><td><pre>   <span class="token punctuation">.</span>captchaImg <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="123"></td><td><pre>      float<span class="token operator">:</span> left<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="124"></td><td><pre>      margin<span class="token operator">-</span>left<span class="token operator">:</span> <span class="token number">8</span>px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="125"></td><td><pre>      border<span class="token operator">-</span>radius<span class="token operator">:</span> <span class="token number">4</span>px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="126"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="127"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span></pre></td></tr></table></figure><p>配合一点样式的调整，这样登录界面我们就开发完毕啦，如果觉得不清楚，可以去看开发视频哈，一步一步的教学，写文字毕竟讲述还是不够仔细的。</p><h4 id="token的状态同步"><a class="anchor" href="#token的状态同步">#</a> token 的状态同步</h4><p>再讲一下，submitForm 方法中，提交表单之后做了几个动作，从 Header 中获取用户的 authorization，也就是含有用户登录信息的 jwt，然后提交到 store 中进行状态管理。</p><p>this.$store.commit (&quot;SET_TOKEN&quot;, jwt) 表示调用 store 中的 SET_TOKEN 方法，所以我们需要在 store 中编写方法：</p><ul><li>src/store/index.js</li></ul><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  state<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    token<span class="token operator">:</span> <span class="token string">''</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  mutations<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token function-variable function">SET_TOKEN</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> token</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      state<span class="token punctuation">.</span>token <span class="token operator">=</span> token</pre></td></tr><tr><td data-num="8"></td><td><pre>      localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">"token"</span><span class="token punctuation">,</span> token<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  modules<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>这样登录之后获取到的 jwt 就可以存储到应用的 store 以及<strong> localStorage</strong> 中，方便使用直接从<strong> localStorage</strong> 中获取即可！ 这样用户登录成功之后就会跳转到 /index 页面 this.$router.push (&quot;/index&quot;)。</p><h4 id="定义全局axios拦截器"><a class="anchor" href="#定义全局axios拦截器">#</a> 定义全局 axios 拦截器</h4><p>这里有个问题，那么如果登录失败，我们是需要弹窗显示错误的，比如验证码错误，用户名或密码不正确等。不仅仅是这个登录接口，所有的接口调用都会有这个情况，所以我们想做个拦截器，对返回的结果进行分析，如果是异常就直接弹窗显示错误，这样我们就省得每个接口都写一遍了。</p><p>在 src 目录下创建一个文件 axios.js（与 main.js 同级），定义 axios 的拦截：</p><ul><li>src/axios.js</li></ul><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">"axios"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> Element <span class="token keyword">from</span> <span class="token string">'element-ui'</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">"./router"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> <span class="token string">"http://localhost:8081"</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">const</span> request <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>   timeout<span class="token operator">:</span> <span class="token number">5000</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>   headers<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token string">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/json; charset=utf-8'</span></pre></td></tr><tr><td data-num="9"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>request<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token parameter">config</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>   config<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'Authorization'</span><span class="token punctuation">]</span> <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"token"</span><span class="token punctuation">)</span> <span class="token comment">// 请求头带上 token</span></pre></td></tr><tr><td data-num="13"></td><td><pre>   <span class="token keyword">return</span> config</pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>request<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token keyword">let</span> res <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"response"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>         <span class="token keyword">return</span> response</pre></td></tr><tr><td data-num="21"></td><td><pre>      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>         Element<span class="token punctuation">.</span>Message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>msg<span class="token operator">?</span> res<span class="token punctuation">.</span>msg <span class="token operator">:</span> <span class="token string">'系统异常！'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>duration<span class="token operator">:</span> <span class="token number">3</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre>         <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="24"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>   <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="26"></td><td><pre>   <span class="token parameter">error</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="28"></td><td><pre>      <span class="token keyword">if</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>         error<span class="token punctuation">.</span>message <span class="token operator">=</span> error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg</pre></td></tr><tr><td data-num="30"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>      <span class="token keyword">if</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">401</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>         router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="33"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>      Element<span class="token punctuation">.</span>Message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>message<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>duration<span class="token operator">:</span> <span class="token number">3</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="35"></td><td><pre>      <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="36"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> request</pre></td></tr></table></figure><p>前置拦截，其实可以统一为所有需要权限的请求装配上 header 的 token 信息，后置拦截中，判断 status.code 和 error.response.status，如果是 401 未登录没权限的就调到登录页面，其他的就直接弹窗显示错误。 然后再 main.js 中导入 axios.js</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">"./axios"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$axios <span class="token operator">=</span> request</pre></td></tr></table></figure><p>同时，记得去掉我们之前添加的</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$axios <span class="token operator">=</span> axios <span class="token comment">//</span></pre></td></tr></table></figure><p>这样 axios 每次请求都会被前置拦截器和后置拦截器拦截了。 登录异常弹窗效果如下：<br><img data-src="../../../assets/image-20210512203146624.png" alt="image-20210512203146624"></p><h2 id="7-后台管理界面开发"><a class="anchor" href="#7-后台管理界面开发">#</a> 7. 后台管理界面开发</h2><p>ok，登录界面我们已经开发完毕，并且我们已经能够进入管理系统的首页了，接下来我们就来开发首页的页面。</p><p>一般来说，管理系统的页面我们都是头部是一个简单的信息展示系统名称和登录用户信息，然后中间的左边是菜单导航栏，右边是内容，对应到 elementui 的组件中，我们可以找到这个 Container 布局容器用于布局，方便快速搭建页面的基本结构。</p><p>而我们采用这个布局：</p><p><img data-src="../../../assets/image-20210512203208671.png" alt="image-20210512203208671"></p><p>而这个页面，一般来说 Header 和 Aside 都是不会变化的，只有 Main 部分会跟着链接变化而变化，所以我们可以提炼公共部分出来，放在 Home.vue 中，然后 Main 部分放在 Index.vue 中，</p><p>那么问题来了，我们如何才能做到点击左边的 Aside，然后局部刷新 Main 中的内容呢？在 Vue 中，我们可以通过嵌套路由（子路由）的形式。也就是我们需要重新定义路由，一级路由是 Home.vue，Index.vue 是作为 Home.vue 页面的子路由，然后 Home.vue 中我们通过 &lt;router-view&gt; 来展示 Index.vue 的内容即可。</p><p>在 router 中，我们这样修改：</p><ul><li>src/router/index.js</li></ul><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    path<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    name<span class="token operator">:</span> <span class="token string">'Home'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    component<span class="token operator">:</span> Home<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    children<span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        path<span class="token operator">:</span> <span class="token string">'/index'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        name<span class="token operator">:</span> <span class="token string">'Index'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        meta<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>          title<span class="token operator">:</span> <span class="token string">"首页"</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/Index.vue'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    path<span class="token operator">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    name<span class="token operator">:</span> <span class="token string">'Login'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    component<span class="token operator">:</span> Login</pre></td></tr><tr><td data-num="21"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">]</span></pre></td></tr></table></figure><p>可以看到原本的 Index 已经作为了 Home 的 children，所以在链接到 /index 的时候我们会展示父级 Home 的内容，然后再显示 Index 内容。</p><ul><li>src/views/Home.vue</li></ul><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token operator">&lt;</span>el<span class="token operator">-</span>container<span class="token operator">></span></pre></td></tr><tr><td data-num="3"></td><td><pre>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>aside width<span class="token operator">=</span><span class="token string">"200px"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="4"></td><td><pre>         <span class="token operator">&lt;</span>div<span class="token operator">></span>菜单栏<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="5"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>aside<span class="token operator">></span></pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>container<span class="token operator">></span></pre></td></tr><tr><td data-num="7"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>header style<span class="token operator">=</span><span class="token string">"height: 55px;"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="8"></td><td><pre>            <span class="token operator">&lt;</span>Strong<span class="token operator">></span>ManHub后台管理系统<span class="token operator">&lt;</span><span class="token operator">/</span>Strong<span class="token operator">></span></pre></td></tr><tr><td data-num="9"></td><td><pre>            <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"header-avatar block"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="10"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>avatar <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"el-avatar"</span> size<span class="token operator">=</span><span class="token string">"medium"</span> <span class="token operator">:</span>src<span class="token operator">=</span><span class="token string">"userInfo.avatar"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>avatar<span class="token operator">></span></pre></td></tr><tr><td data-num="11"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">></span></pre></td></tr><tr><td data-num="12"></td><td><pre>                      <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"el-dropdown-link"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="13"></td><td><pre>                        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>swig￼<span class="token number">0</span><span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"el-icon-arrow-down el-icon--right"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">></span></pre></td></tr><tr><td data-num="14"></td><td><pre>                      <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span></pre></td></tr><tr><td data-num="15"></td><td><pre>                  <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>menu slot<span class="token operator">=</span><span class="token string">"dropdown"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="16"></td><td><pre>                     <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item <span class="token operator">:</span>underline<span class="token operator">=</span><span class="token string">"false"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="17"></td><td><pre>                        <span class="token operator">&lt;</span>router<span class="token operator">-</span>link <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">"&#123;name: 'UserCenter'&#125;"</span><span class="token operator">></span>个人中心<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">></span></pre></td></tr><tr><td data-num="18"></td><td><pre>                     <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="19"></td><td><pre>                     <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item @click<span class="token punctuation">.</span>native<span class="token operator">=</span><span class="token string">"logout"</span><span class="token operator">></span>退出<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="20"></td><td><pre>                  <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>menu<span class="token operator">></span></pre></td></tr><tr><td data-num="21"></td><td><pre>               <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">></span></pre></td></tr><tr><td data-num="22"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>link href<span class="token operator">=</span><span class="token string">"https://space.bilibili.com/13491144"</span><span class="token operator">></span>视频讲解<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>link<span class="token operator">></span></pre></td></tr><tr><td data-num="23"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>link href<span class="token operator">=</span><span class="token string">"http://markerhub.com"</span><span class="token operator">></span>网站<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>link<span class="token operator">></span></pre></td></tr><tr><td data-num="24"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="25"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>header<span class="token operator">></span></pre></td></tr><tr><td data-num="26"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>main<span class="token operator">></span></pre></td></tr><tr><td data-num="27"></td><td><pre>     </pre></td></tr><tr><td data-num="28"></td><td><pre>            <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token string">"margin: 0 15px;"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="29"></td><td><pre>               <span class="token operator">&lt;</span>router<span class="token operator">-</span>view<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>view<span class="token operator">></span></pre></td></tr><tr><td data-num="30"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="31"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>main<span class="token operator">></span></pre></td></tr><tr><td data-num="32"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>container<span class="token operator">></span></pre></td></tr><tr><td data-num="33"></td><td><pre>   <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>container<span class="token operator">></span></pre></td></tr><tr><td data-num="34"></td><td><pre>   </pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token operator">&lt;</span>script<span class="token operator">></span></pre></td></tr><tr><td data-num="37"></td><td><pre>   <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>      name<span class="token operator">:</span> <span class="token string">"Home.vue"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="39"></td><td><pre>      <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>         <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>            userInfo<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>               id<span class="token operator">:</span> <span class="token string">'-1'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="43"></td><td><pre>               username<span class="token operator">:</span> <span class="token string">'admin'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="44"></td><td><pre>               avatar<span class="token operator">:</span> <span class="token string">'https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/5a9f48118166308daba8b6da7e466aab.jpg'</span></pre></td></tr><tr><td data-num="45"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>         <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="48"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="49"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></pre></td></tr></table></figure><p>样式部分我就不贴出来了，看 git 上的代码哈。 首页中间内容，不知道放啥，就放我的公众号二维码吧，哈哈，欢迎关注关注！</p><ul><li>src/views/Index.vue</li></ul><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token string">"text-align: center;"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="3"></td><td><pre>      <span class="token operator">&lt;</span>h2<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>image</pre></td></tr><tr><td data-num="5"></td><td><pre>            style<span class="token operator">=</span><span class="token string">"width: 180px; height: 180px"</span></pre></td></tr><tr><td data-num="6"></td><td><pre>            <span class="token operator">:</span>src<span class="token operator">=</span><span class="token string">"require('@/assets/markerhub/javacat.jpg')"</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>image<span class="token operator">></span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token operator">&lt;</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="9"></td><td><pre>         更多项目学习，扫描关注公众号！</pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span></pre></td></tr><tr><td data-num="11"></td><td><pre>   <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr></table></figure><p>总体下来效果如下：</p><p><img data-src="../../../assets/image-20210512203237419.png" alt="image-20210512203237419"></p><p>有点感觉了，然后昨天的菜单栏我们也弄下，我们找到 NavMenu 导航菜单组件，然后加到 Home.vue 中，因为考虑到后面我们需要做动态菜单，所以我想单独这个页面出来，因此我新建了个 SideMenu.vue：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token operator">&lt;</span>el<span class="token operator">-</span>menu</pre></td></tr><tr><td data-num="3"></td><td><pre>            <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"el-menu-vertical-demo"</span></pre></td></tr><tr><td data-num="4"></td><td><pre>            background<span class="token operator">-</span>color<span class="token operator">=</span><span class="token string">"#545c64"</span></pre></td></tr><tr><td data-num="5"></td><td><pre>            text<span class="token operator">-</span>color<span class="token operator">=</span><span class="token string">"#fff"</span></pre></td></tr><tr><td data-num="6"></td><td><pre>            active<span class="token operator">-</span>text<span class="token operator">-</span>color<span class="token operator">=</span><span class="token string">"#ffd04b"</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token operator">></span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">"/index"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="9"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item index<span class="token operator">=</span><span class="token string">"Index"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="10"></td><td><pre>                <span class="token operator">&lt;</span>template slot<span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="11"></td><td><pre>                    <span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"el-icon-s-home"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">></span></pre></td></tr><tr><td data-num="12"></td><td><pre>                    <span class="token operator">&lt;</span>span slot<span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span>首页<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span></pre></td></tr><tr><td data-num="13"></td><td><pre>                <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="14"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">></span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token operator">&lt;</span>el<span class="token operator">-</span>submenu index<span class="token operator">=</span><span class="token string">"1"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="17"></td><td><pre>            <span class="token operator">&lt;</span>template slot<span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="18"></td><td><pre>                <span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"el-icon-s-operation"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">></span></pre></td></tr><tr><td data-num="19"></td><td><pre>                <span class="token operator">&lt;</span>span<span class="token operator">></span>系统管理<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span></pre></td></tr><tr><td data-num="20"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="21"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item index<span class="token operator">=</span><span class="token string">"1-1"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="22"></td><td><pre>                <span class="token operator">&lt;</span>template slot<span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="23"></td><td><pre>                    <span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"el-icon-s-custom"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">></span></pre></td></tr><tr><td data-num="24"></td><td><pre>                    <span class="token operator">&lt;</span>span slot<span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span>用户管理<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span></pre></td></tr><tr><td data-num="25"></td><td><pre>                <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="26"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="27"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item index<span class="token operator">=</span><span class="token string">"1-2"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="28"></td><td><pre>                <span class="token operator">&lt;</span>template slot<span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="29"></td><td><pre>                    <span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"el-icon-rank"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">></span></pre></td></tr><tr><td data-num="30"></td><td><pre>                    <span class="token operator">&lt;</span>span slot<span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span>角色管理<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span></pre></td></tr><tr><td data-num="31"></td><td><pre>                <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="32"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="33"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item index<span class="token operator">=</span><span class="token string">"1-3"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="34"></td><td><pre>                <span class="token operator">&lt;</span>template slot<span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="35"></td><td><pre>                    <span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"el-icon-menu"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">></span></pre></td></tr><tr><td data-num="36"></td><td><pre>                    <span class="token operator">&lt;</span>span slot<span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span>菜单管理<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span></pre></td></tr><tr><td data-num="37"></td><td><pre>                <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="38"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="39"></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>submenu<span class="token operator">></span></pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token operator">&lt;</span>el<span class="token operator">-</span>submenu index<span class="token operator">=</span><span class="token string">"2"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="41"></td><td><pre>            <span class="token operator">&lt;</span>template slot<span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="42"></td><td><pre>                <span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"el-icon-s-tools"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">></span></pre></td></tr><tr><td data-num="43"></td><td><pre>                <span class="token operator">&lt;</span>span<span class="token operator">></span>系统工具<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span></pre></td></tr><tr><td data-num="44"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="45"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item index<span class="token operator">=</span><span class="token string">"2-2"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="46"></td><td><pre>                <span class="token operator">&lt;</span>template slot<span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="47"></td><td><pre>                    <span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"el-icon-s-order"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">></span></pre></td></tr><tr><td data-num="48"></td><td><pre>                    <span class="token operator">&lt;</span>span slot<span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span>数字字典<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span></pre></td></tr><tr><td data-num="49"></td><td><pre>                <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="50"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="51"></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>submenu<span class="token operator">></span></pre></td></tr><tr><td data-num="52"></td><td><pre>    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>menu<span class="token operator">></span></pre></td></tr><tr><td data-num="53"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="54"></td><td><pre><span class="token operator">&lt;</span>script<span class="token operator">></span></pre></td></tr><tr><td data-num="55"></td><td><pre>    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>        name<span class="token operator">:</span> <span class="token string">"SideMenu"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="57"></td><td><pre>        <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>            </pre></td></tr><tr><td data-num="59"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="60"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="61"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></pre></td></tr><tr><td data-num="62"></td><td><pre><span class="token operator">&lt;</span>style scoped<span class="token operator">></span></pre></td></tr><tr><td data-num="63"></td><td><pre>    <span class="token punctuation">.</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>vertical<span class="token operator">-</span>demo <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="64"></td><td><pre>        height<span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="66"></td><td><pre>    a<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="67"></td><td><pre>        text<span class="token operator">-</span>decoration<span class="token operator">:</span>none<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="68"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="69"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span></pre></td></tr></table></figure><p>SideMenu.vue 作为一个组件添加到 Home.vue 中，我们首选需要导入，然后声明 compoents，然后才能使用标签，所以在 Home.vue 中代码如下：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token operator">&lt;</span>el<span class="token operator">-</span>container<span class="token operator">></span></pre></td></tr><tr><td data-num="3"></td><td><pre>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>aside width<span class="token operator">=</span><span class="token string">"200px"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="4"></td><td><pre>         <span class="token operator">&lt;</span>SideMenu<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>SideMenu<span class="token operator">></span></pre></td></tr><tr><td data-num="5"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>aside<span class="token operator">></span></pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>container<span class="token operator">></span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token operator">...</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>container<span class="token operator">></span></pre></td></tr><tr><td data-num="9"></td><td><pre>   <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>container<span class="token operator">></span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token operator">&lt;</span>script<span class="token operator">></span></pre></td></tr><tr><td data-num="12"></td><td><pre>   <span class="token keyword">import</span> SideMenu <span class="token keyword">from</span> <span class="token string">"./inc/SideMenu"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>   <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>      name<span class="token operator">:</span> <span class="token string">"Home.vue"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>      components<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>         SideMenu</pre></td></tr><tr><td data-num="17"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="18"></td><td><pre>      <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>         <span class="token operator">...</span></pre></td></tr><tr><td data-num="20"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="21"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></pre></td></tr></table></figure><p>注意 SideMenu 出现的地方哈，最后效果如下：<img data-src="../../../assets/image-20210512203306411.png" alt="image-20210512203306411"></p><p>这就很接近我们想要的效果了哈。</p><p>我们先来新建几个页面，先在 views 下新建文件夹 sys，然后再新建 vue 页面，具体看下面，这样我们就能把链接和页面可以连接起来。</p><ul><li>src\views\sys<ul><li>Dict.vue 数字字典</li><li>Menu.vue 菜单管理</li><li>Role.vue 角色管理</li><li>User.vue 用户管理</li></ul></li></ul><p><img data-src="../../../assets/image-20210512203317359.png" alt="image-20210512203317359"></p><p>虽然建立了页面，但是因为我们没有在 router 中注册链接与组件的关系，所以我们现在打开链接还是打开不了页面的。下面我们就要动态联系起来。</p><h2 id="8-用户登录信息展示"><a class="anchor" href="#8-用户登录信息展示">#</a> 8. 用户登录信息展示</h2><p>管理界面的右上角的用户信息现在是写死的，因为我们现在已经登录成功，所以我们可以通过接口去请求获取到当前的用户信息了，这样我们就可以动态显示用户的信息，这个接口比较简单，然后退出登录的链接也一起完成，就请求接口同时把浏览器中的缓存删除就退出了哈。</p><ul><li>src\views\Home.vue</li></ul><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>el<span class="token operator">-</span>header style<span class="token operator">=</span><span class="token string">"height: 55px;"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token operator">&lt;</span>Strong<span class="token operator">></span>ManHub后台管理系统<span class="token operator">&lt;</span><span class="token operator">/</span>Strong<span class="token operator">></span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"header-avatar block"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token operator">&lt;</span>el<span class="token operator">-</span>avatar <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"el-avatar"</span> size<span class="token operator">=</span><span class="token string">"medium"</span> <span class="token operator">:</span>src<span class="token operator">=</span><span class="token string">"userInfo.avatar"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>avatar<span class="token operator">></span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">></span></pre></td></tr><tr><td data-num="6"></td><td><pre>          <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"el-dropdown-link"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="7"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>swig￼<span class="token number">1</span><span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"el-icon-arrow-down el-icon--right"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">></span></pre></td></tr><tr><td data-num="8"></td><td><pre>          <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span></pre></td></tr><tr><td data-num="9"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>menu slot<span class="token operator">=</span><span class="token string">"dropdown"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="10"></td><td><pre>                <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item <span class="token operator">:</span>underline<span class="token operator">=</span><span class="token string">"false"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="11"></td><td><pre>                    <span class="token operator">&lt;</span>router<span class="token operator">-</span>link <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">"&#123;name: 'UserCenter'&#125;"</span><span class="token operator">></span>个人中心<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">></span></pre></td></tr><tr><td data-num="12"></td><td><pre>                <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="13"></td><td><pre>                <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item @click<span class="token punctuation">.</span>native<span class="token operator">=</span><span class="token string">"logout"</span><span class="token operator">></span>退出<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="14"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>menu<span class="token operator">></span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">></span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token operator">&lt;</span>el<span class="token operator">-</span>link <span class="token operator">></span>视频讲解<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>link<span class="token operator">></span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token operator">&lt;</span>el<span class="token operator">-</span>link<span class="token operator">></span>公众号<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>link<span class="token operator">></span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>header<span class="token operator">></span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token operator">...</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        userInfo<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>            id<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="25"></td><td><pre>            username<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            avatar<span class="token operator">:</span> <span class="token string">''</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="33"></td><td><pre>methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/sys/userInfo"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>userInfo <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"/logout"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="42"></td><td><pre>            localStorage<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="43"></td><td><pre>            sessionStorage<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="44"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">"resetState"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="45"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="46"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="47"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="48"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>记得 mockjs 中返回用户的信息，比较简单我就不写了这个。</p><h2 id="9-动态菜单栏开发"><a class="anchor" href="#9-动态菜单栏开发">#</a> 9. 动态菜单栏开发</h2><p>上面代码中，左侧的菜单栏的数据是写死的，在实际场景中我们不可能这样做，因为菜单是需要根据登录用户的权限动态显示菜单的，也就是用户看到的菜单栏可能是不一样的，这些数据需要去后端访问获取。</p><p>首先我们先把写死的数据简化成一个 json 数组数据，然后 for 循环展示出来，代码如下：</p><ul><li>/src/views/inc/SideMenu.vue</li></ul><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token operator">&lt;</span>el<span class="token operator">-</span>menu</pre></td></tr><tr><td data-num="3"></td><td><pre>            <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"el-menu-vertical-demo"</span></pre></td></tr><tr><td data-num="4"></td><td><pre>            background<span class="token operator">-</span>color<span class="token operator">=</span><span class="token string">"#545c64"</span></pre></td></tr><tr><td data-num="5"></td><td><pre>            text<span class="token operator">-</span>color<span class="token operator">=</span><span class="token string">"#fff"</span></pre></td></tr><tr><td data-num="6"></td><td><pre>            active<span class="token operator">-</span>text<span class="token operator">-</span>color<span class="token operator">=</span><span class="token string">"#ffd04b"</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token operator">></span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token operator">...</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token operator">&lt;</span>el<span class="token operator">-</span>submenu <span class="token keyword">default</span><span class="token operator">-</span>active<span class="token operator">=</span><span class="token string">"Index"</span> <span class="token operator">:</span>index<span class="token operator">=</span><span class="token string">"menu.name"</span> v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"menu in menuList"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="10"></td><td><pre>            <span class="token operator">&lt;</span>template slot<span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="11"></td><td><pre>                <span class="token operator">&lt;</span>i <span class="token operator">:</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"menu.icon"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">></span></pre></td></tr><tr><td data-num="12"></td><td><pre>                <span class="token operator">&lt;</span>span<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>swig￼<span class="token number">2</span><span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span></pre></td></tr><tr><td data-num="13"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="14"></td><td><pre>            <span class="token operator">&lt;</span>router<span class="token operator">-</span>link <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">"item.path"</span> v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"item in menu.children"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="15"></td><td><pre>                <span class="token operator">&lt;</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item <span class="token operator">:</span>index<span class="token operator">=</span><span class="token string">"item.name"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="16"></td><td><pre>                    <span class="token operator">&lt;</span>template slot<span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="17"></td><td><pre>                        <span class="token operator">&lt;</span>i <span class="token operator">:</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"item.icon"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">></span></pre></td></tr><tr><td data-num="18"></td><td><pre>                        <span class="token operator">&lt;</span>span slot<span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>swig￼<span class="token number">3</span><span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span></pre></td></tr><tr><td data-num="19"></td><td><pre>                    <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="20"></td><td><pre>                <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="21"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">></span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>submenu<span class="token operator">></span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>menu<span class="token operator">></span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token operator">&lt;</span>script<span class="token operator">></span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        name<span class="token operator">:</span> <span class="token string">"SideMenu"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>            <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>                menuList<span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="31"></td><td><pre>                    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>                        name<span class="token operator">:</span> <span class="token string">'SysManga'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="33"></td><td><pre>                        title<span class="token operator">:</span> <span class="token string">'系统管理'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="34"></td><td><pre>                        icon<span class="token operator">:</span> <span class="token string">'el-icon-s-operation'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="35"></td><td><pre>                        path<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="36"></td><td><pre>                        component<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="37"></td><td><pre>                        children<span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="38"></td><td><pre>                            <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>                                name<span class="token operator">:</span> <span class="token string">'SysUser'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="40"></td><td><pre>                                title<span class="token operator">:</span> <span class="token string">'用户管理'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="41"></td><td><pre>                                icon<span class="token operator">:</span> <span class="token string">'el-icon-s-custom'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="42"></td><td><pre>                                path<span class="token operator">:</span> <span class="token string">'/sys/users'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="43"></td><td><pre>                                children<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="44"></td><td><pre>                            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>                        <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="46"></td><td><pre>                    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="47"></td><td><pre>                    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>                        name<span class="token operator">:</span> <span class="token string">'SysTools'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="49"></td><td><pre>                        title<span class="token operator">:</span> <span class="token string">'系统工具'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="50"></td><td><pre>                        icon<span class="token operator">:</span> <span class="token string">'el-icon-s-tools'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="51"></td><td><pre>                        path<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="52"></td><td><pre>                        children<span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="53"></td><td><pre>                            <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>                                name<span class="token operator">:</span> <span class="token string">'SysDict'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="55"></td><td><pre>                                title<span class="token operator">:</span> <span class="token string">'数字字典'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="56"></td><td><pre>                                icon<span class="token operator">:</span> <span class="token string">'el-icon-s-order'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="57"></td><td><pre>                                path<span class="token operator">:</span> <span class="token string">'/sys/dicts'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="58"></td><td><pre>                                children<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="59"></td><td><pre>                            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="60"></td><td><pre>                        <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="61"></td><td><pre>                    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="62"></td><td><pre>                <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="63"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="64"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="66"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></pre></td></tr></table></figure><p>可以看到，我用 for 循环显示数据，那么这样变动菜单栏时候只需要修改 data 中的 menuList 即可。效果和之前的完全一样。 现在 menuList 的数据我们是直接写到页面 data 上的，一般我们是要请求后端的，所以这里我们定义一个 mock 接口，因为是动态菜单，一般我们也要考虑到权限问题，所以我们请求数据的时候一般除了动态菜单，还要权限的数据，比如菜单的添加、删除是否有权限，是否能显示该按钮等，有了权限数据我们就定动态决定是否展示这些按钮了。</p><ul><li>src/mock.js</li></ul><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>Mock<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">'/sys/menu/nav'</span><span class="token punctuation">,</span> <span class="token string">'get'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token comment">// 菜单 json</span></pre></td></tr><tr><td data-num="3"></td><td><pre>   <span class="token keyword">let</span> nav <span class="token operator">=</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>         name<span class="token operator">:</span> <span class="token string">'SysManga'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>         <span class="token operator">...</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>         name<span class="token operator">:</span> <span class="token string">'SysTools'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>         <span class="token operator">...</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>   <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="13"></td><td><pre>   <span class="token comment">// 权限数据</span></pre></td></tr><tr><td data-num="14"></td><td><pre>   <span class="token keyword">let</span> authoritys <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'SysUser'</span><span class="token punctuation">,</span> <span class="token string">"SysUser:save"</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="15"></td><td><pre>   </pre></td></tr><tr><td data-num="16"></td><td><pre>   Result<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>   Result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>nav <span class="token operator">=</span> nav</pre></td></tr><tr><td data-num="18"></td><td><pre>   Result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>authoritys <span class="token operator">=</span> authoritys</pre></td></tr><tr><td data-num="19"></td><td><pre>   <span class="token keyword">return</span> Result</pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>上面 json 数据太长，所以我部分用省略号... 替代了，以后的代码也会这样哈。 这样我们就定义好了导航菜单的接口，什么时候调用呢？应该登录成功完成之后调用，但是并不是每一次打开我们都需要去登录，也就是浏览器已经存储到用户 token 的时候我们不需要再去登录的了，所以我们不能放在登录完成的方法里。那么是当前这个 Home.vue 页面吗？看起来没什么问题，方正每次都会进入这个页面，然后搞个开关控制是否重新加载就行？<br>我们这里还要考虑一个问题，就是导航菜单的路由问题，啥意思？就是点击菜单之后路由到哪个页面是需要在 router 中声明的。</p><p>这个路由问题我提供两个解决方案：</p><ul><li>1、全部写死，也就是提前写好所有的路由，不管用户有没有权限，后面在通过权限数据来判断用户是否有权限访问路由。</li><li>2、动态渲染，就是把加载到的导航菜单数据动态绑定路由</li></ul><p>这里我们使用第二种解决方案，这类简单点，后续我们再开发页面的时候就不需要去改动路由，可以动态绑定。</p><p>综上，我们把加载菜单数据这个动作放在 router.js 中。Router 有个前缀拦截，就是在路由到页面之前我们可以做一些判断或者加载数据。</p><p>在 router.js 中添加一下代码：</p><ul><li>src/router/index.js</li></ul><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  <span class="token keyword">let</span> hasRoute <span class="token operator">=</span> store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>menus<span class="token punctuation">.</span>hasRoute</pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token keyword">let</span> menus <span class="token operator">=</span> store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>menus<span class="token punctuation">.</span>menuList</pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token keyword">let</span> token <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"token"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>path <span class="token operator">==</span> <span class="token string">'/login'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"login!!!!!!!!!!!"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>token<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"还没有token！！！"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>path<span class="token operator">:</span> <span class="token string">"/login"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>path <span class="token operator">==</span> <span class="token string">'/'</span> <span class="token operator">||</span> to<span class="token punctuation">.</span>path <span class="token operator">==</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>path<span class="token operator">:</span> <span class="token string">"/index"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>hasRoute<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">let</span> newRoutes <span class="token operator">=</span> router<span class="token punctuation">.</span>options<span class="token punctuation">.</span>routes<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/sys/menu/nav"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>headers<span class="token operator">:</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        Authorization<span class="token operator">:</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"token"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="19"></td><td><pre>      store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">"setMenuList"</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>nav<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>      store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">"setPermList"</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>authoritys<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre>      res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>nav<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">menu</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>menu<span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>          menu<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>            <span class="token keyword">let</span> route <span class="token operator">=</span> <span class="token function">menuToRoute</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="25"></td><td><pre>            <span class="token keyword">if</span><span class="token punctuation">(</span>route<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>              newRoutes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>route<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="27"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>          <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="31"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"oldRoutes---------------"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="32"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newRoutes<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="33"></td><td><pre>      router<span class="token punctuation">.</span><span class="token function">addRoutes</span><span class="token punctuation">(</span>newRoutes<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="34"></td><td><pre>      store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">"changeRouteStatus"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="35"></td><td><pre>      <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>path<span class="token operator">:</span> to<span class="token punctuation">.</span>path<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="37"></td><td><pre>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"已经有路由了------------"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="40"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token keyword">const</span> <span class="token function-variable function">menuToRoute</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">menu</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"正在添加menu--》"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="44"></td><td><pre>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>menu<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="45"></td><td><pre>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>menu<span class="token punctuation">.</span>component<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>    <span class="token keyword">return</span> <span class="token keyword">null</span></pre></td></tr><tr><td data-num="47"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>  <span class="token comment">// 复制属性</span></pre></td></tr><tr><td data-num="49"></td><td><pre>  <span class="token keyword">let</span> route <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>    name<span class="token operator">:</span> menu<span class="token punctuation">.</span>name<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="51"></td><td><pre>    path<span class="token operator">:</span> menu<span class="token punctuation">.</span>path<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="52"></td><td><pre>    meta<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>      icon<span class="token operator">:</span> menu<span class="token punctuation">.</span>icon<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="54"></td><td><pre>      title<span class="token operator">:</span> menu<span class="token punctuation">.</span>title</pre></td></tr><tr><td data-num="55"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>  route<span class="token punctuation">.</span><span class="token function-variable function">component</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/'</span> <span class="token operator">+</span> menu<span class="token punctuation">.</span>component <span class="token operator">+</span><span class="token string">'.vue'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="58"></td><td><pre>  <span class="token keyword">return</span> route</pre></td></tr><tr><td data-num="59"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="60"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> router</pre></td></tr></table></figure><p>可以看到，我们通过 menuToRoute 就是把 menu 数据转换成路由对象，然后 router.addRoutes (newRoutes) 动态添加路由对象。 同时上面的 menu 对象中，有个 menu.component，这个就是连接对应的组件，我们需要添加上去，比如说 /sys/users 链接对应到 component (sys/User)。<br>这样我们才能绑定添加到路由。所以我会修改 mock 中的 nav 的数据成这样：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">let</span> nav <span class="token operator">=</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>      <span class="token string">"id"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token string">"title"</span><span class="token operator">:</span> <span class="token string">"系统管理"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>      <span class="token string">"icon"</span><span class="token operator">:</span> <span class="token string">"el-icon-s-operation"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token string">"path"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"sys:manage"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token string">"component"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token string">"children"</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="10"></td><td><pre>         <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>            <span class="token string">"id"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>            <span class="token string">"title"</span><span class="token operator">:</span> <span class="token string">"用户管理"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>            <span class="token string">"icon"</span><span class="token operator">:</span> <span class="token string">"el-icon-s-custom"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>            <span class="token string">"path"</span><span class="token operator">:</span> <span class="token string">"/sys/users"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>            <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"sys:user:list"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre>            <span class="token string">"component"</span><span class="token operator">:</span> <span class="token string">"sys/User"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="17"></td><td><pre>            <span class="token string">"children"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="18"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="19"></td><td><pre>         <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>            <span class="token string">"id"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="21"></td><td><pre>            <span class="token string">"title"</span><span class="token operator">:</span> <span class="token string">"角色管理"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="22"></td><td><pre>            <span class="token string">"icon"</span><span class="token operator">:</span> <span class="token string">"el-icon-rank"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="23"></td><td><pre>            <span class="token string">"path"</span><span class="token operator">:</span> <span class="token string">"/sys/roles"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="24"></td><td><pre>            <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"sys:role:list"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="25"></td><td><pre>            <span class="token string">"component"</span><span class="token operator">:</span> <span class="token string">"sys/Role"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            <span class="token string">"children"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="27"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="28"></td><td><pre>         <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>            <span class="token string">"id"</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="30"></td><td><pre>            <span class="token string">"title"</span><span class="token operator">:</span> <span class="token string">"菜单管理"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="31"></td><td><pre>            <span class="token string">"icon"</span><span class="token operator">:</span> <span class="token string">"el-icon-menu"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="32"></td><td><pre>            <span class="token string">"path"</span><span class="token operator">:</span> <span class="token string">"/sys/menus"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="33"></td><td><pre>            <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"sys:menu:list"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="34"></td><td><pre>            <span class="token string">"component"</span><span class="token operator">:</span> <span class="token string">"sys/Menu"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="35"></td><td><pre>            <span class="token string">"children"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="36"></td><td><pre>         <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>      <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="38"></td><td><pre>   <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="39"></td><td><pre>   <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>      <span class="token string">"id"</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="41"></td><td><pre>      <span class="token string">"title"</span><span class="token operator">:</span> <span class="token string">"系统工具"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="42"></td><td><pre>      <span class="token string">"icon"</span><span class="token operator">:</span> <span class="token string">"el-icon-s-tools"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="43"></td><td><pre>      <span class="token string">"path"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="44"></td><td><pre>      <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"sys:tools"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="45"></td><td><pre>      <span class="token string">"component"</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="46"></td><td><pre>      <span class="token string">"children"</span><span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="47"></td><td><pre>         <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>            <span class="token string">"id"</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="49"></td><td><pre>            <span class="token string">"title"</span><span class="token operator">:</span> <span class="token string">"数字字典"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="50"></td><td><pre>            <span class="token string">"icon"</span><span class="token operator">:</span> <span class="token string">"el-icon-s-order"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="51"></td><td><pre>            <span class="token string">"path"</span><span class="token operator">:</span> <span class="token string">"/sys/dicts"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="52"></td><td><pre>            <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"sys:dict:list"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="53"></td><td><pre>            <span class="token string">"component"</span><span class="token operator">:</span> <span class="token string">"sys/Dict"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="54"></td><td><pre>            <span class="token string">"children"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="55"></td><td><pre>         <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>      <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="57"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="58"></td><td><pre><span class="token punctuation">]</span></pre></td></tr></table></figure><p>同时上面 router 中我们还通过判断是否登录页面，是否有 token 等判断提前判断是否能加载菜单，同时还做了个开关 hasRoute 来动态判断是否已经加载过菜单。<br>还需要在 store 中定义几个方法用于存储数据，我们定义一个 menu 模块，所以在 store 中新建文件夹 modules，然后新建 menus.js</p><ul><li>src/store/modules/menus.js</li></ul><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span></pre></td></tr><tr><td data-num="3"></td><td><pre>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>   state<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token comment">// 菜单栏数据</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      menuList<span class="token operator">:</span>  <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token comment">// 权限数据</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      permList<span class="token operator">:</span>  <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      hasRoute<span class="token operator">:</span> <span class="token boolean">false</span></pre></td></tr><tr><td data-num="11"></td><td><pre>   <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>   mutations<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token function">changeRouteStatus</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> hasRoute</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>         state<span class="token punctuation">.</span>hasRoute <span class="token operator">=</span> hasRoute</pre></td></tr><tr><td data-num="15"></td><td><pre>         sessionStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">"hasRoute"</span><span class="token punctuation">,</span> hasRoute<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="17"></td><td><pre>      <span class="token function">setMenuList</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> menus</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>         state<span class="token punctuation">.</span>menuList <span class="token operator">=</span> menus</pre></td></tr><tr><td data-num="19"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="20"></td><td><pre>      <span class="token function">setPermList</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> authoritys</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>         state<span class="token punctuation">.</span>permList <span class="token operator">=</span> authoritys</pre></td></tr><tr><td data-num="22"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>记得在 store 中 import 这个模块，然后添加到 modules：</p><ul><li>src/store/index.js</li></ul><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> menus <span class="token keyword">from</span> <span class="token string">"./modules/menus"</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token operator">...</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token operator">...</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  modules<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    menus</pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>这样我们菜单的数据就可以加载了，然后再 SideMenu.vue 中直接获取 store 中的 menuList 数据即可显示菜单出来了。</p><ul><li>src/views/inc/SideMenu.vue</li></ul><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        menuList<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>menus<span class="token punctuation">.</span>menuList<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>最后效果如下：<img data-src="../../../assets/image-20210512203416465.png" alt="image-20210512203416465"></p><p>好了，好像已经有点完善了哈哈。</p><h2 id="10-动态标签页开发"><a class="anchor" href="#10-动态标签页开发">#</a> 10. 动态标签页开发</h2><p>上面做完之后，总还觉得少点什么，对了标签页，我看别的后台管理系统都有这个，效果是这样的：</p><p><img data-src="../../../assets/image-20210512203426208.png" alt="image-20210512203426208"></p><p>搞起搞起，别人有我不能没有，于是我去 element-ui 中寻了一圈，发现 Tab 标签页组件挺符合我们要求的，可以动态增减标签页。</p><p>理想的动作是这样的：</p><ol><li>当我们点击导航菜单，上方会添加一个对应的标签，注意不能重复添加，发现已存在标签直接切换到这标签即可</li><li>删除当前标签的时候会自动切换到前一个标签页</li><li>点击标签页的时候会调整到对应的内容页中</li></ol><p>综合 Vue 的思想，我们可以这样设计：在 Store 中统一存储：1、当前标签 Tab，2、已存在的标签 Tab 列表，然后页面从 Store 中获取列表显示，并切换到当前 Tab 即可。删除时候我们循环当前 Tab 列表，剔除 Tab，并切换到指定 Tab。</p><p>我们先和左侧菜单一样单独定义一个组件 Tabs.vue 放在 views/inc 文件夹内：</p><ul><li>src/views/inc/Tabs.vue</li></ul><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token operator">&lt;</span>el<span class="token operator">-</span>tabs v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"editableTabsValue"</span> type<span class="token operator">=</span><span class="token string">"card"</span> closable @tab<span class="token operator">-</span>remove<span class="token operator">=</span><span class="token string">"removeTab"</span> @tab<span class="token operator">-</span>click<span class="token operator">=</span><span class="token string">"clickTab"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token operator">&lt;</span>el<span class="token operator">-</span>tab<span class="token operator">-</span>pane</pre></td></tr><tr><td data-num="4"></td><td><pre>                v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"item in editableTabs"</span></pre></td></tr><tr><td data-num="5"></td><td><pre>                <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">"item.name"</span></pre></td></tr><tr><td data-num="6"></td><td><pre>                <span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">"item.title"</span></pre></td></tr><tr><td data-num="7"></td><td><pre>                <span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">"item.name"</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token operator">></span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>tab<span class="token operator">-</span>pane<span class="token operator">></span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>tabs<span class="token operator">></span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token operator">&lt;</span>script<span class="token operator">></span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        name<span class="token operator">:</span> <span class="token string">"Tabs"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>            <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        computed<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>            editableTabs<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>                <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>                    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>menus<span class="token punctuation">.</span>editableTabs<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="24"></td><td><pre>                <span class="token function">set</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>                    <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>menus<span class="token punctuation">.</span>editableTabs <span class="token operator">=</span> val</pre></td></tr><tr><td data-num="26"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="28"></td><td><pre>            editableTabsValue<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>                <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>                    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>menus<span class="token punctuation">.</span>editableTabsValue<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="32"></td><td><pre>                <span class="token function">set</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>                    <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>menus<span class="token punctuation">.</span>editableTabsValue <span class="token operator">=</span> val<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>            <span class="token function">clickTab</span><span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>                <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>name<span class="token operator">:</span> target<span class="token punctuation">.</span>name<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="40"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="41"></td><td><pre>            <span class="token function">removeTab</span><span class="token punctuation">(</span><span class="token parameter">targetName</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>                <span class="token keyword">let</span> tabs <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>editableTabs<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>                <span class="token keyword">let</span> activeName <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>editableTabsValue<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>                <span class="token comment">// 首页不能删除</span></pre></td></tr><tr><td data-num="45"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span>targetName <span class="token operator">===</span> <span class="token string">"Index"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>                    <span class="token keyword">return</span></pre></td></tr><tr><td data-num="47"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span>activeName <span class="token operator">===</span> targetName<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>                    tabs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">tab<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>                        <span class="token keyword">if</span> <span class="token punctuation">(</span>tab<span class="token punctuation">.</span>name <span class="token operator">===</span> targetName<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>                            <span class="token keyword">let</span> nextTab <span class="token operator">=</span> tabs<span class="token punctuation">[</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> tabs<span class="token punctuation">[</span>index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>                            <span class="token keyword">if</span> <span class="token punctuation">(</span>nextTab<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>                                activeName <span class="token operator">=</span> nextTab<span class="token punctuation">.</span>name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>                            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>                        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>                    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>                <span class="token keyword">this</span><span class="token punctuation">.</span>editableTabsValue <span class="token operator">=</span> activeName<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>                <span class="token keyword">this</span><span class="token punctuation">.</span>editableTabs <span class="token operator">=</span> tabs<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">tab</span> <span class="token operator">=></span> tab<span class="token punctuation">.</span>name <span class="token operator">!==</span> targetName<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="60"></td><td><pre>                <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>name<span class="token operator">:</span> activeName<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="61"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="62"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="63"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="64"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></pre></td></tr></table></figure><p>上面代码中，computed 表示当其依赖的属性的值发生变化时，计算属性会重新计算，反之，则使用缓存中的属性值。这样我们就可以实时监测 Tabs 标签的动态变化实时显示（相当于实时 get、set）。其他 clickTab、removeTab 的逻辑其实也还算简单，特别是 removeTab 注意考虑多种情况就可以。 然后我们来到 store 中的 menu.js，我们添加 editableTabsValue 和 editableTabs，然后把首页作为默认显示的页面。</p><ul><li>src/store/modules/menus.js</li></ul><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>state<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token comment">// 菜单栏数据</span></pre></td></tr><tr><td data-num="3"></td><td><pre>   menuList<span class="token operator">:</span>  <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>   <span class="token comment">// 权限数据</span></pre></td></tr><tr><td data-num="5"></td><td><pre>   permList<span class="token operator">:</span>  <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>   hasRoute<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>   </pre></td></tr><tr><td data-num="8"></td><td><pre>   editableTabsValue<span class="token operator">:</span> <span class="token string">'Index'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>   editableTabs<span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>         title<span class="token operator">:</span> <span class="token string">'首页'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="12"></td><td><pre>         name<span class="token operator">:</span> <span class="token string">'Index'</span></pre></td></tr><tr><td data-num="13"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>   <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr></table></figure><p>ok，然后再 Home.vue 中引入我们 Tabs.vue 这个组件，添加代码的地方比较零散，所以我就写重要代码出来就好，自行添加到指定的地方哈。</p><ul><li>src/views/Home.vue</li></ul><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre># 引入组件</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> Tabs <span class="token keyword">from</span> <span class="token string">"./inc/Tabs"</span></pre></td></tr><tr><td data-num="3"></td><td><pre># 声明组件</pre></td></tr><tr><td data-num="4"></td><td><pre>components<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>   SideMenu<span class="token punctuation">,</span> Tabs</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token operator">&lt;</span>el<span class="token operator">-</span>main<span class="token operator">></span></pre></td></tr><tr><td data-num="8"></td><td><pre>   # 使用组件</pre></td></tr><tr><td data-num="9"></td><td><pre>   <span class="token operator">&lt;</span>Tabs<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Tabs<span class="token operator">></span></pre></td></tr><tr><td data-num="10"></td><td><pre>   <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token string">"margin: 0 15px;"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="11"></td><td><pre>      <span class="token operator">&lt;</span>router<span class="token operator">-</span>view<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>view<span class="token operator">></span></pre></td></tr><tr><td data-num="12"></td><td><pre>   <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>main<span class="token operator">></span></pre></td></tr></table></figure><p>最后效果如下：<img data-src="../../../assets/image-20210512203518767.png" alt="image-20210512203518767"></p><p>好了完成了第一步了，现在我们需要点击菜单导航，然后再 tabs 列表中添加 tab 标签页，那么我们来到 SideMenu.vue，我们给 el-menu-item 每个菜单都添加一个点击事件：</p><ul><li>src/views/inc/SideMenu.vue</li></ul><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>el<span class="token operator">-</span>menu</pre></td></tr><tr><td data-num="2"></td><td><pre>        # 当前选择的菜单</pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token operator">:</span><span class="token keyword">default</span><span class="token operator">-</span>active<span class="token operator">=</span><span class="token string">"activeMenu"</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token operator">...</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token operator">></span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token operator">...</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token operator">&lt;</span>router<span class="token operator">-</span>link <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">"item.path"</span> v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"item in menu.children"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token operator">&lt;</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item <span class="token operator">:</span>index<span class="token operator">=</span><span class="token string">"item.name"</span> @click<span class="token operator">=</span><span class="token string">"selectMenu(item)"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token operator">...</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">></span></pre></td></tr><tr><td data-num="12"></td><td><pre>computed<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    # 选择tab标签时候顺便也要激活当前对应的导航</pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token function">activeMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>menus<span class="token punctuation">.</span>editableTabsValue</pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="18"></td><td><pre>methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token function">selectMenu</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>            name<span class="token operator">:</span> item<span class="token punctuation">.</span>name<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="23"></td><td><pre>            title<span class="token operator">:</span> item<span class="token punctuation">.</span>title</pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">"addTabs"</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>因为 tabs 标签列表我们是存储在 store 中的，因此我们需要 commit 提交事件，因此我们在 menu.js 中添加 addTabs 方法：</p><ul><li>src/store/modules/menus.js</li></ul><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre>mutations<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token function">addTabs</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> tab</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tab<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token comment">// 判断是否在栈内</span></pre></td></tr><tr><td data-num="5"></td><td><pre>      <span class="token keyword">let</span> index <span class="token operator">=</span> state<span class="token punctuation">.</span>editableTabs<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=></span> item<span class="token punctuation">.</span>name <span class="token operator">===</span> tab<span class="token punctuation">.</span>name<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>         <span class="token comment">// 添加到 tabs 中</span></pre></td></tr><tr><td data-num="8"></td><td><pre>         state<span class="token punctuation">.</span>editableTabs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>tab<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token comment">// 当前激活的 tab</span></pre></td></tr><tr><td data-num="11"></td><td><pre>      state<span class="token punctuation">.</span>editableTabsValue <span class="token operator">=</span> tab<span class="token punctuation">.</span>name</pre></td></tr><tr><td data-num="12"></td><td><pre>   <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="13"></td><td><pre>   <span class="token function">setActiveTab</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> tabName</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>      state<span class="token punctuation">.</span>editableTabsValue <span class="token operator">=</span> tabName</pre></td></tr><tr><td data-num="15"></td><td><pre>   <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>添加 tab 标签的时候注意需要激活指定当前标签，也就是设置 editableTabsValue。然后我们也添加了 setActiveTab 方法，方便其他地方指定激活某个标签。 具体效果如下：<br><img data-src="../../../assets/image-20210512203539169.png" alt="image-20210512203539169"></p><p>上面的演示看似没什么问题了，但其实细节还是很多的，比如当我们刷新浏览器、或者直接通过输入链接打开页面时候就不会自动帮我们根据链接回显激活 Tab。</p><p><img data-src="../../../assets/image-20210512203548985.png" alt="image-20210512203548985"></p><p>从上面图中我们可以看出刷新浏览器之后链接 /sys/users 不变，内容不变，但是 Tab 却不见了，所以我们需要修补一下，当用户是直接通过输入链接形式打开页面的时候我们也能根据链接自动添加激活指定的 tab。那么在哪里添加这个回显的方法呢？router 中？其实可以，只不过我们需要做判断，因为每次点击导航都会触发 router。有没有更简便的方法？有的！因为刷新或者打开页面都是一次性的行为，所以我们可以在更高层的 App.vue 中做这个回显动作，具体如下：</p><ul><li>src\App.vue</li></ul><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="3"></td><td><pre>      <span class="token operator">&lt;</span>router<span class="token operator">-</span>view<span class="token operator">/</span><span class="token operator">></span></pre></td></tr><tr><td data-num="4"></td><td><pre>   <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token operator">&lt;</span>script<span class="token operator">></span></pre></td></tr><tr><td data-num="7"></td><td><pre>   <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      name<span class="token operator">:</span> <span class="token string">"App"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      watch<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>         <span class="token comment">// 解决刷新浏览器没有 tab 的问题</span></pre></td></tr><tr><td data-num="11"></td><td><pre>         <span class="token function">$route</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>path <span class="token operator">!=</span> <span class="token string">'/login'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>               <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>                  name<span class="token operator">:</span> to<span class="token punctuation">.</span>name<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>                  title<span class="token operator">:</span> to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>title</pre></td></tr><tr><td data-num="16"></td><td><pre>               <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">"addTabs"</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>         <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></pre></td></tr></table></figure><p>上面代码可以看到，除了 login 页面，其他页面都会触发 addTabs 方法，这样我们就可以添加 tab 和激活 tab 了。<img data-src="../../../assets/image-20210512203612955.png" alt="image-20210512203612955"></p><p>完美搞定！</p><h2 id="11-个人中心"><a class="anchor" href="#11-个人中心">#</a> 11. 个人中心</h2><p>个人中心用来展示用户的基本信息和修改密码，相对简单：</p><p><img data-src="../../../assets/image-20210512203623715.png" alt="image-20210512203623715"></p><ul><li>src/views/UserCenter.vue</li></ul><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token string">"text-align: center;"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="3"></td><td><pre>      <span class="token operator">&lt;</span>h2<span class="token operator">></span>你好！<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>swig￼<span class="token number">4</span><span class="token operator">--</span><span class="token operator">></span> 同学<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>form <span class="token operator">:</span>model<span class="token operator">=</span><span class="token string">"passForm"</span> status<span class="token operator">-</span>icon <span class="token operator">:</span>rules<span class="token operator">=</span><span class="token string">"rules"</span> ref<span class="token operator">=</span><span class="token string">"passForm"</span> label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">"100px"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="5"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"旧密码"</span> prop<span class="token operator">=</span><span class="token string">"currentPass"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="6"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>input type<span class="token operator">=</span><span class="token string">"password"</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"passForm.currentPass"</span> autocomplete<span class="token operator">=</span><span class="token string">"off"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">></span></pre></td></tr><tr><td data-num="7"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="8"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"新密码"</span> prop<span class="token operator">=</span><span class="token string">"password"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="9"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>input type<span class="token operator">=</span><span class="token string">"password"</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"passForm.password"</span> autocomplete<span class="token operator">=</span><span class="token string">"off"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">></span></pre></td></tr><tr><td data-num="10"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="11"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"确认密码"</span> prop<span class="token operator">=</span><span class="token string">"checkPass"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="12"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>input type<span class="token operator">=</span><span class="token string">"password"</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"passForm.checkPass"</span> autocomplete<span class="token operator">=</span><span class="token string">"off"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">></span></pre></td></tr><tr><td data-num="13"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="14"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="15"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"primary"</span> @click<span class="token operator">=</span><span class="token string">"submitForm('passForm')"</span><span class="token operator">></span>提交<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="16"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>button @click<span class="token operator">=</span><span class="token string">"resetForm('passForm')"</span><span class="token operator">></span>重置<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="17"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="18"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">></span></pre></td></tr><tr><td data-num="19"></td><td><pre>   <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token operator">&lt;</span>script<span class="token operator">></span></pre></td></tr><tr><td data-num="22"></td><td><pre>   <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>      name<span class="token operator">:</span> <span class="token string">"Login"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="24"></td><td><pre>      <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>         <span class="token keyword">var</span> <span class="token function-variable function">validatePass</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">rule<span class="token punctuation">,</span> value<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>               <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'请再次输入密码'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>passForm<span class="token punctuation">.</span>password<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>               <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'两次输入密码不一致!'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>               <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>         <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>            userInfo<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="37"></td><td><pre>            passForm<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>               password<span class="token operator">:</span> <span class="token string">'111111'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="39"></td><td><pre>               checkPass<span class="token operator">:</span> <span class="token string">'111111'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="40"></td><td><pre>               currentPass<span class="token operator">:</span> <span class="token string">'111111'</span></pre></td></tr><tr><td data-num="41"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="42"></td><td><pre>            rules<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>               password<span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="44"></td><td><pre>                  <span class="token punctuation">&#123;</span> required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'请输入新密码'</span><span class="token punctuation">,</span> trigger<span class="token operator">:</span> <span class="token string">'blur'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="45"></td><td><pre>                  <span class="token punctuation">&#123;</span> min<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span> max<span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'长度在 6 到 12 个字符'</span><span class="token punctuation">,</span> trigger<span class="token operator">:</span> <span class="token string">'blur'</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>               <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="47"></td><td><pre>               checkPass<span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="48"></td><td><pre>                  <span class="token punctuation">&#123;</span> required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> validator<span class="token operator">:</span> validatePass<span class="token punctuation">,</span> trigger<span class="token operator">:</span> <span class="token string">'blur'</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>               <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="50"></td><td><pre>               currentPass<span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="51"></td><td><pre>                  <span class="token punctuation">&#123;</span> required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'请输入当前密码'</span><span class="token punctuation">,</span> trigger<span class="token operator">:</span> <span class="token string">'blur'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="52"></td><td><pre>               <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="53"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>         <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="56"></td><td><pre>      <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>         <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="58"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="59"></td><td><pre>      methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="60"></td><td><pre>         <span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/sys/userInfo"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="62"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span>userInfo <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="63"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="64"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="65"></td><td><pre>         <span class="token function">submitForm</span><span class="token punctuation">(</span><span class="token parameter">formName</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="66"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">[</span>formName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">valid</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="67"></td><td><pre>               <span class="token keyword">if</span> <span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="68"></td><td><pre>                  <span class="token keyword">const</span> _this <span class="token operator">=</span> <span class="token keyword">this</span></pre></td></tr><tr><td data-num="69"></td><td><pre>                  <span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/sys/user/updataPass'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>passForm<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="70"></td><td><pre>                     _this<span class="token punctuation">.</span><span class="token function">$alert</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">,</span> <span class="token string">'提示'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="71"></td><td><pre>                        confirmButtonText<span class="token operator">:</span> <span class="token string">'确定'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="72"></td><td><pre>                        <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token parameter">action</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="73"></td><td><pre>                           <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">[</span>formName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">resetFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="74"></td><td><pre>                        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="75"></td><td><pre>                     <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="76"></td><td><pre>                  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="77"></td><td><pre>               <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="78"></td><td><pre>                  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'error submit!!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="79"></td><td><pre>                  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="80"></td><td><pre>               <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="81"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="82"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="83"></td><td><pre>         <span class="token function">resetForm</span><span class="token punctuation">(</span><span class="token parameter">formName</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="84"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">[</span>formName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">resetFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="85"></td><td><pre>         <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="86"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="87"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="88"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></pre></td></tr><tr><td data-num="89"></td><td><pre><span class="token operator">&lt;</span>style scoped<span class="token operator">></span></pre></td></tr><tr><td data-num="90"></td><td><pre><span class="token punctuation">.</span>el<span class="token operator">-</span>form <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="91"></td><td><pre>   width<span class="token operator">:</span> <span class="token number">420</span>px<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="92"></td><td><pre>   margin<span class="token operator">:</span> <span class="token number">50</span>px auto<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="93"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="94"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span></pre></td></tr></table></figure><h2 id="12-菜单界面"><a class="anchor" href="#12-菜单界面">#</a> 12. 菜单界面</h2><p><img data-src="../../../assets/image-20210512203645611.png" alt="image-20210512203645611"></p><p>菜单管理我们用到了 Table 表格组件的树形结构数据，我们只需要根据例子自己组装数据，就可以自动显示出来了，在新增数据的时候有个地方需要讲一下：</p><p><img data-src="../../../assets/image-20210512203718366.png" alt="image-20210512203718366"></p><p>这里本应该是个树形数据的结构，但是现有的 elementui 不是很满足，于是我就拿了个简单的下拉框，然后子菜单就加上一个【- 】作为前缀，这样看起来就像一个树形结构了，也比较清晰。具体代码如下：</p><ul><li>src/views/sys/Menu.vue</li></ul><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"上级菜单"</span> prop<span class="token operator">=</span><span class="token string">"parentId"</span> label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">"100px"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>模拟树形下拉框<span class="token operator">--</span><span class="token operator">></span></pre></td></tr><tr><td data-num="3"></td><td><pre>   <span class="token operator">&lt;</span>el<span class="token operator">-</span>select v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"editForm.parentId"</span> placeholder<span class="token operator">=</span><span class="token string">"请选择上级菜单"</span> <span class="token operator">></span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token operator">&lt;</span>template v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"item in tableData"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="5"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>option <span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">"item.name"</span> <span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">"item.id"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>option<span class="token operator">></span></pre></td></tr><tr><td data-num="6"></td><td><pre>         <span class="token operator">&lt;</span>template v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"child in item.children"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="7"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>option <span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">"child.name"</span> <span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">"child.id"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="8"></td><td><pre>               <span class="token operator">&lt;</span>span<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>swig￼<span class="token number">5</span><span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span></pre></td></tr><tr><td data-num="9"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>option<span class="token operator">></span></pre></td></tr><tr><td data-num="10"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="11"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="12"></td><td><pre>   <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>select<span class="token operator">></span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr></table></figure><p>其他都是基本的增删改查，填数据啥的，就比较繁琐和简单了，贴代码了哈：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="3"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>搜索框<span class="token operator">--</span><span class="token operator">></span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>form <span class="token operator">:</span>inline<span class="token operator">=</span><span class="token string">"true"</span> <span class="token operator">:</span>model<span class="token operator">=</span><span class="token string">"searchForm"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="5"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="6"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"primary"</span> @click<span class="token operator">=</span><span class="token string">"dialogFormVisible = true"</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"hasAuth('sys:menu:save')"</span><span class="token operator">></span>新增<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="7"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">></span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>列表<span class="token operator">--</span><span class="token operator">></span></pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>table</pre></td></tr><tr><td data-num="11"></td><td><pre>            <span class="token operator">:</span>data<span class="token operator">=</span><span class="token string">"tableData"</span></pre></td></tr><tr><td data-num="12"></td><td><pre>            style<span class="token operator">=</span><span class="token string">"width: 100%;margin-bottom: 20px;"</span></pre></td></tr><tr><td data-num="13"></td><td><pre>            row<span class="token operator">-</span>key<span class="token operator">=</span><span class="token string">"id"</span></pre></td></tr><tr><td data-num="14"></td><td><pre>            border</pre></td></tr><tr><td data-num="15"></td><td><pre>            stripe</pre></td></tr><tr><td data-num="16"></td><td><pre>            <span class="token keyword">default</span><span class="token operator">-</span>expand<span class="token operator">-</span>all</pre></td></tr><tr><td data-num="17"></td><td><pre>            <span class="token operator">:</span>tree<span class="token operator">-</span>props<span class="token operator">=</span><span class="token string">"&#123;children: 'children', hasChildren: 'hasChildren'&#125;"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="18"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column</pre></td></tr><tr><td data-num="19"></td><td><pre>               prop<span class="token operator">=</span><span class="token string">"name"</span></pre></td></tr><tr><td data-num="20"></td><td><pre>               label<span class="token operator">=</span><span class="token string">"名称"</span></pre></td></tr><tr><td data-num="21"></td><td><pre>               width<span class="token operator">=</span><span class="token string">"180"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="22"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span></pre></td></tr><tr><td data-num="23"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column</pre></td></tr><tr><td data-num="24"></td><td><pre>               prop<span class="token operator">=</span><span class="token string">"perms"</span></pre></td></tr><tr><td data-num="25"></td><td><pre>               label<span class="token operator">=</span><span class="token string">"权限编码"</span></pre></td></tr><tr><td data-num="26"></td><td><pre>               width<span class="token operator">=</span><span class="token string">"180"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="27"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span></pre></td></tr><tr><td data-num="28"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column</pre></td></tr><tr><td data-num="29"></td><td><pre>               prop<span class="token operator">=</span><span class="token string">"icon"</span></pre></td></tr><tr><td data-num="30"></td><td><pre>               label<span class="token operator">=</span><span class="token string">"图标"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="31"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span></pre></td></tr><tr><td data-num="32"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column</pre></td></tr><tr><td data-num="33"></td><td><pre>               prop<span class="token operator">=</span><span class="token string">"type"</span></pre></td></tr><tr><td data-num="34"></td><td><pre>               label<span class="token operator">=</span><span class="token string">"类型"</span></pre></td></tr><tr><td data-num="35"></td><td><pre>               width<span class="token operator">=</span><span class="token string">"120"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="36"></td><td><pre>            <span class="token operator">&lt;</span>template slot<span class="token operator">-</span>scope<span class="token operator">=</span><span class="token string">"scope"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="37"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>tag v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"scope.row.type === 0"</span> size<span class="token operator">=</span><span class="token string">"small"</span><span class="token operator">></span>目录<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>tag<span class="token operator">></span></pre></td></tr><tr><td data-num="38"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>tag v<span class="token operator">-</span><span class="token keyword">else</span><span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"scope.row.type === 1"</span> size<span class="token operator">=</span><span class="token string">"small"</span> type<span class="token operator">=</span><span class="token string">"success"</span><span class="token operator">></span>菜单<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>tag<span class="token operator">></span></pre></td></tr><tr><td data-num="39"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>tag v<span class="token operator">-</span><span class="token keyword">else</span><span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"scope.row.type === 2"</span> size<span class="token operator">=</span><span class="token string">"small"</span> type<span class="token operator">=</span><span class="token string">"info"</span><span class="token operator">></span>按钮<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>tag<span class="token operator">></span></pre></td></tr><tr><td data-num="40"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="41"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span></pre></td></tr><tr><td data-num="42"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column</pre></td></tr><tr><td data-num="43"></td><td><pre>               prop<span class="token operator">=</span><span class="token string">"path"</span></pre></td></tr><tr><td data-num="44"></td><td><pre>               label<span class="token operator">=</span><span class="token string">"菜单URL"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="45"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span></pre></td></tr><tr><td data-num="46"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column</pre></td></tr><tr><td data-num="47"></td><td><pre>               prop<span class="token operator">=</span><span class="token string">"component"</span></pre></td></tr><tr><td data-num="48"></td><td><pre>               label<span class="token operator">=</span><span class="token string">"菜单组件"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="49"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span></pre></td></tr><tr><td data-num="50"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column</pre></td></tr><tr><td data-num="51"></td><td><pre>               prop<span class="token operator">=</span><span class="token string">"orderNum"</span></pre></td></tr><tr><td data-num="52"></td><td><pre>               label<span class="token operator">=</span><span class="token string">"排序号"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="53"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span></pre></td></tr><tr><td data-num="54"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column</pre></td></tr><tr><td data-num="55"></td><td><pre>               prop<span class="token operator">=</span><span class="token string">"statu"</span></pre></td></tr><tr><td data-num="56"></td><td><pre>               label<span class="token operator">=</span><span class="token string">"状态"</span></pre></td></tr><tr><td data-num="57"></td><td><pre>               width<span class="token operator">=</span><span class="token string">"120"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="58"></td><td><pre>            <span class="token operator">&lt;</span>template slot<span class="token operator">-</span>scope<span class="token operator">=</span><span class="token string">"scope"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="59"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>tag v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"scope.row.statu === 0"</span> size<span class="token operator">=</span><span class="token string">"small"</span> type<span class="token operator">=</span><span class="token string">"danger"</span><span class="token operator">></span>禁用<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>tag<span class="token operator">></span></pre></td></tr><tr><td data-num="60"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>tag v<span class="token operator">-</span><span class="token keyword">else</span><span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"scope.row.statu === 1"</span> size<span class="token operator">=</span><span class="token string">"small"</span> type<span class="token operator">=</span><span class="token string">"success"</span><span class="token operator">></span>正常<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>tag<span class="token operator">></span></pre></td></tr><tr><td data-num="61"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="62"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span></pre></td></tr><tr><td data-num="63"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column</pre></td></tr><tr><td data-num="64"></td><td><pre>               label<span class="token operator">=</span><span class="token string">"操作"</span></pre></td></tr><tr><td data-num="65"></td><td><pre>               width<span class="token operator">=</span><span class="token string">"120"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="66"></td><td><pre>            <span class="token operator">&lt;</span>template slot<span class="token operator">-</span>scope<span class="token operator">=</span><span class="token string">"scope"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="67"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"text"</span> @click<span class="token operator">=</span><span class="token string">"editHandle(scope.row.id)"</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"hasAuth('sys:menu:update')"</span><span class="token operator">></span>编辑<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="68"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>divider direction<span class="token operator">=</span><span class="token string">"vertical"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>divider<span class="token operator">></span></pre></td></tr><tr><td data-num="69"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>popconfirm title<span class="token operator">=</span><span class="token string">"确定要删除这条记录吗？"</span> @confirm<span class="token operator">=</span><span class="token string">"delHandle(scope.row.id)"</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"hasAuth('sys:menu:delete')"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="70"></td><td><pre>                  <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"text"</span> slot<span class="token operator">=</span><span class="token string">"reference"</span><span class="token operator">></span>删除<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="71"></td><td><pre>               <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>popconfirm<span class="token operator">></span></pre></td></tr><tr><td data-num="72"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="73"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span></pre></td></tr><tr><td data-num="74"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">></span></pre></td></tr><tr><td data-num="75"></td><td><pre>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>dialog title<span class="token operator">=</span><span class="token string">"菜单信息"</span> <span class="token operator">:</span>visible<span class="token punctuation">.</span>sync<span class="token operator">=</span><span class="token string">"dialogFormVisible"</span> width<span class="token operator">=</span><span class="token string">"600px"</span> @closed<span class="token operator">=</span><span class="token string">"resetForm('editForm')"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="76"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>form <span class="token operator">:</span>model<span class="token operator">=</span><span class="token string">"editForm"</span> <span class="token operator">:</span>rules<span class="token operator">=</span><span class="token string">"editFormRules"</span> ref<span class="token operator">=</span><span class="token string">"editForm"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="77"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"上级菜单"</span> prop<span class="token operator">=</span><span class="token string">"parentId"</span> label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">"100px"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="78"></td><td><pre>               <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>模拟树形下拉框<span class="token operator">--</span><span class="token operator">></span></pre></td></tr><tr><td data-num="79"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>select v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"editForm.parentId"</span> placeholder<span class="token operator">=</span><span class="token string">"请选择上级菜单"</span> <span class="token operator">></span></pre></td></tr><tr><td data-num="80"></td><td><pre>                  <span class="token operator">&lt;</span>template v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"item in tableData"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="81"></td><td><pre>                     <span class="token operator">&lt;</span>el<span class="token operator">-</span>option <span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">"item.name"</span> <span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">"item.id"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>option<span class="token operator">></span></pre></td></tr><tr><td data-num="82"></td><td><pre>                     <span class="token operator">&lt;</span>template v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"child in item.children"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="83"></td><td><pre>                        <span class="token operator">&lt;</span>el<span class="token operator">-</span>option <span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">"child.name"</span> <span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">"child.id"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="84"></td><td><pre>                           <span class="token operator">&lt;</span>span<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>swig￼<span class="token number">6</span><span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span></pre></td></tr><tr><td data-num="85"></td><td><pre>                        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>option<span class="token operator">></span></pre></td></tr><tr><td data-num="86"></td><td><pre>                     <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="87"></td><td><pre>                  <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="88"></td><td><pre>               <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>select<span class="token operator">></span></pre></td></tr><tr><td data-num="89"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="90"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"菜单名称"</span> prop<span class="token operator">=</span><span class="token string">"name"</span> label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">"100px"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="91"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"editForm.name"</span> autocomplete<span class="token operator">=</span><span class="token string">"off"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">></span></pre></td></tr><tr><td data-num="92"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="93"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"权限编码"</span> prop<span class="token operator">=</span><span class="token string">"perms"</span> label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">"100px"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="94"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"editForm.perms"</span> autocomplete<span class="token operator">=</span><span class="token string">"off"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">></span></pre></td></tr><tr><td data-num="95"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="96"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"图标"</span> prop<span class="token operator">=</span><span class="token string">"icon"</span> label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">"100px"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="97"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"editForm.icon"</span> autocomplete<span class="token operator">=</span><span class="token string">"off"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">></span></pre></td></tr><tr><td data-num="98"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="99"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"菜单URL"</span> prop<span class="token operator">=</span><span class="token string">"path"</span> label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">"100px"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="100"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"editForm.path"</span> autocomplete<span class="token operator">=</span><span class="token string">"off"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">></span></pre></td></tr><tr><td data-num="101"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="102"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"菜单组件"</span> prop<span class="token operator">=</span><span class="token string">"component"</span> label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">"100px"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="103"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"editForm.component"</span> autocomplete<span class="token operator">=</span><span class="token string">"off"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">></span></pre></td></tr><tr><td data-num="104"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="105"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"类型"</span> prop<span class="token operator">=</span><span class="token string">"type"</span> label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">"100px"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="106"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>radio<span class="token operator">-</span>group v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"editForm.type"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="107"></td><td><pre>                  <span class="token operator">&lt;</span>el<span class="token operator">-</span>radio <span class="token operator">:</span>label<span class="token operator">=</span><span class="token number">0</span><span class="token operator">></span>目录<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>radio<span class="token operator">></span></pre></td></tr><tr><td data-num="108"></td><td><pre>                  <span class="token operator">&lt;</span>el<span class="token operator">-</span>radio <span class="token operator">:</span>label<span class="token operator">=</span><span class="token number">1</span><span class="token operator">></span>菜单<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>radio<span class="token operator">></span></pre></td></tr><tr><td data-num="109"></td><td><pre>                  <span class="token operator">&lt;</span>el<span class="token operator">-</span>radio <span class="token operator">:</span>label<span class="token operator">=</span><span class="token number">2</span><span class="token operator">></span>按钮<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>radio<span class="token operator">></span></pre></td></tr><tr><td data-num="110"></td><td><pre>               <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>radio<span class="token operator">-</span>group<span class="token operator">></span></pre></td></tr><tr><td data-num="111"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="112"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"状态"</span> prop<span class="token operator">=</span><span class="token string">"statu"</span> label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">"100px"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="113"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>radio<span class="token operator">-</span>group v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"editForm.statu"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="114"></td><td><pre>                  <span class="token operator">&lt;</span>el<span class="token operator">-</span>radio <span class="token operator">:</span>label<span class="token operator">=</span><span class="token number">0</span><span class="token operator">></span>禁用<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>radio<span class="token operator">></span></pre></td></tr><tr><td data-num="115"></td><td><pre>                  <span class="token operator">&lt;</span>el<span class="token operator">-</span>radio <span class="token operator">:</span>label<span class="token operator">=</span><span class="token number">1</span><span class="token operator">></span>正常<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>radio<span class="token operator">></span></pre></td></tr><tr><td data-num="116"></td><td><pre>               <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>radio<span class="token operator">-</span>group<span class="token operator">></span></pre></td></tr><tr><td data-num="117"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="118"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"排序号"</span> prop<span class="token operator">=</span><span class="token string">"orderNum"</span> label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">"100px"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="119"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>input<span class="token operator">-</span>number v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"editForm.orderNum"</span> <span class="token operator">:</span>min<span class="token operator">=</span><span class="token string">"1"</span> label<span class="token operator">=</span><span class="token string">"排序号"</span><span class="token operator">></span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">-</span>number<span class="token operator">></span></pre></td></tr><tr><td data-num="120"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="121"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">></span></pre></td></tr><tr><td data-num="122"></td><td><pre>         <span class="token operator">&lt;</span>div slot<span class="token operator">=</span><span class="token string">"footer"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"dialog-footer"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="123"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>button @click<span class="token operator">=</span><span class="token string">"resetForm('editForm')"</span><span class="token operator">></span>取 消<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="124"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"primary"</span> @click<span class="token operator">=</span><span class="token string">"submitEditForm('editForm')"</span><span class="token operator">></span>确 定<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="125"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="126"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dialog<span class="token operator">></span></pre></td></tr><tr><td data-num="127"></td><td><pre>   <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="128"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="129"></td><td><pre><span class="token operator">&lt;</span>script<span class="token operator">></span></pre></td></tr><tr><td data-num="130"></td><td><pre>   <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="131"></td><td><pre>      name<span class="token operator">:</span> <span class="token string">"Menu"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="132"></td><td><pre>      <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="133"></td><td><pre>         <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="134"></td><td><pre>            searchForm<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="135"></td><td><pre>               name<span class="token operator">:</span> <span class="token string">''</span></pre></td></tr><tr><td data-num="136"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="137"></td><td><pre>            tableData<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="138"></td><td><pre>            multipleSelection<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="139"></td><td><pre>            dialogFormVisible<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="140"></td><td><pre>            editForm<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="141"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="142"></td><td><pre>            editFormRules<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="143"></td><td><pre>               parentId<span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="144"></td><td><pre>                  <span class="token punctuation">&#123;</span>required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'请选择上级菜单'</span><span class="token punctuation">,</span> trigger<span class="token operator">:</span> <span class="token string">'blur'</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="145"></td><td><pre>               <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="146"></td><td><pre>               name<span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="147"></td><td><pre>                  <span class="token punctuation">&#123;</span>required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'请输入名称'</span><span class="token punctuation">,</span> trigger<span class="token operator">:</span> <span class="token string">'blur'</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="148"></td><td><pre>               <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="149"></td><td><pre>               perms<span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="150"></td><td><pre>                  <span class="token punctuation">&#123;</span>required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'请输入权限编码'</span><span class="token punctuation">,</span> trigger<span class="token operator">:</span> <span class="token string">'blur'</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="151"></td><td><pre>               <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="152"></td><td><pre>               type<span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="153"></td><td><pre>                  <span class="token punctuation">&#123;</span>required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'请选择状态'</span><span class="token punctuation">,</span> trigger<span class="token operator">:</span> <span class="token string">'blur'</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="154"></td><td><pre>               <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="155"></td><td><pre>               orderNum<span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="156"></td><td><pre>                  <span class="token punctuation">&#123;</span>required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'请填入排序号'</span><span class="token punctuation">,</span> trigger<span class="token operator">:</span> <span class="token string">'blur'</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="157"></td><td><pre>               <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="158"></td><td><pre>               statu<span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="159"></td><td><pre>                  <span class="token punctuation">&#123;</span>required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'请选择状态'</span><span class="token punctuation">,</span> trigger<span class="token operator">:</span> <span class="token string">'blur'</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="160"></td><td><pre>               <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="161"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="162"></td><td><pre>         <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="163"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="164"></td><td><pre>      methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="165"></td><td><pre>         <span class="token function">getMenuTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="166"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/sys/menu/list"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="167"></td><td><pre>               params<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="168"></td><td><pre>                  name<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>searchForm<span class="token punctuation">.</span>name</pre></td></tr><tr><td data-num="169"></td><td><pre>               <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="170"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="171"></td><td><pre>               console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="172"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span>tableData <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data</pre></td></tr><tr><td data-num="173"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="174"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="175"></td><td><pre>         <span class="token function">submitEditForm</span><span class="token punctuation">(</span><span class="token parameter">formName</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="176"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">[</span>formName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">valid</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="177"></td><td><pre>               <span class="token keyword">if</span> <span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="178"></td><td><pre>                  <span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/sys/menu/'</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>editForm<span class="token punctuation">.</span>id<span class="token operator">?</span> <span class="token string">"update"</span> <span class="token operator">:</span> <span class="token string">"save"</span><span class="token punctuation">)</span> <span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>editForm<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="179"></td><td><pre>                     <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="180"></td><td><pre>                        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="181"></td><td><pre>                        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">resetForm</span><span class="token punctuation">(</span>formName<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="182"></td><td><pre>                        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="183"></td><td><pre>                           showClose<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="184"></td><td><pre>                           message<span class="token operator">:</span> <span class="token string">'恭喜你，操作成功'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="185"></td><td><pre>                           type<span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="186"></td><td><pre>                           <span class="token function-variable function">onClose</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="187"></td><td><pre>                              <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMenuTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="188"></td><td><pre>                           <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="189"></td><td><pre>                        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="190"></td><td><pre>                     <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="191"></td><td><pre>               <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="192"></td><td><pre>                  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'error submit!!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="193"></td><td><pre>                  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="194"></td><td><pre>               <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="195"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="196"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="197"></td><td><pre>         <span class="token function">editHandle</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="198"></td><td><pre>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="199"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/sys/menu/info/"</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="200"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span>editForm <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data</pre></td></tr><tr><td data-num="201"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span>dialogFormVisible <span class="token operator">=</span> <span class="token boolean">true</span></pre></td></tr><tr><td data-num="202"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="203"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="204"></td><td><pre>         <span class="token function">delHandle</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="205"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"/sys/menu/delete/"</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="206"></td><td><pre>               console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="207"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="208"></td><td><pre>                  showClose<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="209"></td><td><pre>                  message<span class="token operator">:</span> <span class="token string">'恭喜你，操作成功'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="210"></td><td><pre>                  type<span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="211"></td><td><pre>                  <span class="token function-variable function">onClose</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="212"></td><td><pre>                     <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMenuTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="213"></td><td><pre>                  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="214"></td><td><pre>               <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="215"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="216"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="217"></td><td><pre>         <span class="token function">resetForm</span><span class="token punctuation">(</span><span class="token parameter">formName</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="218"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">[</span>formName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">resetFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="219"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>editForm <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="220"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>dialogFormVisible <span class="token operator">=</span> <span class="token boolean">false</span></pre></td></tr><tr><td data-num="221"></td><td><pre>         <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="222"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="223"></td><td><pre>      <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="224"></td><td><pre>         <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMenuTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="225"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="226"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="227"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></pre></td></tr></table></figure><h2 id="13-角色界面"><a class="anchor" href="#13-角色界面">#</a> 13. 角色界面</h2><p><img data-src="../../../assets/image-20210512203823428.png" alt="image-20210512203823428"></p><p>角色需要和菜单权限做关联，菜单是个树形结构的，</p><p><img data-src="../../../assets/image-20210512203832080.png" alt="image-20210512203832080"></p><p>因为我们父节点是列表，所以注意不要选中父节点就自动选子节点，注意分开哈哈。</p><p>贴代码啦：</p><ul><li>src/views/sys/Role.vue</li></ul><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="3"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>搜索框<span class="token operator">--</span><span class="token operator">></span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>form <span class="token operator">:</span>inline<span class="token operator">=</span><span class="token string">"true"</span> <span class="token operator">:</span>model<span class="token operator">=</span><span class="token string">"searchForm"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"searchForm"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="5"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="6"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>input</pre></td></tr><tr><td data-num="7"></td><td><pre>                  v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"searchForm.name"</span></pre></td></tr><tr><td data-num="8"></td><td><pre>                  placeholder<span class="token operator">=</span><span class="token string">"名称"</span></pre></td></tr><tr><td data-num="9"></td><td><pre>                  clearable<span class="token operator">></span></pre></td></tr><tr><td data-num="10"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">></span></pre></td></tr><tr><td data-num="11"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="12"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="13"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>button @click<span class="token operator">=</span><span class="token string">"getRoleList()"</span><span class="token operator">></span>搜索<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="14"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"primary"</span> @click<span class="token operator">=</span><span class="token string">"dialogFormVisible = true"</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"hasAuth('sys:role:save')"</span><span class="token operator">></span>新增<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="15"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>popconfirm title<span class="token operator">=</span><span class="token string">"确定要删除这些记录吗？"</span> @confirm<span class="token operator">=</span><span class="token string">"delHandle(null)"</span> style<span class="token operator">=</span><span class="token string">"margin-left: 10px;"</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"hasAuth('sys:role:delete')"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="16"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"danger"</span> slot<span class="token operator">=</span><span class="token string">"reference"</span> <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">"delBtnStu"</span><span class="token operator">></span>批量删除<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="17"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>popconfirm<span class="token operator">></span></pre></td></tr><tr><td data-num="18"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="19"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">></span></pre></td></tr><tr><td data-num="20"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>列表<span class="token operator">--</span><span class="token operator">></span></pre></td></tr><tr><td data-num="21"></td><td><pre>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>table</pre></td></tr><tr><td data-num="22"></td><td><pre>            ref<span class="token operator">=</span><span class="token string">"multipleTable"</span></pre></td></tr><tr><td data-num="23"></td><td><pre>            border</pre></td></tr><tr><td data-num="24"></td><td><pre>            stripe</pre></td></tr><tr><td data-num="25"></td><td><pre>            <span class="token operator">:</span>data<span class="token operator">=</span><span class="token string">"tableData"</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            tooltip<span class="token operator">-</span>effect<span class="token operator">=</span><span class="token string">"dark"</span></pre></td></tr><tr><td data-num="27"></td><td><pre>            style<span class="token operator">=</span><span class="token string">"width: 100%"</span></pre></td></tr><tr><td data-num="28"></td><td><pre>            @selection<span class="token operator">-</span>change<span class="token operator">=</span><span class="token string">"handleSelectionChange"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="29"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column</pre></td></tr><tr><td data-num="30"></td><td><pre>               type<span class="token operator">=</span><span class="token string">"selection"</span></pre></td></tr><tr><td data-num="31"></td><td><pre>               width<span class="token operator">=</span><span class="token string">"55"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="32"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span></pre></td></tr><tr><td data-num="33"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column</pre></td></tr><tr><td data-num="34"></td><td><pre>               prop<span class="token operator">=</span><span class="token string">"name"</span></pre></td></tr><tr><td data-num="35"></td><td><pre>               label<span class="token operator">=</span><span class="token string">"名称"</span></pre></td></tr><tr><td data-num="36"></td><td><pre>               width<span class="token operator">=</span><span class="token string">"120"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="37"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span></pre></td></tr><tr><td data-num="38"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column</pre></td></tr><tr><td data-num="39"></td><td><pre>               prop<span class="token operator">=</span><span class="token string">"code"</span></pre></td></tr><tr><td data-num="40"></td><td><pre>               label<span class="token operator">=</span><span class="token string">"唯一编码"</span></pre></td></tr><tr><td data-num="41"></td><td><pre>               width<span class="token operator">=</span><span class="token string">"120"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="42"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span></pre></td></tr><tr><td data-num="43"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column</pre></td></tr><tr><td data-num="44"></td><td><pre>               prop<span class="token operator">=</span><span class="token string">"remark"</span></pre></td></tr><tr><td data-num="45"></td><td><pre>               label<span class="token operator">=</span><span class="token string">"描述"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="46"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span></pre></td></tr><tr><td data-num="47"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column</pre></td></tr><tr><td data-num="48"></td><td><pre>               prop<span class="token operator">=</span><span class="token string">"statu"</span></pre></td></tr><tr><td data-num="49"></td><td><pre>               label<span class="token operator">=</span><span class="token string">"状态"</span></pre></td></tr><tr><td data-num="50"></td><td><pre>               width<span class="token operator">=</span><span class="token string">"120"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="51"></td><td><pre>            <span class="token operator">&lt;</span>template slot<span class="token operator">-</span>scope<span class="token operator">=</span><span class="token string">"scope"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="52"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>tag v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"scope.row.statu === 0"</span> size<span class="token operator">=</span><span class="token string">"small"</span> type<span class="token operator">=</span><span class="token string">"danger"</span><span class="token operator">></span>禁用<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>tag<span class="token operator">></span></pre></td></tr><tr><td data-num="53"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>tag v<span class="token operator">-</span><span class="token keyword">else</span><span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"scope.row.statu === 1"</span> size<span class="token operator">=</span><span class="token string">"small"</span> type<span class="token operator">=</span><span class="token string">"success"</span><span class="token operator">></span>正常<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>tag<span class="token operator">></span></pre></td></tr><tr><td data-num="54"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="55"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span></pre></td></tr><tr><td data-num="56"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column</pre></td></tr><tr><td data-num="57"></td><td><pre>               label<span class="token operator">=</span><span class="token string">"操作"</span></pre></td></tr><tr><td data-num="58"></td><td><pre>               width<span class="token operator">=</span><span class="token string">"220"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="59"></td><td><pre>            <span class="token operator">&lt;</span>template slot<span class="token operator">-</span>scope<span class="token operator">=</span><span class="token string">"scope"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="60"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"text"</span> @click<span class="token operator">=</span><span class="token string">"permHandle(scope.row.id)"</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"hasAuth('sys:role:perm')"</span><span class="token operator">></span>分配权限<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="61"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>divider direction<span class="token operator">=</span><span class="token string">"vertical"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>divider<span class="token operator">></span></pre></td></tr><tr><td data-num="62"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"text"</span> @click<span class="token operator">=</span><span class="token string">"editHandle(scope.row.id)"</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"hasAuth('sys:role:update')"</span><span class="token operator">></span>编辑<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="63"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>divider direction<span class="token operator">=</span><span class="token string">"vertical"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>divider<span class="token operator">></span></pre></td></tr><tr><td data-num="64"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>popconfirm title<span class="token operator">=</span><span class="token string">"确定要删除这条记录吗？"</span> @confirm<span class="token operator">=</span><span class="token string">"delHandle(scope.row.id)"</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"hasAuth('sys:role:delete')"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="65"></td><td><pre>                  <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"text"</span> slot<span class="token operator">=</span><span class="token string">"reference"</span><span class="token operator">></span>删除<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="66"></td><td><pre>               <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>popconfirm<span class="token operator">></span></pre></td></tr><tr><td data-num="67"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="68"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span></pre></td></tr><tr><td data-num="69"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">></span></pre></td></tr><tr><td data-num="70"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>页码<span class="token operator">--</span><span class="token operator">></span></pre></td></tr><tr><td data-num="71"></td><td><pre>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>pagination</pre></td></tr><tr><td data-num="72"></td><td><pre>            @size<span class="token operator">-</span>change<span class="token operator">=</span><span class="token string">"handleSizeChange"</span></pre></td></tr><tr><td data-num="73"></td><td><pre>            @current<span class="token operator">-</span>change<span class="token operator">=</span><span class="token string">"handleCurrentChange"</span></pre></td></tr><tr><td data-num="74"></td><td><pre>            <span class="token operator">:</span>current<span class="token operator">-</span>page<span class="token operator">=</span><span class="token string">"current"</span></pre></td></tr><tr><td data-num="75"></td><td><pre>            <span class="token operator">:</span>page<span class="token operator">-</span>sizes<span class="token operator">=</span><span class="token string">"[10, 20, 50, 100]"</span></pre></td></tr><tr><td data-num="76"></td><td><pre>            <span class="token operator">:</span>page<span class="token operator">-</span>size<span class="token operator">=</span><span class="token string">"size"</span></pre></td></tr><tr><td data-num="77"></td><td><pre>            layout<span class="token operator">=</span><span class="token string">"total, sizes, prev, pager, next, jumper"</span></pre></td></tr><tr><td data-num="78"></td><td><pre>            <span class="token operator">:</span>total<span class="token operator">=</span><span class="token string">"total"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="79"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>pagination<span class="token operator">></span></pre></td></tr><tr><td data-num="80"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 编辑对话框 <span class="token operator">--</span><span class="token operator">></span></pre></td></tr><tr><td data-num="81"></td><td><pre>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>dialog title<span class="token operator">=</span><span class="token string">"角色信息"</span> <span class="token operator">:</span>visible<span class="token punctuation">.</span>sync<span class="token operator">=</span><span class="token string">"dialogFormVisible"</span> width<span class="token operator">=</span><span class="token string">"600px"</span> @closed<span class="token operator">=</span><span class="token string">"resetForm('editForm')"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="82"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>form <span class="token operator">:</span>model<span class="token operator">=</span><span class="token string">"editForm"</span> <span class="token operator">:</span>rules<span class="token operator">=</span><span class="token string">"editFormRules"</span> ref<span class="token operator">=</span><span class="token string">"editForm"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="83"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"角色名称"</span> prop<span class="token operator">=</span><span class="token string">"name"</span> label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">"100px"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="84"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"editForm.name"</span> autocomplete<span class="token operator">=</span><span class="token string">"off"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">></span></pre></td></tr><tr><td data-num="85"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="86"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"唯一编码"</span> prop<span class="token operator">=</span><span class="token string">"code"</span> label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">"100px"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="87"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"editForm.code"</span> autocomplete<span class="token operator">=</span><span class="token string">"off"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">></span></pre></td></tr><tr><td data-num="88"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="89"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"描述"</span> prop<span class="token operator">=</span><span class="token string">"remark"</span> label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">"100px"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="90"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"editForm.remark"</span> autocomplete<span class="token operator">=</span><span class="token string">"off"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">></span></pre></td></tr><tr><td data-num="91"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="92"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"状态"</span> prop<span class="token operator">=</span><span class="token string">"statu"</span> label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">"100px"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="93"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>radio<span class="token operator">-</span>group v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"editForm.statu"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="94"></td><td><pre>                  <span class="token operator">&lt;</span>el<span class="token operator">-</span>radio <span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">"0"</span><span class="token operator">></span>禁用<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>radio<span class="token operator">></span></pre></td></tr><tr><td data-num="95"></td><td><pre>                  <span class="token operator">&lt;</span>el<span class="token operator">-</span>radio <span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">"1"</span><span class="token operator">></span>正常<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>radio<span class="token operator">></span></pre></td></tr><tr><td data-num="96"></td><td><pre>               <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>radio<span class="token operator">-</span>group<span class="token operator">></span></pre></td></tr><tr><td data-num="97"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="98"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">></span></pre></td></tr><tr><td data-num="99"></td><td><pre>         <span class="token operator">&lt;</span>div slot<span class="token operator">=</span><span class="token string">"footer"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"dialog-footer"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="100"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>button @click<span class="token operator">=</span><span class="token string">"resetForm('editForm')"</span><span class="token operator">></span>取 消<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="101"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"primary"</span> @click<span class="token operator">=</span><span class="token string">"submitEditForm('editForm')"</span><span class="token operator">></span>确 定<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="102"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="103"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dialog<span class="token operator">></span></pre></td></tr><tr><td data-num="104"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 分配权限对话框 <span class="token operator">--</span><span class="token operator">></span></pre></td></tr><tr><td data-num="105"></td><td><pre>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>dialog title<span class="token operator">=</span><span class="token string">"分配权限"</span> <span class="token operator">:</span>visible<span class="token punctuation">.</span>sync<span class="token operator">=</span><span class="token string">"permDialogFormVisible"</span> width<span class="token operator">=</span><span class="token string">"600px"</span> @closed<span class="token operator">=</span><span class="token string">"resetForm('permForm')"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="106"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>form <span class="token operator">:</span>model<span class="token operator">=</span><span class="token string">"permForm"</span> ref<span class="token operator">=</span><span class="token string">"permForm"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="107"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>tree</pre></td></tr><tr><td data-num="108"></td><td><pre>                  <span class="token operator">:</span>data<span class="token operator">=</span><span class="token string">"permTreeData"</span></pre></td></tr><tr><td data-num="109"></td><td><pre>                  show<span class="token operator">-</span>checkbox</pre></td></tr><tr><td data-num="110"></td><td><pre>                  ref<span class="token operator">=</span><span class="token string">"permTree"</span></pre></td></tr><tr><td data-num="111"></td><td><pre>                  <span class="token operator">:</span>check<span class="token operator">-</span>strictly<span class="token operator">=</span>checkStrictly</pre></td></tr><tr><td data-num="112"></td><td><pre>                  node<span class="token operator">-</span>key<span class="token operator">=</span><span class="token string">"id"</span></pre></td></tr><tr><td data-num="113"></td><td><pre>                  <span class="token operator">:</span><span class="token keyword">default</span><span class="token operator">-</span>expand<span class="token operator">-</span>all<span class="token operator">=</span><span class="token boolean">true</span></pre></td></tr><tr><td data-num="114"></td><td><pre>                  <span class="token operator">:</span>props<span class="token operator">=</span><span class="token string">"defaultProps"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="115"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>tree<span class="token operator">></span></pre></td></tr><tr><td data-num="116"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">></span></pre></td></tr><tr><td data-num="117"></td><td><pre>         <span class="token operator">&lt;</span>div slot<span class="token operator">=</span><span class="token string">"footer"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"dialog-footer"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="118"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>button @click<span class="token operator">=</span><span class="token string">"resetForm('permForm')"</span><span class="token operator">></span>取 消<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="119"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"primary"</span> @click<span class="token operator">=</span><span class="token string">"submitPermForm('permForm')"</span><span class="token operator">></span>确 定<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="120"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="121"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dialog<span class="token operator">></span></pre></td></tr><tr><td data-num="122"></td><td><pre>   <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="123"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="124"></td><td><pre><span class="token operator">&lt;</span>script<span class="token operator">></span></pre></td></tr><tr><td data-num="125"></td><td><pre>   <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="126"></td><td><pre>      name<span class="token operator">:</span> <span class="token string">"Role"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="127"></td><td><pre>      <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="128"></td><td><pre>         <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="129"></td><td><pre>            searchForm<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="130"></td><td><pre>               name<span class="token operator">:</span> <span class="token string">''</span></pre></td></tr><tr><td data-num="131"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="132"></td><td><pre>            tableData<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="133"></td><td><pre>            multipleSelection<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="134"></td><td><pre>            dialogFormVisible<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="135"></td><td><pre>            permDialogFormVisible<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="136"></td><td><pre>            delBtnStu<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="137"></td><td><pre>            current<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="138"></td><td><pre>            total<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="139"></td><td><pre>            size<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="140"></td><td><pre>            editForm<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="141"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="142"></td><td><pre>            editFormRules<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="143"></td><td><pre>               name<span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="144"></td><td><pre>                  <span class="token punctuation">&#123;</span>required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'请输入名称'</span><span class="token punctuation">,</span> trigger<span class="token operator">:</span> <span class="token string">'blur'</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="145"></td><td><pre>               <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="146"></td><td><pre>               code<span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="147"></td><td><pre>                  <span class="token punctuation">&#123;</span>required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'请输入唯一编码'</span><span class="token punctuation">,</span> trigger<span class="token operator">:</span> <span class="token string">'blur'</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="148"></td><td><pre>               <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="149"></td><td><pre>               statu<span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="150"></td><td><pre>                  <span class="token punctuation">&#123;</span>required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'请选择状态'</span><span class="token punctuation">,</span> trigger<span class="token operator">:</span> <span class="token string">'blur'</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="151"></td><td><pre>               <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="152"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="153"></td><td><pre>            permForm<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="154"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="155"></td><td><pre>            defaultProps<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="156"></td><td><pre>               children<span class="token operator">:</span> <span class="token string">'children'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="157"></td><td><pre>               label<span class="token operator">:</span> <span class="token string">'name'</span></pre></td></tr><tr><td data-num="158"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="159"></td><td><pre>            permTreeData<span class="token operator">:</span>  <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="160"></td><td><pre>            treeCheckedKeys<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="161"></td><td><pre>            checkStrictly<span class="token operator">:</span> <span class="token boolean">true</span></pre></td></tr><tr><td data-num="162"></td><td><pre>         <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="163"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="164"></td><td><pre>      methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="165"></td><td><pre>         <span class="token function">toggleSelection</span><span class="token punctuation">(</span><span class="token parameter">rows</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="166"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>rows<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="167"></td><td><pre>               rows<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">row</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="168"></td><td><pre>                  <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>multipleTable<span class="token punctuation">.</span><span class="token function">toggleRowSelection</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="169"></td><td><pre>               <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="170"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="171"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>multipleTable<span class="token punctuation">.</span><span class="token function">clearSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="172"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="173"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="174"></td><td><pre>         <span class="token function">handleSelectionChange</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="175"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>multipleSelection <span class="token operator">=</span> val<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="176"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>delBtnStu <span class="token operator">=</span> val<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span></pre></td></tr><tr><td data-num="177"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="178"></td><td><pre>         <span class="token function">getRoleList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="179"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/sys/role/list'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="180"></td><td><pre>               params<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="181"></td><td><pre>                  name<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>searchForm<span class="token punctuation">.</span>name<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="182"></td><td><pre>                  current<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>current<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="183"></td><td><pre>                  size<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>size</pre></td></tr><tr><td data-num="184"></td><td><pre>               <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="185"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="186"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span>tableData <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>records</pre></td></tr><tr><td data-num="187"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span>current <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>current</pre></td></tr><tr><td data-num="188"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>size</pre></td></tr><tr><td data-num="189"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span>total <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>total</pre></td></tr><tr><td data-num="190"></td><td><pre>               console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="191"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="192"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/sys/menu/list"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="193"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span>permTreeData <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data</pre></td></tr><tr><td data-num="194"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="195"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="196"></td><td><pre>         <span class="token function">handleSizeChange</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="197"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> val</pre></td></tr><tr><td data-num="198"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getRoleList</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="199"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="200"></td><td><pre>         <span class="token function">handleCurrentChange</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="201"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>current <span class="token operator">=</span> val</pre></td></tr><tr><td data-num="202"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getRoleList</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="203"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="204"></td><td><pre>         <span class="token function">submitEditForm</span><span class="token punctuation">(</span><span class="token parameter">formName</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="205"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">[</span>formName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">valid</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="206"></td><td><pre>               <span class="token keyword">if</span> <span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="207"></td><td><pre>                  <span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/sys/role/'</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>editForm<span class="token punctuation">.</span>id<span class="token operator">?</span> <span class="token string">"update"</span> <span class="token operator">:</span> <span class="token string">"save"</span><span class="token punctuation">)</span> <span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>editForm<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="208"></td><td><pre>                     <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="209"></td><td><pre>                        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="210"></td><td><pre>                        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">resetForm</span><span class="token punctuation">(</span>formName<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="211"></td><td><pre>                        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="212"></td><td><pre>                           showClose<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="213"></td><td><pre>                           message<span class="token operator">:</span> <span class="token string">'恭喜你，操作成功'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="214"></td><td><pre>                           type<span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="215"></td><td><pre>                           <span class="token function-variable function">onClose</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="216"></td><td><pre>                              <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getRoleList</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="217"></td><td><pre>                           <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="218"></td><td><pre>                        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="219"></td><td><pre>                     <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="220"></td><td><pre>               <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="221"></td><td><pre>                  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'error submit!!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="222"></td><td><pre>                  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="223"></td><td><pre>               <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="224"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="225"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="226"></td><td><pre>         <span class="token function">editHandle</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="227"></td><td><pre>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="228"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/sys/role/info/"</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="229"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span>editForm <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data</pre></td></tr><tr><td data-num="230"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span>dialogFormVisible <span class="token operator">=</span> <span class="token boolean">true</span></pre></td></tr><tr><td data-num="231"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="232"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="233"></td><td><pre>         <span class="token function">delHandle</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="234"></td><td><pre>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="235"></td><td><pre>            <span class="token keyword">var</span> ids <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="236"></td><td><pre>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>id <span class="token operator">?</span> <span class="token number">31</span><span class="token operator">:</span><span class="token number">32</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="237"></td><td><pre>            id <span class="token operator">?</span> ids<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>multipleSelection<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">row</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="238"></td><td><pre>               ids<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>row<span class="token punctuation">.</span>id<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="239"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="240"></td><td><pre>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="241"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"/sys/role/delete"</span><span class="token punctuation">,</span> ids<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="242"></td><td><pre>               console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="243"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="244"></td><td><pre>                  showClose<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="245"></td><td><pre>                  message<span class="token operator">:</span> <span class="token string">'恭喜你，操作成功'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="246"></td><td><pre>                  type<span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="247"></td><td><pre>                  <span class="token function-variable function">onClose</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="248"></td><td><pre>                     <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getRoleList</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="249"></td><td><pre>                  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="250"></td><td><pre>               <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="251"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="252"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="253"></td><td><pre>         <span class="token function">resetForm</span><span class="token punctuation">(</span><span class="token parameter">formName</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="254"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">[</span>formName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">resetFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="255"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>editForm <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="256"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>dialogFormVisible <span class="token operator">=</span> <span class="token boolean">false</span></pre></td></tr><tr><td data-num="257"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>permDialogFormVisible <span class="token operator">=</span> <span class="token boolean">false</span></pre></td></tr><tr><td data-num="258"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="259"></td><td><pre>         <span class="token function">permHandle</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="260"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>permDialogFormVisible <span class="token operator">=</span> <span class="token boolean">true</span></pre></td></tr><tr><td data-num="261"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/sys/role/info/"</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="262"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>permTree<span class="token punctuation">.</span><span class="token function">setCheckedKeys</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>menuIds<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="263"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span>permForm <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data</pre></td></tr><tr><td data-num="264"></td><td><pre>               console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"this.treeCheckedKeys"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="265"></td><td><pre>               console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>treeCheckedKeys<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="266"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="267"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="268"></td><td><pre>         <span class="token function">submitPermForm</span><span class="token punctuation">(</span><span class="token parameter">formName</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="269"></td><td><pre>            <span class="token keyword">var</span> menuIds <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="270"></td><td><pre>            menuIds <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>permTree<span class="token punctuation">.</span><span class="token function">getCheckedKeys</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="271"></td><td><pre>            <span class="token comment">//menuIds = menuIds.concat (this.$refs.permTree.getHalfCheckedKeys ()) // 半选中状态的父节点</span></pre></td></tr><tr><td data-num="272"></td><td><pre>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>menuIds<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="273"></td><td><pre>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>permForm<span class="token punctuation">.</span>id<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="274"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"/sys/role/perm/"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>permForm<span class="token punctuation">.</span>id<span class="token punctuation">,</span> menuIds<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="275"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="276"></td><td><pre>                  showClose<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="277"></td><td><pre>                  message<span class="token operator">:</span> <span class="token string">'恭喜你，操作成功'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="278"></td><td><pre>                  type<span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="279"></td><td><pre>                  <span class="token function-variable function">onClose</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="280"></td><td><pre>                     <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">resetForm</span><span class="token punctuation">(</span>formName<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="281"></td><td><pre>                  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="282"></td><td><pre>               <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="283"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span>permDialogFormVisible <span class="token operator">=</span> <span class="token boolean">false</span></pre></td></tr><tr><td data-num="284"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="285"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="286"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="287"></td><td><pre>      <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="288"></td><td><pre>         <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getRoleList</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="289"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="290"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="291"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></pre></td></tr></table></figure><h2 id="14-用户界面"><a class="anchor" href="#14-用户界面">#</a> 14. 用户界面</h2><p><img data-src="../../../assets/image-20210512203858207.png" alt="image-20210512203858207"></p><p>线上演示：<span class="exturl" data-url="aHR0cHM6Ly93d3cubWFya2VyaHViLmNvbS92dWVhZG1pbi8/ZmlsZUd1aWQ9cHh3eUpIZ3FjV2pXa1RLWA==">https://www.markerhub.com/vueadmin/</span></p><p>用户管理有个操作叫分配角色，和角色添加权限差不多的操作</p><p>贴代码啦：</p><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token operator">&lt;</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="3"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>搜索框<span class="token operator">--</span><span class="token operator">></span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>form <span class="token operator">:</span>inline<span class="token operator">=</span><span class="token string">"true"</span> <span class="token operator">:</span>model<span class="token operator">=</span><span class="token string">"searchForm"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="5"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="6"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>input</pre></td></tr><tr><td data-num="7"></td><td><pre>                  v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"searchForm.username"</span></pre></td></tr><tr><td data-num="8"></td><td><pre>                  placeholder<span class="token operator">=</span><span class="token string">"名称"</span></pre></td></tr><tr><td data-num="9"></td><td><pre>                  clearable<span class="token operator">></span></pre></td></tr><tr><td data-num="10"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">></span></pre></td></tr><tr><td data-num="11"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="12"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="13"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>button<span class="token operator">></span>搜索<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="14"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"primary"</span> @click<span class="token operator">=</span><span class="token string">"dialogFormVisible = true"</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"hasAuth('sys:user:save')"</span><span class="token operator">></span>新增<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="15"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>popconfirm title<span class="token operator">=</span><span class="token string">"确定要删除这些记录吗？"</span> @confirm<span class="token operator">=</span><span class="token string">"delHandle(null)"</span> style<span class="token operator">=</span><span class="token string">"margin-left: 10px;"</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"hasAuth('sys:user:delete')"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="16"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"danger"</span> slot<span class="token operator">=</span><span class="token string">"reference"</span> <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">"delBtnStu"</span><span class="token operator">></span>批量删除<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="17"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>popconfirm<span class="token operator">></span></pre></td></tr><tr><td data-num="18"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="19"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">></span></pre></td></tr><tr><td data-num="20"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>列表<span class="token operator">--</span><span class="token operator">></span></pre></td></tr><tr><td data-num="21"></td><td><pre>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>table</pre></td></tr><tr><td data-num="22"></td><td><pre>            ref<span class="token operator">=</span><span class="token string">"multipleTable"</span></pre></td></tr><tr><td data-num="23"></td><td><pre>            border</pre></td></tr><tr><td data-num="24"></td><td><pre>            stripe</pre></td></tr><tr><td data-num="25"></td><td><pre>            <span class="token operator">:</span>data<span class="token operator">=</span><span class="token string">"tableData"</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            tooltip<span class="token operator">-</span>effect<span class="token operator">=</span><span class="token string">"dark"</span></pre></td></tr><tr><td data-num="27"></td><td><pre>            style<span class="token operator">=</span><span class="token string">"width: 100%"</span></pre></td></tr><tr><td data-num="28"></td><td><pre>            @selection<span class="token operator">-</span>change<span class="token operator">=</span><span class="token string">"handleSelectionChange"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="29"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column</pre></td></tr><tr><td data-num="30"></td><td><pre>               type<span class="token operator">=</span><span class="token string">"selection"</span></pre></td></tr><tr><td data-num="31"></td><td><pre>               width<span class="token operator">=</span><span class="token string">"55"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="32"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span></pre></td></tr><tr><td data-num="33"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column</pre></td></tr><tr><td data-num="34"></td><td><pre>               label<span class="token operator">=</span><span class="token string">"头像"</span></pre></td></tr><tr><td data-num="35"></td><td><pre>               width<span class="token operator">=</span><span class="token string">"50"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="36"></td><td><pre>            <span class="token operator">&lt;</span>template slot<span class="token operator">-</span>scope<span class="token operator">=</span><span class="token string">"scope"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="37"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>avatar size<span class="token operator">=</span><span class="token string">"small"</span></pre></td></tr><tr><td data-num="38"></td><td><pre>                          <span class="token operator">:</span>src<span class="token operator">=</span><span class="token string">"scope.row.avatar"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>avatar<span class="token operator">></span></pre></td></tr><tr><td data-num="39"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="40"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span></pre></td></tr><tr><td data-num="41"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column</pre></td></tr><tr><td data-num="42"></td><td><pre>               prop<span class="token operator">=</span><span class="token string">"username"</span></pre></td></tr><tr><td data-num="43"></td><td><pre>               label<span class="token operator">=</span><span class="token string">"用户名"</span></pre></td></tr><tr><td data-num="44"></td><td><pre>               width<span class="token operator">=</span><span class="token string">"120"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="45"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span></pre></td></tr><tr><td data-num="46"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column</pre></td></tr><tr><td data-num="47"></td><td><pre>               label<span class="token operator">=</span><span class="token string">"角色名称"</span></pre></td></tr><tr><td data-num="48"></td><td><pre>               width<span class="token operator">=</span><span class="token string">"180"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="49"></td><td><pre>            <span class="token operator">&lt;</span>template slot<span class="token operator">-</span>scope<span class="token operator">=</span><span class="token string">"scope"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="50"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>tag style<span class="token operator">=</span><span class="token string">"margin-right: 5px;"</span> size<span class="token operator">=</span><span class="token string">"small"</span> type<span class="token operator">=</span><span class="token string">"info"</span> v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"item in scope.row.roles"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>swig￼<span class="token number">7</span><span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>tag<span class="token operator">></span></pre></td></tr><tr><td data-num="51"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="52"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span></pre></td></tr><tr><td data-num="53"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column</pre></td></tr><tr><td data-num="54"></td><td><pre>               prop<span class="token operator">=</span><span class="token string">"email"</span></pre></td></tr><tr><td data-num="55"></td><td><pre>               label<span class="token operator">=</span><span class="token string">"邮箱"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="56"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span></pre></td></tr><tr><td data-num="57"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column</pre></td></tr><tr><td data-num="58"></td><td><pre>               prop<span class="token operator">=</span><span class="token string">"phone"</span></pre></td></tr><tr><td data-num="59"></td><td><pre>               label<span class="token operator">=</span><span class="token string">"手机号"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="60"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span></pre></td></tr><tr><td data-num="61"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column</pre></td></tr><tr><td data-num="62"></td><td><pre>               label<span class="token operator">=</span><span class="token string">"状态"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="63"></td><td><pre>            <span class="token operator">&lt;</span>template slot<span class="token operator">-</span>scope<span class="token operator">=</span><span class="token string">"scope"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="64"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>tag v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"scope.row.statu === 0"</span> size<span class="token operator">=</span><span class="token string">"small"</span> type<span class="token operator">=</span><span class="token string">"danger"</span><span class="token operator">></span>禁用<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>tag<span class="token operator">></span></pre></td></tr><tr><td data-num="65"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>tag v<span class="token operator">-</span><span class="token keyword">else</span><span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"scope.row.statu === 1"</span> size<span class="token operator">=</span><span class="token string">"small"</span> type<span class="token operator">=</span><span class="token string">"success"</span><span class="token operator">></span>正常<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>tag<span class="token operator">></span></pre></td></tr><tr><td data-num="66"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="67"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span></pre></td></tr><tr><td data-num="68"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column</pre></td></tr><tr><td data-num="69"></td><td><pre>               prop<span class="token operator">=</span><span class="token string">"created"</span></pre></td></tr><tr><td data-num="70"></td><td><pre>               label<span class="token operator">=</span><span class="token string">"创建时间"</span></pre></td></tr><tr><td data-num="71"></td><td><pre>               width<span class="token operator">=</span><span class="token string">"200"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="72"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span></pre></td></tr><tr><td data-num="73"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column</pre></td></tr><tr><td data-num="74"></td><td><pre>               width<span class="token operator">=</span><span class="token string">"260px"</span></pre></td></tr><tr><td data-num="75"></td><td><pre>               label<span class="token operator">=</span><span class="token string">"操作"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="76"></td><td><pre>            <span class="token operator">&lt;</span>template slot<span class="token operator">-</span>scope<span class="token operator">=</span><span class="token string">"scope"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="77"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"text"</span> @click<span class="token operator">=</span><span class="token string">"roleHandle(scope.row.id)"</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"hasAuth('sys:user:role')"</span><span class="token operator">></span>分配角色<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="78"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>divider direction<span class="token operator">=</span><span class="token string">"vertical"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>divider<span class="token operator">></span></pre></td></tr><tr><td data-num="79"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"text"</span> @click<span class="token operator">=</span><span class="token string">"repassHandle(scope.row.id, scope.row.username)"</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"hasAuth('sys:user:repass')"</span><span class="token operator">></span>重置密码<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="80"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>divider direction<span class="token operator">=</span><span class="token string">"vertical"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>divider<span class="token operator">></span></pre></td></tr><tr><td data-num="81"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"text"</span> @click<span class="token operator">=</span><span class="token string">"editHandle(scope.row.id)"</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"hasAuth('sys:user:update')"</span><span class="token operator">></span>编辑<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="82"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>divider direction<span class="token operator">=</span><span class="token string">"vertical"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>divider<span class="token operator">></span></pre></td></tr><tr><td data-num="83"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>popconfirm title<span class="token operator">=</span><span class="token string">"确定要删除这条记录吗？"</span> @confirm<span class="token operator">=</span><span class="token string">"delHandle(scope.row.id)"</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"hasAuth('sys:user:delete')"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="84"></td><td><pre>                  <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"text"</span> slot<span class="token operator">=</span><span class="token string">"reference"</span><span class="token operator">></span>删除<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="85"></td><td><pre>               <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>popconfirm<span class="token operator">></span></pre></td></tr><tr><td data-num="86"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="87"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span></pre></td></tr><tr><td data-num="88"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">></span></pre></td></tr><tr><td data-num="89"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>页码<span class="token operator">--</span><span class="token operator">></span></pre></td></tr><tr><td data-num="90"></td><td><pre>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>pagination</pre></td></tr><tr><td data-num="91"></td><td><pre>            @size<span class="token operator">-</span>change<span class="token operator">=</span><span class="token string">"handleSizeChange"</span></pre></td></tr><tr><td data-num="92"></td><td><pre>            @current<span class="token operator">-</span>change<span class="token operator">=</span><span class="token string">"handleCurrentChange"</span></pre></td></tr><tr><td data-num="93"></td><td><pre>            <span class="token operator">:</span>current<span class="token operator">-</span>page<span class="token operator">=</span><span class="token string">"current"</span></pre></td></tr><tr><td data-num="94"></td><td><pre>            <span class="token operator">:</span>page<span class="token operator">-</span>sizes<span class="token operator">=</span><span class="token string">"[10, 20, 50, 100]"</span></pre></td></tr><tr><td data-num="95"></td><td><pre>            <span class="token operator">:</span>page<span class="token operator">-</span>size<span class="token operator">=</span><span class="token string">"size"</span></pre></td></tr><tr><td data-num="96"></td><td><pre>            layout<span class="token operator">=</span><span class="token string">"total, sizes, prev, pager, next, jumper"</span></pre></td></tr><tr><td data-num="97"></td><td><pre>            <span class="token operator">:</span>total<span class="token operator">=</span><span class="token string">"total"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="98"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>pagination<span class="token operator">></span></pre></td></tr><tr><td data-num="99"></td><td><pre>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>dialog title<span class="token operator">=</span><span class="token string">"用户信息"</span> <span class="token operator">:</span>visible<span class="token punctuation">.</span>sync<span class="token operator">=</span><span class="token string">"dialogFormVisible"</span> width<span class="token operator">=</span><span class="token string">"600px"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="100"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>form <span class="token operator">:</span>model<span class="token operator">=</span><span class="token string">"editForm"</span> <span class="token operator">:</span>rules<span class="token operator">=</span><span class="token string">"editFormRules"</span> ref<span class="token operator">=</span><span class="token string">"editForm"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="101"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"用户名"</span> prop<span class="token operator">=</span><span class="token string">"username"</span> label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">"100px"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="102"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"editForm.username"</span> autocomplete<span class="token operator">=</span><span class="token string">"off"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">></span></pre></td></tr><tr><td data-num="103"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>alert</pre></td></tr><tr><td data-num="104"></td><td><pre>                     title<span class="token operator">=</span><span class="token string">"初始密码为888888"</span></pre></td></tr><tr><td data-num="105"></td><td><pre>                     <span class="token operator">:</span>closable<span class="token operator">=</span><span class="token string">"false"</span></pre></td></tr><tr><td data-num="106"></td><td><pre>                     type<span class="token operator">=</span><span class="token string">"info"</span></pre></td></tr><tr><td data-num="107"></td><td><pre>                     style<span class="token operator">=</span><span class="token string">"line-height: 12px;"</span></pre></td></tr><tr><td data-num="108"></td><td><pre>               <span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>alert<span class="token operator">></span></pre></td></tr><tr><td data-num="109"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="110"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"邮箱"</span>  prop<span class="token operator">=</span><span class="token string">"email"</span> label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">"100px"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="111"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"editForm.email"</span> autocomplete<span class="token operator">=</span><span class="token string">"off"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">></span></pre></td></tr><tr><td data-num="112"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="113"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"手机号"</span>  prop<span class="token operator">=</span><span class="token string">"phone"</span> label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">"100px"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="114"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"editForm.phone"</span> autocomplete<span class="token operator">=</span><span class="token string">"off"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">></span></pre></td></tr><tr><td data-num="115"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="116"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"状态"</span>  prop<span class="token operator">=</span><span class="token string">"statu"</span> label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">"100px"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="117"></td><td><pre>               <span class="token operator">&lt;</span>el<span class="token operator">-</span>radio<span class="token operator">-</span>group v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"editForm.statu"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="118"></td><td><pre>                  <span class="token operator">&lt;</span>el<span class="token operator">-</span>radio <span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">"0"</span><span class="token operator">></span>禁用<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>radio<span class="token operator">></span></pre></td></tr><tr><td data-num="119"></td><td><pre>                  <span class="token operator">&lt;</span>el<span class="token operator">-</span>radio <span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">"1"</span><span class="token operator">></span>正常<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>radio<span class="token operator">></span></pre></td></tr><tr><td data-num="120"></td><td><pre>               <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>radio<span class="token operator">-</span>group<span class="token operator">></span></pre></td></tr><tr><td data-num="121"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">></span></pre></td></tr><tr><td data-num="122"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">></span></pre></td></tr><tr><td data-num="123"></td><td><pre>         <span class="token operator">&lt;</span>div slot<span class="token operator">=</span><span class="token string">"footer"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"dialog-footer"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="124"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>button @click<span class="token operator">=</span><span class="token string">"resetForm('editForm')"</span><span class="token operator">></span>取 消<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="125"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"primary"</span> @click<span class="token operator">=</span><span class="token string">"submitEditForm('editForm')"</span><span class="token operator">></span>确 定<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="126"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="127"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dialog<span class="token operator">></span></pre></td></tr><tr><td data-num="128"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 分配权限对话框 <span class="token operator">--</span><span class="token operator">></span></pre></td></tr><tr><td data-num="129"></td><td><pre>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>dialog title<span class="token operator">=</span><span class="token string">"分配角色"</span> <span class="token operator">:</span>visible<span class="token punctuation">.</span>sync<span class="token operator">=</span><span class="token string">"roleDialogFormVisible"</span> width<span class="token operator">=</span><span class="token string">"600px"</span> @closed<span class="token operator">=</span><span class="token string">"resetForm('roleForm')"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="130"></td><td><pre>         <span class="token operator">&lt;</span>el<span class="token operator">-</span>form <span class="token operator">:</span>model<span class="token operator">=</span><span class="token string">"roleForm"</span> ref<span class="token operator">=</span><span class="token string">"roleForm"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="131"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>tree</pre></td></tr><tr><td data-num="132"></td><td><pre>                  <span class="token operator">:</span>data<span class="token operator">=</span><span class="token string">"roleTreeData"</span></pre></td></tr><tr><td data-num="133"></td><td><pre>                  show<span class="token operator">-</span>checkbox</pre></td></tr><tr><td data-num="134"></td><td><pre>                  ref<span class="token operator">=</span><span class="token string">"roleTree"</span></pre></td></tr><tr><td data-num="135"></td><td><pre>                  node<span class="token operator">-</span>key<span class="token operator">=</span><span class="token string">"id"</span></pre></td></tr><tr><td data-num="136"></td><td><pre>                  <span class="token operator">:</span><span class="token keyword">default</span><span class="token operator">-</span>expand<span class="token operator">-</span>all<span class="token operator">=</span><span class="token boolean">true</span></pre></td></tr><tr><td data-num="137"></td><td><pre>                  <span class="token operator">:</span>props<span class="token operator">=</span><span class="token string">"defaultProps"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="138"></td><td><pre>            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>tree<span class="token operator">></span></pre></td></tr><tr><td data-num="139"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">></span></pre></td></tr><tr><td data-num="140"></td><td><pre>         <span class="token operator">&lt;</span>div slot<span class="token operator">=</span><span class="token string">"footer"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"dialog-footer"</span><span class="token operator">></span></pre></td></tr><tr><td data-num="141"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>button @click<span class="token operator">=</span><span class="token string">"resetForm('roleForm')"</span><span class="token operator">></span>取 消<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="142"></td><td><pre>            <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"primary"</span> @click<span class="token operator">=</span><span class="token string">"submitRoleForm('roleForm')"</span><span class="token operator">></span>确 定<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span></pre></td></tr><tr><td data-num="143"></td><td><pre>         <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="144"></td><td><pre>      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dialog<span class="token operator">></span></pre></td></tr><tr><td data-num="145"></td><td><pre>   <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></pre></td></tr><tr><td data-num="146"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></pre></td></tr><tr><td data-num="147"></td><td><pre><span class="token operator">&lt;</span>script<span class="token operator">></span></pre></td></tr><tr><td data-num="148"></td><td><pre>   <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="149"></td><td><pre>      name<span class="token operator">:</span> <span class="token string">"User"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="150"></td><td><pre>      <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="151"></td><td><pre>         <span class="token keyword">return</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="152"></td><td><pre>            searchForm<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="153"></td><td><pre>               username<span class="token operator">:</span> <span class="token string">''</span></pre></td></tr><tr><td data-num="154"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="155"></td><td><pre>            editForm<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="156"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="157"></td><td><pre>            editFormRules<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="158"></td><td><pre>               username<span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="159"></td><td><pre>                  <span class="token punctuation">&#123;</span>required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'请输入用户名称'</span><span class="token punctuation">,</span> trigger<span class="token operator">:</span> <span class="token string">'blur'</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="160"></td><td><pre>               <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="161"></td><td><pre>               email<span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="162"></td><td><pre>                  <span class="token punctuation">&#123;</span>required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'请输入邮箱'</span><span class="token punctuation">,</span> trigger<span class="token operator">:</span> <span class="token string">'blur'</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="163"></td><td><pre>               <span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="164"></td><td><pre>               statu<span class="token operator">:</span> <span class="token punctuation">[</span></pre></td></tr><tr><td data-num="165"></td><td><pre>                  <span class="token punctuation">&#123;</span>required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'请选择状态'</span><span class="token punctuation">,</span> trigger<span class="token operator">:</span> <span class="token string">'blur'</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="166"></td><td><pre>               <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="167"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="168"></td><td><pre>            current<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="169"></td><td><pre>            total<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="170"></td><td><pre>            size<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="171"></td><td><pre>            dialogFormVisible<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="172"></td><td><pre>            tableData<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="173"></td><td><pre>            multipleSelection<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="174"></td><td><pre>            delBtnStu<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="175"></td><td><pre>            roleDialogFormVisible<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="176"></td><td><pre>            roleForm<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="177"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="178"></td><td><pre>            defaultProps<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="179"></td><td><pre>               children<span class="token operator">:</span> <span class="token string">'children'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="180"></td><td><pre>               label<span class="token operator">:</span> <span class="token string">'name'</span></pre></td></tr><tr><td data-num="181"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="182"></td><td><pre>            roleTreeData<span class="token operator">:</span>  <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="183"></td><td><pre>            treeCheckedKeys<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="184"></td><td><pre>         <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="185"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="186"></td><td><pre>      methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="187"></td><td><pre>         <span class="token function">toggleSelection</span><span class="token punctuation">(</span><span class="token parameter">rows</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="188"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>rows<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="189"></td><td><pre>               rows<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">row</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="190"></td><td><pre>                  <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>multipleTable<span class="token punctuation">.</span><span class="token function">toggleRowSelection</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="191"></td><td><pre>               <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="192"></td><td><pre>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="193"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>multipleTable<span class="token punctuation">.</span><span class="token function">clearSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="194"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="195"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="196"></td><td><pre>         <span class="token function">handleSelectionChange</span><span class="token punctuation">(</span><span class="token parameter">rows</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="197"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>multipleSelection <span class="token operator">=</span> rows<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="198"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>delBtnStu <span class="token operator">=</span> rows<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span></pre></td></tr><tr><td data-num="199"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="200"></td><td><pre>         <span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="201"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/sys/user/list'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="202"></td><td><pre>               params<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="203"></td><td><pre>                  name<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>searchForm<span class="token punctuation">.</span>name<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="204"></td><td><pre>                  current<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>current<span class="token punctuation">,</span></pre></td></tr><tr><td data-num="205"></td><td><pre>                  size<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>size</pre></td></tr><tr><td data-num="206"></td><td><pre>               <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="207"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="208"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span>tableData <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>records</pre></td></tr><tr><td data-num="209"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span>current <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>current</pre></td></tr><tr><td data-num="210"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>size</pre></td></tr><tr><td data-num="211"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span>total <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>total</pre></td></tr><tr><td data-num="212"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="213"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="214"></td><td><pre>         <span class="token function">handleSizeChange</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="215"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> val</pre></td></tr><tr><td data-num="216"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="217"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="218"></td><td><pre>         <span class="token function">handleCurrentChange</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="219"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>current <span class="token operator">=</span> val</pre></td></tr><tr><td data-num="220"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="221"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="222"></td><td><pre>         <span class="token function">submitEditForm</span><span class="token punctuation">(</span><span class="token parameter">formName</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="223"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">[</span>formName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">valid</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="224"></td><td><pre>               <span class="token keyword">if</span> <span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="225"></td><td><pre>                  <span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/sys/user/'</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>editForm<span class="token punctuation">.</span>id<span class="token operator">?</span> <span class="token string">"update"</span> <span class="token operator">:</span> <span class="token string">"save"</span><span class="token punctuation">)</span> <span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>editForm<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="226"></td><td><pre>                     <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="227"></td><td><pre>                        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="228"></td><td><pre>                        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">resetForm</span><span class="token punctuation">(</span>formName<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="229"></td><td><pre>                        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="230"></td><td><pre>                           showClose<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="231"></td><td><pre>                           message<span class="token operator">:</span> <span class="token string">'恭喜你，操作成功'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="232"></td><td><pre>                           type<span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="233"></td><td><pre>                           <span class="token function-variable function">onClose</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="234"></td><td><pre>                              <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="235"></td><td><pre>                           <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="236"></td><td><pre>                        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="237"></td><td><pre>                     <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="238"></td><td><pre>               <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="239"></td><td><pre>                  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'error submit!!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="240"></td><td><pre>                  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="241"></td><td><pre>               <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="242"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="243"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="244"></td><td><pre>         <span class="token function">editHandle</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="245"></td><td><pre>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="246"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/sys/user/info/"</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="247"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span>editForm <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data</pre></td></tr><tr><td data-num="248"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span>dialogFormVisible <span class="token operator">=</span> <span class="token boolean">true</span></pre></td></tr><tr><td data-num="249"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="250"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="251"></td><td><pre>         <span class="token function">delHandle</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="252"></td><td><pre>            <span class="token keyword">var</span> ids <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="253"></td><td><pre>            id <span class="token operator">?</span> ids<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>multipleSelection<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">row</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="254"></td><td><pre>               ids<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>row<span class="token punctuation">.</span>id<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="255"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="256"></td><td><pre>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="257"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"/sys/user/delete"</span><span class="token punctuation">,</span> ids<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="258"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="259"></td><td><pre>                  showClose<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="260"></td><td><pre>                  message<span class="token operator">:</span> <span class="token string">'恭喜你，操作成功'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="261"></td><td><pre>                  type<span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="262"></td><td><pre>                  <span class="token function-variable function">onClose</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="263"></td><td><pre>                     <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="264"></td><td><pre>                  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="265"></td><td><pre>               <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="266"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="267"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="268"></td><td><pre>         <span class="token function">resetForm</span><span class="token punctuation">(</span><span class="token parameter">formName</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="269"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">[</span>formName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">resetFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="270"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>editForm <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="271"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>dialogFormVisible <span class="token operator">=</span> <span class="token boolean">false</span></pre></td></tr><tr><td data-num="272"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>roleDialogFormVisible <span class="token operator">=</span> <span class="token boolean">false</span></pre></td></tr><tr><td data-num="273"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="274"></td><td><pre>         <span class="token function">roleHandle</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="275"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/sys/user/info/"</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="276"></td><td><pre>               <span class="token keyword">const</span> sysuser <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data</pre></td></tr><tr><td data-num="277"></td><td><pre>               <span class="token keyword">var</span> roleIds <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="278"></td><td><pre>               sysuser<span class="token punctuation">.</span>roles<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">row</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="279"></td><td><pre>                  roleIds<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>row<span class="token punctuation">.</span>id<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="280"></td><td><pre>               <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="281"></td><td><pre>               console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"roleIds"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="282"></td><td><pre>               console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>roleIds<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="283"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span>roleForm <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data</pre></td></tr><tr><td data-num="284"></td><td><pre>               console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"this.treeCheckedKeys"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="285"></td><td><pre>               console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>treeCheckedKeys<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="286"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/sys/role/list"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="287"></td><td><pre>                  <span class="token keyword">this</span><span class="token punctuation">.</span>roleTreeData <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>records</pre></td></tr><tr><td data-num="288"></td><td><pre>                  <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>roleTree<span class="token punctuation">.</span><span class="token function">setCheckedKeys</span><span class="token punctuation">(</span>roleIds<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="289"></td><td><pre>               <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="290"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="291"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>roleDialogFormVisible <span class="token operator">=</span> <span class="token boolean">true</span></pre></td></tr><tr><td data-num="292"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="293"></td><td><pre>         <span class="token function">submitRoleForm</span><span class="token punctuation">(</span><span class="token parameter">formName</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="294"></td><td><pre>            <span class="token keyword">var</span> roleIds <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="295"></td><td><pre>            roleIds <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>roleTree<span class="token punctuation">.</span><span class="token function">getCheckedKeys</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="296"></td><td><pre>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>roleIds<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="297"></td><td><pre>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>roleForm<span class="token punctuation">.</span>id<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="298"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"/sys/user/role/"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>roleForm<span class="token punctuation">.</span>id<span class="token punctuation">,</span> roleIds<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="299"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="300"></td><td><pre>                  showClose<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="301"></td><td><pre>                  message<span class="token operator">:</span> <span class="token string">'恭喜你，操作成功'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="302"></td><td><pre>                  type<span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="303"></td><td><pre>                  <span class="token function-variable function">onClose</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="304"></td><td><pre>                     <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">resetForm</span><span class="token punctuation">(</span>formName<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="305"></td><td><pre>                     <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="306"></td><td><pre>                  <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="307"></td><td><pre>               <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="308"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span>roleDialogFormVisible <span class="token operator">=</span> <span class="token boolean">false</span></pre></td></tr><tr><td data-num="309"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="310"></td><td><pre>         <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="311"></td><td><pre>         <span class="token function">repassHandle</span><span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> username</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="312"></td><td><pre>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$confirm</span><span class="token punctuation">(</span><span class="token string">'将重置用户【'</span> <span class="token operator">+</span> username <span class="token operator">+</span> <span class="token string">'】的密码, 是否继续?'</span><span class="token punctuation">,</span> <span class="token string">'提示'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="313"></td><td><pre>               confirmButtonText<span class="token operator">:</span> <span class="token string">'确定'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="314"></td><td><pre>               cancelButtonText<span class="token operator">:</span> <span class="token string">'取消'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="315"></td><td><pre>               type<span class="token operator">:</span> <span class="token string">'warning'</span></pre></td></tr><tr><td data-num="316"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="317"></td><td><pre>               <span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"/sys/user/repass"</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="318"></td><td><pre>                  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="319"></td><td><pre>                     showClose<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="320"></td><td><pre>                     message<span class="token operator">:</span> <span class="token string">'恭喜你，操作成功'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="321"></td><td><pre>                     type<span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="322"></td><td><pre>                     <span class="token function-variable function">onClose</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="323"></td><td><pre>                     <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="324"></td><td><pre>                  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="325"></td><td><pre>               <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="326"></td><td><pre>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="327"></td><td><pre>         <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="328"></td><td><pre>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="329"></td><td><pre>      <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="330"></td><td><pre>         <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="331"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="332"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="333"></td><td><pre><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></pre></td></tr></table></figure><h2 id="15-按钮权限的控制"><a class="anchor" href="#15-按钮权限的控制">#</a> 15. 按钮权限的控制</h2><p>上面的菜单、角色、用户有增删改查操作，但是不是每个用户都有权限的，没权限的用户我们应该隐藏按钮，因此我们需要通过条件来判断按钮是否应该显示，那么应该怎么定义一个方法可以让全局都能使用呢？</p><p>我们再 src 下面新建一个 js 文件用于定义一个全局使用的方法：</p><ul><li>src/globalFun.js</li></ul><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span></pre></td></tr><tr><td data-num="2"></td><td><pre>Vue<span class="token punctuation">.</span><span class="token function">mixin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>   methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token function">hasAuth</span><span class="token punctuation">(</span><span class="token parameter">perm</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>         <span class="token keyword">var</span> authority <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>menus<span class="token punctuation">.</span>permList</pre></td></tr><tr><td data-num="6"></td><td><pre>         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>authority<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>         <span class="token keyword">return</span> authority<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>perm<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token operator">-</span><span class="token number">1</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>   <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>之前我们在加载菜单的时候说过，我们同时要加载权限数据，现在就需要用到权限数据了，这里数组，因此我们通过按钮的权限是否在所有权限列表内就行了。 mixin 的作用是多个组件可以共享数据和方法，在使用 mixin 的组件中引入后，mixin 中的方法和属性也就并入到该组件中，可以直接使用，在已有的组件数据和方法进行了扩充。引入 mixin 分全局引用和局部引用。<br>然后我们需要在 main.js 中引入这个文件</p><ul><li>src\main.js</li></ul><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> gobal <span class="token keyword">from</span> <span class="token string">"./globalFun"</span></pre></td></tr></table></figure><p>这样全局就可以使用啦，比如我们在新增按钮这里做判断：</p><ul><li>src/views/sys/Menu.vue</li></ul><figure class="highlight javascript"><figcaption data-lang="javascript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"primary"</span> @click<span class="token operator">=</span><span class="token string">"dialogFormVisible = true"</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"hasAuth('sys:menu:save')"</span><span class="token operator">></span>新增<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">></span></pre></td></tr></table></figure><p>通过 v-if 来判断返回是否为 true 从而判断是否显示。</p><h2 id="16-结束语"><a class="anchor" href="#16-结束语">#</a> 16. 结束语</h2><p>视频讲解：<span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWFmNHkxczdXaC8/ZmlsZUd1aWQ9cHh3eUpIZ3FjV2pXa1RLWA==">https://www.bilibili.com/video/BV1af4y1s7Wh/</span></p><p>线上演示：<span class="exturl" data-url="aHR0cHM6Ly93d3cubWFya2VyaHViLmNvbS92dWVhZG1pbi8/ZmlsZUd1aWQ9cHh3eUpIZ3FjV2pXa1RLWA==">https://www.markerhub.com/vueadmin/</span></p><p>首发公众号：MarkerHub</p><p>撰写人：吕一明</p><p>转载请保留此声明，感谢！</p><div class="tags"><a href="/tags/vue/" rel="tag"><i class="ic i-tag"></i> vue</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2022-06-03 16:55:51" itemprop="dateModified" datetime="2022-06-03T16:55:51+08:00">2022-06-03</time> </span><span id="worknote/security-jwt-vue/admin-front/" class="item leancloud_visitors" data-flag-title="开发SpringBoot+Jwt+Vue的前后端分离后台管理系统VueAdmin - 前端笔记" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="WangXuefeng 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.png" alt="WangXuefeng 支付宝"><p>支付宝</p></div><div><img data-src="/images/paypal.png" alt="WangXuefeng 贝宝"><p>贝宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文博主： </strong>WangXuefeng <i class="ic i-at"><em>@</em></i></li><li class="link"><strong>本文链接：</strong> <a href="https://oxyzen-wxf.github.io/worknote/security-jwt-vue/admin-front/" title="开发SpringBoot+Jwt+Vue的前后端分离后台管理系统VueAdmin - 前端笔记">https://oxyzen-wxf.github.io/worknote/security-jwt-vue/admin-front/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/computer-science/java/javahigh/foreach-1/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;picsum.photos&#x2F;id&#x2F;1050&#x2F;1912&#x2F;500" title="Java8的forEach"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> Java高级</span><h3>Java8的forEach</h3></a></div><div class="item right"><a href="/worknote/security-jwt-vue/amdin-back/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;picsum.photos&#x2F;id&#x2F;1051&#x2F;1912&#x2F;500" title="开发SpringBoot+Jwt+Vue的前后端分离后台管理系统VueAdmin - 后端笔记"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> Java框架</span><h3>开发SpringBoot+Jwt+Vue的前后端分离后台管理系统VueAdmin - 后端笔记</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">1. 前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%AE%89%E8%A3%85vue%E7%8E%AF%E5%A2%83%E5%B9%B6%E6%96%B0%E5%BB%BAvue%E9%A1%B9%E7%9B%AE"><span class="toc-number">2.</span> <span class="toc-text">2. 安装 vue 环境，并新建 Vue 项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%AE%89%E8%A3%85element-ui"><span class="toc-number">3.</span> <span class="toc-text">3. 安装 element-ui</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%AE%89%E8%A3%85axios-qs-mockjs"><span class="toc-number">4.</span> <span class="toc-text">4. 安装 axios、qs、mockjs</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E9%A1%B5%E9%9D%A2%E8%B7%AF%E7%94%B1"><span class="toc-number">5.</span> <span class="toc-text">5. 页面路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E7%99%BB%E9%99%86%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91"><span class="toc-number">6.</span> <span class="toc-text">6. 登陆界面开发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E4%BA%A4%E4%BA%92%E8%BF%87%E7%A8%8B"><span class="toc-number">6.0.1.</span> <span class="toc-text">登录交互过程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#token%E7%9A%84%E7%8A%B6%E6%80%81%E5%90%8C%E6%AD%A5"><span class="toc-number">6.0.2.</span> <span class="toc-text">token 的状态同步</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E5%85%A8%E5%B1%80axios%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-number">6.0.3.</span> <span class="toc-text">定义全局 axios 拦截器</span></a></li></ol></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E7%95%8C%E9%9D%A2%E5%BC%80%E5%8F%91"><span class="toc-number">7.</span> <span class="toc-text">7. 后台管理界面开发</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E4%BF%A1%E6%81%AF%E5%B1%95%E7%A4%BA"><span class="toc-number">8.</span> <span class="toc-text">8. 用户登录信息展示</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E5%8A%A8%E6%80%81%E8%8F%9C%E5%8D%95%E6%A0%8F%E5%BC%80%E5%8F%91"><span class="toc-number">9.</span> <span class="toc-text">9. 动态菜单栏开发</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E5%8A%A8%E6%80%81%E6%A0%87%E7%AD%BE%E9%A1%B5%E5%BC%80%E5%8F%91"><span class="toc-number">10.</span> <span class="toc-text">10. 动态标签页开发</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E4%B8%AA%E4%BA%BA%E4%B8%AD%E5%BF%83"><span class="toc-number">11.</span> <span class="toc-text">11. 个人中心</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E8%8F%9C%E5%8D%95%E7%95%8C%E9%9D%A2"><span class="toc-number">12.</span> <span class="toc-text">12. 菜单界面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-%E8%A7%92%E8%89%B2%E7%95%8C%E9%9D%A2"><span class="toc-number">13.</span> <span class="toc-text">13. 角色界面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-%E7%94%A8%E6%88%B7%E7%95%8C%E9%9D%A2"><span class="toc-number">14.</span> <span class="toc-text">14. 用户界面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-%E6%8C%89%E9%92%AE%E6%9D%83%E9%99%90%E7%9A%84%E6%8E%A7%E5%88%B6"><span class="toc-number">15.</span> <span class="toc-text">15. 按钮权限的控制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-%E7%BB%93%E6%9D%9F%E8%AF%AD"><span class="toc-number">16.</span> <span class="toc-text">16. 结束语</span></a></li></div><div class="related panel pjax" data-title="系列文章"><ul><li class="active"><a href="/worknote/security-jwt-vue/admin-front/" rel="bookmark" title="开发SpringBoot+Jwt+Vue的前后端分离后台管理系统VueAdmin - 前端笔记">开发SpringBoot+Jwt+Vue的前后端分离后台管理系统VueAdmin - 前端笔记</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="WangXuefeng" data-src="/images/avatar.jpg"><p class="name" itemprop="name">WangXuefeng</p><div class="description" itemprop="description">日常学习 & 复习记录</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">85</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">25</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">44</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL294eXplbi13eGY=" title="https:&#x2F;&#x2F;github.com&#x2F;oxyzen-wxf"><i class="ic i-github"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTYwNzA2MDI0MQ==" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;607060241"><i class="ic i-cloud-music"></i></span> <span class="exturl item weibo" data-url="aHR0cHM6Ly93ZWliby5jb20veW91cm5hbWU=" title="https:&#x2F;&#x2F;weibo.com&#x2F;yourname"><i class="ic i-weibo"></i></span> <span class="exturl item email" data-url="bWFpbHRvOjk2MzIxMDczOEBxcS5jb20=" title="mailto:963210738@qq.com"><i class="ic i-envelope"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/computer-science/java/javahigh/foreach-1/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/worknote/security-jwt-vue/amdin-back/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/" title="分类于 Java">Java</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/microservice/" title="分类于 微服务分布式">微服务分布式</a></div><span><a href="/computer-science/java/microservice/spring-cloud-alibaba-1/" title="Spring Cloud Alibaba">Spring Cloud Alibaba</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/review/" title="分类于 复习回顾">复习回顾</a> <i class="ic i-angle-right"></i> <a href="/categories/review/java/" title="分类于 Java">Java</a> <i class="ic i-angle-right"></i> <a href="/categories/review/java/javabasic/" title="分类于 Java基础">Java基础</a></div><span><a href="/review/java/javabasic/review-1/" title="java基础复习(一)">java基础复习(一)</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/" title="分类于 Java">Java</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/designpattern/" title="分类于 设计模式">设计模式</a></div><span><a href="/computer-science/java/designpattern/design-2/" title="设计模式之七大原则">设计模式之七大原则</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/" title="分类于 Java">Java</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/microservice/" title="分类于 微服务分布式">微服务分布式</a></div><span><a href="/computer-science/java/microservice/sleuth-1/" title="Sleuth-链路追踪">Sleuth-链路追踪</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/worknote/" title="分类于 工作日常笔记">工作日常笔记</a> <i class="ic i-angle-right"></i> <a href="/categories/worknote/java/" title="分类于 Java">Java</a></div><span><a href="/worknote/timing-1/" title="定时任务">定时任务</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/vue/" title="分类于 Vue">Vue</a></div><span><a href="/computer-science/vue/vue-4/" title="vue中传值的使用">vue中传值的使用</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/worknote/" title="分类于 工作日常笔记">工作日常笔记</a> <i class="ic i-angle-right"></i> <a href="/categories/worknote/java/" title="分类于 Java">Java</a> <i class="ic i-angle-right"></i> <a href="/categories/worknote/java/javautil/" title="分类于 Java常用工具">Java常用工具</a></div><span><a href="/worknote/javautil/util-4/" title="JDBC连接工具">JDBC连接工具</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/worknote/" title="分类于 工作日常笔记">工作日常笔记</a> <i class="ic i-angle-right"></i> <a href="/categories/worknote/java/" title="分类于 Java">Java</a></div><span><a href="/worknote/gulinote/" title="谷粒商城笔记">谷粒商城笔记</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/" title="分类于 Java">Java</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/microservice/" title="分类于 微服务分布式">微服务分布式</a></div><span><a href="/computer-science/java/microservice/transaction-1/" title="分布式事务">分布式事务</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/worknote/" title="分类于 工作日常笔记">工作日常笔记</a> <i class="ic i-angle-right"></i> <a href="/categories/worknote/java/" title="分类于 Java">Java</a></div><span><a href="/worknote/note-2/" title="日常笔记之幂等性">日常笔记之幂等性</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">WangXuefeng @ Oxygen Anoxia</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">631k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">9:34</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"worknote/security-jwt-vue/admin-front/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:{placeholder:"1. 提问前请先仔细阅读本文档⚡\n2. 页面显示问题💥，请提供控制台截图📸或者您的测试网址\n3. 其他任何报错💣，请提供详细描述和截图📸，祝食用愉快💪"},audio:["https://music.163.com/song?id=1498342485"],fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html><!-- rebuild by hrmmi -->