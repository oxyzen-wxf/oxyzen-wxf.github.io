<!-- build time:Fri Dec 30 2022 00:25:59 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" href="https://oxyzen-wxf.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" href="https://oxyzen-wxf.github.io/atom.xml"><link rel="alternate" type="application/json" href="https://oxyzen-wxf.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="java"><link rel="canonical" href="https://oxyzen-wxf.github.io/computer-science/java/javahigh/proxy-1/"><title>javaçš„ä»£ç†æ¨¡å¼ä»£ç  - Javaé«˜çº§ - Java - è®¡ç®—æœºç§‘å­¦ | Oxygen Anoxia = = äººç”Ÿå½“è‹¦æ— å¦¨ï¼Œè‰¯äººå½“å½’å³å¥½!</title><meta name="generator" content="Hexo 5.4.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">javaçš„ä»£ç†æ¨¡å¼ä»£ç </h1><div class="meta"><span class="item" title="åˆ›å»ºæ—¶é—´ï¼š2021-06-10 20:46:25"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">å‘è¡¨äº</span> <time itemprop="dateCreated datePublished" datetime="2021-06-10T20:46:25+08:00">2021-06-10</time> </span><span class="item" title="æœ¬æ–‡å­—æ•°"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">æœ¬æ–‡å­—æ•°</span> <span>6.1k</span> <span class="text">å­—</span> </span><span class="item" title="é˜…è¯»æ—¶é•¿"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">é˜…è¯»æ—¶é•¿</span> <span>6 åˆ†é’Ÿ</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="åˆ‡æ¢å¯¼èˆªæ "><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Oxygen Anoxia</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1giclfw2t96j20zk0m8x6p.jpg"></li><li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1gipey0a334j20zk0m8qpt.jpg"></li><li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1giclh5u05ej20zk0m87df.jpg"></li><li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1gipey84bjtj20zk0m8hdt.jpg"></li><li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1gipeyhsblkj20zk0m81kx.jpg"></li><li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1giclize41wj20zk0m87gk.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">é¦–é¡µ</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/" itemprop="item" rel="index" title="åˆ†ç±»äº è®¡ç®—æœºç§‘å­¦"><span itemprop="name">è®¡ç®—æœºç§‘å­¦</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/java/" itemprop="item" rel="index" title="åˆ†ç±»äº Java"><span itemprop="name">Java</span></a><meta itemprop="position" content="2"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/java/javahigh/" itemprop="item" rel="index" title="åˆ†ç±»äº Javaé«˜çº§"><span itemprop="name">Javaé«˜çº§</span></a><meta itemprop="position" content="3"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://oxyzen-wxf.github.io/computer-science/java/javahigh/proxy-1/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="WangXuefeng"><meta itemprop="description" content="äººç”Ÿå½“è‹¦æ— å¦¨ï¼Œè‰¯äººå½“å½’å³å¥½!, æ—¥å¸¸å­¦ä¹  & å¤ä¹ è®°å½•"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content=""></span><div class="body md" itemprop="articleBody"><h2 id="ä»£ç†æ¨¡å¼"><a class="anchor" href="#ä»£ç†æ¨¡å¼">#</a> ä»£ç†æ¨¡å¼</h2><ul><li>âœˆï¸ æ¦‚å¿µï¼šä»£ç†æ˜¯ä¸€ç§æ¨¡å¼ï¼Œæä¾›äº†å¯¹ç›®æ ‡å¯¹è±¡çš„é—´æ¥è®¿é—®æ–¹å¼ï¼Œå³é€šè¿‡ä»£ç†è®¿é—®ç›®æ ‡å¯¹è±¡ã€‚</li><li>å¦‚æ­¤ä¾¿äºåœ¨ç›®æ ‡å®ç°çš„åŸºç¡€ä¸Šå¢åŠ é¢å¤–çš„åŠŸèƒ½æ“ä½œï¼Œå‰æ‹¦æˆªï¼Œåæ‹¦æˆªç­‰ï¼Œä»¥æ»¡è¶³è‡ªèº«çš„ä¸šåŠ¡éœ€æ±‚ï¼›</li><li>äº§ç”ŸèƒŒæ™¯ï¼ˆéœ€æ±‚ï¼‰ï¼šåŠŸèƒ½å¢å¼ºã€é‡å¤ä»£ç ã€å®‰å…¨è®¿é—®ï¼›</li><li>ä¸€èˆ¬æœ‰ä¸¤ç§æ¨¡å¼ï¼šé™æ€ä»£ç† å’Œ åŠ¨æ€ä»£ç†ï¼›</li><li>ğŸ‰ ç‰¹ç‚¹ï¼š</li><li><pre><code> ä»£ç†ç±»å’Œå§”æ‰˜ç±»ç»§æ‰¿åŒä¸€çˆ¶ç±»æˆ–å®ç°åŒä¸€æ¥å£ï¼›
</code></pre></li><li><pre><code> ä»£ç†ç±»æŒæœ‰å§”æ‰˜ç±»çš„å¼•ç”¨ï¼›
</code></pre></li><li><pre><code> ä»£ç†ç±»å¯å¯¹å§”æ‰˜ç±»æ–¹æ³•åšå¢å¼ºå¤„ç†ï¼›
</code></pre></li><li>â­•ï¸ ä¼˜ç‚¹ï¼š</li><li><pre><code> éšè—å§”æ‰˜ç±»ï¼Œé˜²æ­¢ç›´æ¥è®¿é—®çš„å¤æ‚å’Œé£é™©æ€§ï¼›
</code></pre></li><li><pre><code> å®ç°å®¢æˆ·ä¸å§”æ‰˜ç±»è§£è€¦ï¼Œåœ¨ä¸ä¿®æ”¹å§”æ‰˜ç±»çš„æƒ…å†µä¸‹å¯¹åŸæœ‰ä¸šåŠ¡å¢å¼ºï¼›
</code></pre></li><li><pre><code> æé«˜ç¨‹åºçš„å¯æ‰©å±•æ€§
</code></pre></li></ul><h2 id="é™æ€ä»£ç†"><a class="anchor" href="#é™æ€ä»£ç†">#</a> é™æ€ä»£ç†</h2><p>**ğŸ—æ¦‚å¿µï¼š** ä»£ç†ç±»çš„ .class åœ¨ç¨‹åºè¿è¡Œå‰å°±å·²å­˜åœ¨ï¼Œé€šå¸¸æƒ…å†µä¸‹åœ¨ java ä»£ç ä¸­å®šä¹‰ï¼›</p><p>**ğŸ€ä¼˜ç‚¹ï¼š** å¯ä»¥åœ¨ä¸ä¿®æ”¹ç›®æ ‡å¯¹è±¡çš„å‰æä¸‹ï¼Œå¯¹ç›®æ ‡å¯¹è±¡è¿›è¡ŒåŠŸèƒ½çš„æ‰©å±•å’Œæ‹¦æˆªï¼›</p><p><strong>âœ¨å±€é™ï¼š</strong></p><ul><li><pre><code> è¿è¡Œå‰å¿…é¡»ç¼–å†™å¥½ä»£ç†ç±»ï¼›
</code></pre></li><li><pre><code> å¦‚æœæ¥å£ç±»ï¼Œå¦‚ Calculator æœ‰å‡ åä¸ªã€ä¸Šç™¾ä¸ªæ–¹æ³•ï¼Œä¿®æ”¹é‡å¤ªå¤§ï¼›
</code></pre></li><li><pre><code> åœ¨æ ¸å¿ƒä»£ç å‰åæ‰§è¡Œæ‰“å°æ—¥å¿—ç­‰å…±æ€§æ“ä½œï¼Œå¯¼è‡´å­˜åœ¨é‡å¤ä»£ç ï¼›
</code></pre></li><li><pre><code> æ ¸å¿ƒä»£ç å‰åçš„æ‰§è¡Œé€»è¾‘ä»¥åŠæ¥æ”¶çš„æ¥å£å®ç°ç±»ç¡¬ç¼–ç åœ¨ä»£ç†ç±»ä¸­ï¼Œä¸èƒ½æ›´æ”¹ï¼Œä¹Ÿä¸åˆ©äºåæœŸç»´æŠ¤ï¼›
</code></pre></li><li><pre><code> å¦‚æœå­˜åœ¨å¤šä¸ªæ¥å£ç±»éƒ½éœ€è¦æ‰“å°æ—¥å¿—ï¼Œé‚£ä¹ˆé’ˆå¯¹æ¯ä¸ªæ¥å£ç±»éƒ½å¿…é¡»æœ‰ä¸€ä¸ªä»£ç†ç±»ï¼›
</code></pre></li></ul><p><strong>ğŸ­ä»£ç </strong></p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * @Author WangXuefeng</pre></td></tr><tr><td data-num="3"></td><td><pre> * @Create 2021-01-06-13:11</pre></td></tr><tr><td data-num="4"></td><td><pre> * @Description:</pre></td></tr><tr><td data-num="5"></td><td><pre> */</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Calculator</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">int</span> <span class="token function">subtract</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CalculatorImpl</span> <span class="token keyword">implements</span> <span class="token class-name">Calculator</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token keyword">int</span> result <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token keyword">return</span> result<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">subtract</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">int</span> result <span class="token operator">=</span> a <span class="token operator">-</span> b<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token keyword">return</span> result<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CalculatorProxy</span> <span class="token keyword">implements</span> <span class="token class-name">Calculator</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Calculator</span> target<span class="token punctuation">;</span> <span class="token comment">// ä»£ç†å¯¹è±¡å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªç›®æ ‡å¯¹è±¡å¼•ç”¨</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">CalculatorProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>target <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CalculatorImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ„é€ æ–¹æ³•ï¼Œä¼ å…¥ç›®æ ‡å¯¹è±¡</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„ addï¼Œå¹¶åœ¨å‰åæ‰“å°æ—¥å¿—</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"addæ–¹æ³•å¼€å§‹..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token keyword">int</span> result <span class="token operator">=</span> target<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"addæ–¹æ³•ç»“æŸ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token keyword">return</span> result<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">subtract</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„ subtractï¼Œå¹¶åœ¨å‰åæ‰“å°æ—¥å¿—</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"subtractæ–¹æ³•å¼€å§‹..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token keyword">int</span> result <span class="token operator">=</span> target<span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"subtractæ–¹æ³•ç»“æŸ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token keyword">return</span> result<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre>	<span class="token comment">// æµ‹è¯•</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="28"></td><td><pre>     * é™æ€ä»£ç†</pre></td></tr><tr><td data-num="29"></td><td><pre>     */</pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token annotation punctuation">@Test</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">staticProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token class-name">Calculator</span> calculator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CalculatorProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token keyword">int</span> add <span class="token operator">=</span> calculator<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"=>"</span><span class="token operator">+</span>add<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="jdkåŠ¨æ€ä»£ç†"><a class="anchor" href="#jdkåŠ¨æ€ä»£ç†">#</a> JDK åŠ¨æ€ä»£ç†</h2><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MonitorUtil</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    </pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">></span></span> tl <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    </pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        tl<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    </pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token comment">// ç»“æŸæ—¶æ‰“å°è€—æ—¶</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">finish</span><span class="token punctuation">(</span><span class="token class-name">String</span> methodName<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token keyword">long</span> finishTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>methodName <span class="token operator">+</span> <span class="token string">"æ–¹æ³•è€—æ—¶"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>finishTime <span class="token operator">-</span> tl<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"ms"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment">// ä¸Šäº¤ç­è´¹</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token class-name">Boolean</span> <span class="token function">giveMoney</span><span class="token punctuation">(</span><span class="token class-name">Double</span> money<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">implements</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">Boolean</span> <span class="token function">giveMoney</span><span class="token punctuation">(</span><span class="token class-name">Double</span> money<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>            <span class="token comment">// å‡è®¾æ•°é’±èŠ±äº†ä¸€ç§’æ—¶é—´</span></pre></td></tr><tr><td data-num="16"></td><td><pre>            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">"ä¸Šäº¤ç­è´¹"</span><span class="token operator">+</span>money<span class="token operator">+</span><span class="token string">"å…ƒ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StuInvocationHandler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token keyword">implements</span> <span class="token class-name">InvocationHandler</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">T</span> target<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">StuInvocationHandler</span><span class="token punctuation">(</span><span class="token class-name">T</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>target <span class="token operator">=</span> target<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="10"></td><td><pre>     * @param proxy ä»£è¡¨åŠ¨æ€ä»£ç†å¯¹è±¡</pre></td></tr><tr><td data-num="11"></td><td><pre>     * @param method ä»£è¡¨æ­£åœ¨æ‰§è¡Œçš„æ–¹æ³•</pre></td></tr><tr><td data-num="12"></td><td><pre>     * @param args ä»£è¡¨è°ƒç”¨ç›®æ ‡æ–¹æ³•æ—¶ä¼ å…¥çš„å®å‚</pre></td></tr><tr><td data-num="13"></td><td><pre>     * @return</pre></td></tr><tr><td data-num="14"></td><td><pre>     * @throws Throwable</pre></td></tr><tr><td data-num="15"></td><td><pre>     */</pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä»£ç†æ‰§è¡Œ"</span> <span class="token operator">+</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"æ–¹æ³•"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token comment">// ä»£ç†è¿‡ç¨‹ä¸­æ’å…¥ç›‘æµ‹æ–¹æ³•ï¼Œè®¡ç®—è¯¥æ–¹æ³•è€—æ—¶</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token class-name">MonitorUtil</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token class-name">Object</span> result <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token class-name">MonitorUtil</span><span class="token punctuation">.</span><span class="token function">finish</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token keyword">return</span> result<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre>     * åŠ¨æ€ä»£ç†</pre></td></tr><tr><td data-num="3"></td><td><pre>     */</pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token annotation punctuation">@Test</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dynamicProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token class-name">Person</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token class-name">StuInvocationHandler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">></span></span> stuHandler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StuInvocationHandler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">//        Person stuProxy = (Person) Proxy.newProxyInstance(Person.class.getClassLoader(),new Class&lt;?>[]&#123;Person.class&#125;,stuHandler);</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token comment">/**</span></pre></td></tr><tr><td data-num="13"></td><td><pre>         *</pre></td></tr><tr><td data-num="14"></td><td><pre>         */</pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token class-name">Person</span> stuProxy <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>proxy<span class="token punctuation">,</span> method<span class="token punctuation">,</span> args<span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"ä»£ç†æ‰§è¡Œ"</span> <span class="token operator">+</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"æ–¹æ³•"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>            <span class="token comment">// ä»£ç†è¿‡ç¨‹ä¸­æ’å…¥ç›‘æµ‹æ–¹æ³•ï¼Œè®¡ç®—è¯¥æ–¹æ³•è€—æ—¶</span></pre></td></tr><tr><td data-num="18"></td><td><pre>            <span class="token class-name">MonitorUtil</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>            <span class="token class-name">Object</span> result <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>            <span class="token class-name">MonitorUtil</span><span class="token punctuation">.</span><span class="token function">finish</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"args.length =>"</span><span class="token operator">+</span>args<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> arg <span class="token operator">:</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>                log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"args.toString() =>"</span><span class="token operator">+</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>            <span class="token keyword">return</span> result<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token class-name">Boolean</span> isGive <span class="token operator">=</span> stuProxy<span class="token punctuation">.</span><span class="token function">giveMoney</span><span class="token punctuation">(</span><span class="token number">200.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"=>"</span> <span class="token operator">+</span> isGive<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="cglibåŠ¨æ€ä»£ç†"><a class="anchor" href="#cglibåŠ¨æ€ä»£ç†">#</a> CGLib åŠ¨æ€ä»£ç†</h2><p>ä¸Šé¢æˆ‘ä»¬çœ‹äº† CGLib åŠ¨æ€ä»£ç†çš„ç”¨æ³•ã€å®é™…ç”Ÿæˆçš„ä»£ç†ç±»ä»¥åŠ FastClass æœºåˆ¶ï¼Œä¸‹é¢æˆ‘ä»¬å°±ä»¥æœ€å‰é¢çš„é‚£ä¸ªä¾‹å­ä¸­è°ƒç”¨ eatï¼ˆï¼‰æ–¹æ³•æ¥çœ‹çœ‹ä¸»è¦çš„è°ƒç”¨æ­¥éª¤ï¼›</p><ul><li><p>ç¬¬ä¸€æ­¥ï¼šæ˜¯ç»è¿‡ä¸€ç³»åˆ—æ“ä½œå®ä¾‹åŒ–å‡ºäº† Enhance å¯¹è±¡ï¼Œå¹¶è®¾ç½®äº†æ‰€éœ€è¦çš„å‚æ•°ç„¶å enhancer.create () æˆåŠŸåˆ›å»ºå‡ºæ¥äº†ä»£ç†å¯¹è±¡ï¼Œè¿™ä¸ªå°±ä¸å¤šè¯´äº†...</p></li><li><p>ç¬¬äºŒæ­¥ï¼šè°ƒç”¨ä»£ç†å¯¹è±¡çš„ eatï¼ˆï¼‰æ–¹æ³•ï¼Œä¼šè¿›å…¥åˆ°æ–¹æ³•æ‹¦æˆªå™¨çš„ interceptï¼ˆï¼‰æ–¹æ³•ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­ä¼šè°ƒç”¨ proxy.invokeSuper (obj, args); æ–¹æ³•</p></li><li><p>ç¬¬ä¸‰æ­¥ï¼šinvokeSuper ä¸­ï¼Œé€šè¿‡ FastClass æœºåˆ¶è°ƒç”¨ç›®æ ‡ç±»çš„æ–¹æ³•</p></li><li><p>æ–¹æ³•æ‹¦æˆªå™¨ä¸­åªæœ‰ä¸€ä¸ª invoke æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æœ‰å››ä¸ªå‚æ•°ï¼Œobj è¡¨ç¤ºä»£ç†å¯¹è±¡ï¼Œmethod è¡¨ç¤ºç›®æ ‡ç±»ä¸­çš„æ–¹æ³•ï¼Œargs è¡¨ç¤ºæ–¹æ³•å‚æ•°ï¼Œproxy è¡¨ç¤ºä»£ç†æ–¹æ³•çš„ MethodProxy å¯¹è±¡</p></li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å–µå–µå–µ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> meter<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token keyword">return</span> <span class="token string">"çŒ«å’ªè·‘äº†"</span><span class="token operator">+</span> meter <span class="token operator">+</span> <span class="token string">"m"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@Slf4j</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyMethodInterceptor</span> <span class="token keyword">implements</span> <span class="token class-name">MethodInterceptor</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">intercept</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> objects<span class="token punctuation">,</span> <span class="token class-name">MethodProxy</span> methodProxy<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"call"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"å¬->"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>            <span class="token class-name">Object</span> obj <span class="token operator">=</span> methodProxy<span class="token punctuation">.</span><span class="token function">invokeSuper</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> objects<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>            <span class="token keyword">return</span> obj<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"çœ‹->"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>            <span class="token class-name">Object</span> obj <span class="token operator">=</span> methodProxy<span class="token punctuation">.</span><span class="token function">invokeSuper</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> objects<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>            <span class="token keyword">return</span> obj<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><strong>æµ‹è¯•</strong></p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@Test</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cglProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token comment">// åˆ›å»º Enhancer å¯¹è±¡ï¼Œç±»ä¼¼äº JDK åŠ¨æ€ä»£ç†çš„ Proxy ç±»ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯è®¾ç½®å‡ ä¸ªå‚æ•°</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">Enhancer</span> enhancer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Enhancer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token comment">// è®¾ç½®ç›®æ ‡ç±»çš„å­—èŠ‚ç æ–‡ä»¶</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        enhancer<span class="token punctuation">.</span><span class="token function">setSuperclass</span><span class="token punctuation">(</span><span class="token class-name">Cat</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token comment">// è®¾ç½®å›è°ƒå‡½æ•°</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        enhancer<span class="token punctuation">.</span><span class="token function">setCallback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyMethodInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token comment">// è¿™é‡Œçš„ creat æ–¹æ³•å°±æ˜¯æ­£å¼åˆ›å»ºä»£ç†ç±»</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token class-name">Cat</span> proxyCat <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Cat</span><span class="token punctuation">)</span>enhancer<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token comment">// è°ƒç”¨ä»£ç†ç±»çš„ eat æ–¹æ³•</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        proxyCat<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token class-name">String</span> run <span class="token operator">=</span> proxyCat<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>run<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token annotation punctuation">@Test</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cglProxy2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token comment">// åˆ›å»º Enhancer å¯¹è±¡ï¼Œç±»ä¼¼äº JDK åŠ¨æ€ä»£ç†çš„ Proxy ç±»ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯è®¾ç½®å‡ ä¸ªå‚æ•°</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token class-name">Enhancer</span> enhancer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Enhancer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token comment">// è®¾ç½®ç›®æ ‡ç±»çš„å­—èŠ‚ç æ–‡ä»¶</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        enhancer<span class="token punctuation">.</span><span class="token function">setSuperclass</span><span class="token punctuation">(</span><span class="token class-name">Cat</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token comment">// è®¾ç½®å›è°ƒå‡½æ•°</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        enhancer<span class="token punctuation">.</span><span class="token function">setCallback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MethodInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>            <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="27"></td><td><pre>            <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">intercept</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> objects<span class="token punctuation">,</span> <span class="token class-name">MethodProxy</span> methodProxy<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"call"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>                    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"å¬->"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>                    <span class="token class-name">Object</span> obj <span class="token operator">=</span> methodProxy<span class="token punctuation">.</span><span class="token function">invokeSuper</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> objects<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>                    <span class="token keyword">return</span> obj<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>                <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>                    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"çœ‹->"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>                    <span class="token class-name">Object</span> obj <span class="token operator">=</span> methodProxy<span class="token punctuation">.</span><span class="token function">invokeSuper</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> objects<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>                    <span class="token keyword">return</span> obj<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>                <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>        <span class="token class-name">Cat</span> proxyCat <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Cat</span><span class="token punctuation">)</span> enhancer<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token comment">// è°ƒç”¨ä»£ç†ç±»çš„ eat æ–¹æ³•</span></pre></td></tr><tr><td data-num="41"></td><td><pre>        proxyCat<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>        <span class="token class-name">String</span> run <span class="token operator">=</span> proxyCat<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>run<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="jdkåŠ¨æ€ä»£ç†å’ŒcglibåŠ¨æ€ä»£ç†çš„åŒºåˆ«"><a class="anchor" href="#jdkåŠ¨æ€ä»£ç†å’ŒcglibåŠ¨æ€ä»£ç†çš„åŒºåˆ«">#</a> JDK åŠ¨æ€ä»£ç†å’Œ CGLib åŠ¨æ€ä»£ç†çš„åŒºåˆ«</h2><p>åœ¨ Spring ä¸­çš„ AOP æ˜¯ä¾é åŠ¨æ€ä»£ç†æ¥å®ç°åˆ‡é¢ç¼–ç¨‹çš„.<br>è€Œè¿™ä¸¤è€…åˆæ˜¯æœ‰åŒºåˆ«çš„.</p><p>JDK æ˜¯åŸºäºåå°„æœºåˆ¶ï¼Œç”Ÿæˆä¸€ä¸ªå®ç°ä»£ç†æ¥å£çš„åŒ¿åç±»ï¼Œç„¶åé‡å†™æ–¹æ³•ï¼Œå®ç°æ–¹æ³•çš„å¢å¼º.<br>å®ƒç”Ÿæˆç±»çš„é€Ÿåº¦å¾ˆå¿«ï¼Œä½†æ˜¯è¿è¡Œæ—¶å› ä¸ºæ˜¯åŸºäºåå°„ï¼Œè°ƒç”¨åç»­çš„ç±»æ“ä½œä¼šå¾ˆæ…¢.<br>è€Œä¸”ä»–æ˜¯åªèƒ½é’ˆå¯¹æ¥å£ç¼–ç¨‹çš„.</p><p>CGLIB æ˜¯åŸºäºç»§æ‰¿æœºåˆ¶ï¼Œç»§æ‰¿è¢«ä»£ç†ç±»ï¼Œæ‰€ä»¥æ–¹æ³•ä¸è¦å£°æ˜ä¸º final, ç„¶åé‡å†™çˆ¶ç±»æ–¹æ³•è¾¾åˆ°å¢å¼ºäº†ç±»çš„ä½œç”¨.<br>å®ƒåº•å±‚æ˜¯åŸºäº asm ç¬¬ä¸‰æ–¹æ¡†æ¶ï¼Œæ˜¯å¯¹ä»£ç†å¯¹è±¡ç±»çš„ class æ–‡ä»¶åŠ è½½è¿›æ¥ï¼Œé€šè¿‡ä¿®æ”¹å…¶å­—èŠ‚ç ç”Ÿæˆå­ç±»æ¥å¤„ç†.<br>ç”Ÿæˆç±»çš„é€Ÿåº¦æ…¢ï¼Œä½†æ˜¯åç»­æ‰§è¡Œç±»çš„æ“ä½œæ—¶å€™å¾ˆå¿«.<br>å¯ä»¥é’ˆå¯¹ç±»å’Œæ¥å£.</p><p>å› ä¸º jdk æ˜¯åŸºäºåå°„ï¼ŒCGLIB æ˜¯åŸºäºå­—èŠ‚ç ã€‚æ‰€ä»¥æ€§èƒ½ä¸Šä¼šæœ‰å·®å¼‚.<br>åœ¨è€ç‰ˆæœ¬ CGLIB çš„é€Ÿåº¦æ˜¯ JDK é€Ÿåº¦çš„ 10 å€å·¦å³ï¼Œä½†æ˜¯ CGLIB å¯åŠ¨ç±»æ¯” JDK æ…¢ 8 å€å·¦å³ï¼Œä½†æ˜¯å®é™…ä¸Š JDK çš„é€Ÿåº¦åœ¨ç‰ˆæœ¬å‡çº§çš„æ—¶å€™æ¯æ¬¡éƒ½æé«˜å¾ˆå¤šæ€§èƒ½ï¼Œè€Œ CGLIB ä»æ­¢æ­¥ä¸å‰.</p><p>åœ¨å¯¹ JDK åŠ¨æ€ä»£ç†ä¸ CGlib åŠ¨æ€ä»£ç†çš„ä»£ç å®éªŒä¸­çœ‹ï¼Œ1W æ¬¡æ‰§è¡Œä¸‹ï¼ŒJDK7 åŠ 8 çš„åŠ¨æ€ä»£ç†æ€§èƒ½æ¯” CGlib è¦å¥½ 20% å·¦å³ã€‚</p><p><strong>å…·ä½“åº”ç”¨:</strong></p><p>å¦‚æœç›®æ ‡å¯¹è±¡å®ç°äº†æ¥å£ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯é‡‡ç”¨<strong> JDK åŠ¨æ€</strong>å®ç° AOP<br>å¦‚æœç›®æ ‡å¯¹è±¡æ²¡æœ‰å®ç°æ¥å£ï¼Œå¿…é¡»é‡‡ç”¨<strong> CGLIB</strong> åº“.</p><div class="tags"><a href="/tags/java/" rel="tag"><i class="ic i-tag"></i> java</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">æ›´æ–°äº</span> <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-06-03 16:55:50" itemprop="dateModified" datetime="2022-06-03T16:55:50+08:00">2022-06-03</time> </span><span id="computer-science/java/javahigh/proxy-1/" class="item leancloud_visitors" data-flag-title="javaçš„ä»£ç†æ¨¡å¼ä»£ç " title="é˜…è¯»æ¬¡æ•°"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">é˜…è¯»æ¬¡æ•°</span> <span class="leancloud-visitors-count"></span> <span class="text">æ¬¡</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> èµèµ</button><p>è¯·æˆ‘å–[èŒ¶]~(ï¿£â–½ï¿£)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="WangXuefeng å¾®ä¿¡æ”¯ä»˜"><p>å¾®ä¿¡æ”¯ä»˜</p></div><div><img data-src="/images/alipay.png" alt="WangXuefeng æ”¯ä»˜å®"><p>æ”¯ä»˜å®</p></div><div><img data-src="/images/paypal.png" alt="WangXuefeng è´å®"><p>è´å®</p></div></div></div><div id="copyright"><ul><li class="author"><strong>æœ¬æ–‡åšä¸»ï¼š </strong>WangXuefeng <i class="ic i-at"><em>@</em></i></li><li class="link"><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong> <a href="https://oxyzen-wxf.github.io/computer-science/java/javahigh/proxy-1/" title="javaçš„ä»£ç†æ¨¡å¼ä»£ç ">https://oxyzen-wxf.github.io/computer-science/java/javahigh/proxy-1/</a></li><li class="license"><strong>ç‰ˆæƒå£°æ˜ï¼š </strong>æœ¬ç«™æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/computer-science/java/javaframe/spring-aop-2/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;tva1.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gipeyhsblkj20zk0m81kx.jpg" title="Springä¹‹AOP(äºŒ)"><span class="type">ä¸Šä¸€ç¯‡</span> <span class="category"><i class="ic i-flag"></i> Javaæ¡†æ¶</span><h3>Springä¹‹AOP(äºŒ)</h3></a></div><div class="item right"><a href="/computer-science/java/javaframe/spring-aop-1/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;tva1.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gipev1x5e4j20zk0m8b29.jpg" title="Springä¹‹AOP(ä¸€)"><span class="type">ä¸‹ä¸€ç¯‡</span> <span class="category"><i class="ic i-flag"></i> Javaæ¡†æ¶</span><h3>Springä¹‹AOP(ä¸€)</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="æ–‡ç« ç›®å½•"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.</span> <span class="toc-text">ä»£ç†æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E4%BB%A3%E7%90%86"><span class="toc-number">2.</span> <span class="toc-text">é™æ€ä»£ç†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jdk%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86"><span class="toc-number">3.</span> <span class="toc-text">JDK åŠ¨æ€ä»£ç†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cglib%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86"><span class="toc-number">4.</span> <span class="toc-text">CGLib åŠ¨æ€ä»£ç†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jdk%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E5%92%8Ccglib%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">5.</span> <span class="toc-text">JDK åŠ¨æ€ä»£ç†å’Œ CGLib åŠ¨æ€ä»£ç†çš„åŒºåˆ«</span></a></li></ol></div><div class="related panel pjax" data-title="ç³»åˆ—æ–‡ç« "><ul><li><a href="/computer-science/java/javahigh/foreach-1/" rel="bookmark" title="Java8çš„forEach">Java8çš„forEach</a></li><li><a href="/computer-science/java/javahigh/foreach-2/" rel="bookmark" title="Java8çš„forEachè·å–indexç´¢å¼•çš„æ–¹æ³•">Java8çš„forEachè·å–indexç´¢å¼•çš„æ–¹æ³•</a></li><li><a href="/computer-science/java/javahigh/juc-1/" rel="bookmark" title="JUCå¹¶å‘ç¼–ç¨‹">JUCå¹¶å‘ç¼–ç¨‹</a></li><li><a href="/computer-science/java/javahigh/reduce/" rel="bookmark" title="Java8çš„reduce">Java8çš„reduce</a></li><li class="active"><a href="/computer-science/java/javahigh/proxy-1/" rel="bookmark" title="javaçš„ä»£ç†æ¨¡å¼ä»£ç ">javaçš„ä»£ç†æ¨¡å¼ä»£ç </a></li></ul></div><div class="overview panel" data-title="ç«™ç‚¹æ¦‚è§ˆ"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="WangXuefeng" data-src="/images/avatar.jpg"><p class="name" itemprop="name">WangXuefeng</p><div class="description" itemprop="description">æ—¥å¸¸å­¦ä¹  & å¤ä¹ è®°å½•</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">85</span> <span class="name">æ–‡ç« </span></a></div><div class="item categories"><a href="/categories/"><span class="count">25</span> <span class="name">åˆ†ç±»</span></a></div><div class="item tags"><a href="/tags/"><span class="count">44</span> <span class="name">æ ‡ç­¾</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL294eXplbi13eGY=" title="https:&#x2F;&#x2F;github.com&#x2F;oxyzen-wxf"><i class="ic i-github"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTYwNzA2MDI0MQ==" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;607060241"><i class="ic i-cloud-music"></i></span> <span class="exturl item weibo" data-url="aHR0cHM6Ly93ZWliby5jb20veW91cm5hbWU=" title="https:&#x2F;&#x2F;weibo.com&#x2F;yourname"><i class="ic i-weibo"></i></span> <span class="exturl item email" data-url="bWFpbHRvOjk2MzIxMDczOEBxcS5jb20=" title="mailto:963210738@qq.com"><i class="ic i-envelope"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>é¦–é¡µ</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>å…³äº</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>æ–‡ç« </a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>å½’æ¡£</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>åˆ†ç±»</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>æ ‡ç­¾</a></li></ul></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/computer-science/java/javaframe/spring-aop-2/" rel="prev" title="ä¸Šä¸€ç¯‡"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/computer-science/java/javaframe/spring-aop-1/" rel="next" title="ä¸‹ä¸€ç¯‡"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>éšæœºæ–‡ç« </h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="åˆ†ç±»äº è®¡ç®—æœºç§‘å­¦">è®¡ç®—æœºç§‘å­¦</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/" title="åˆ†ç±»äº Java">Java</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/microservice/" title="åˆ†ç±»äº å¾®æœåŠ¡åˆ†å¸ƒå¼">å¾®æœåŠ¡åˆ†å¸ƒå¼</a></div><span><a href="/computer-science/java/microservice/sleuth-1/" title="Sleuth-é“¾è·¯è¿½è¸ª">Sleuth-é“¾è·¯è¿½è¸ª</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="åˆ†ç±»äº è®¡ç®—æœºç§‘å­¦">è®¡ç®—æœºç§‘å­¦</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/" title="åˆ†ç±»äº Java">Java</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/javaframe/" title="åˆ†ç±»äº Javaæ¡†æ¶">Javaæ¡†æ¶</a></div><span><a href="/computer-science/java/javaframe/spring-aop-2/" title="Springä¹‹AOP(äºŒ)">Springä¹‹AOP(äºŒ)</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="åˆ†ç±»äº è®¡ç®—æœºç§‘å­¦">è®¡ç®—æœºç§‘å­¦</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/" title="åˆ†ç±»äº Java">Java</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/designpattern/" title="åˆ†ç±»äº è®¾è®¡æ¨¡å¼">è®¾è®¡æ¨¡å¼</a></div><span><a href="/computer-science/java/designpattern/design-4/" title="è®¾è®¡æ¨¡å¼ä¹‹å·¥å‚æ¨¡å¼">è®¾è®¡æ¨¡å¼ä¹‹å·¥å‚æ¨¡å¼</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="åˆ†ç±»äº è®¡ç®—æœºç§‘å­¦">è®¡ç®—æœºç§‘å­¦</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/" title="åˆ†ç±»äº Java">Java</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/designpattern/" title="åˆ†ç±»äº è®¾è®¡æ¨¡å¼">è®¾è®¡æ¨¡å¼</a></div><span><a href="/computer-science/java/designpattern/design-7/" title="è®¾è®¡æ¨¡å¼ä¹‹é€‚é…å™¨æ¨¡å¼">è®¾è®¡æ¨¡å¼ä¹‹é€‚é…å™¨æ¨¡å¼</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/worknote/" title="åˆ†ç±»äº å·¥ä½œæ—¥å¸¸ç¬”è®°">å·¥ä½œæ—¥å¸¸ç¬”è®°</a> <i class="ic i-angle-right"></i> <a href="/categories/worknote/java/" title="åˆ†ç±»äº Java">Java</a></div><span><a href="/worknote/Interview-2/" title="é¢è¯•é¢˜ç¬”è®°è®°å½•(äºŒ)é¢è¯•å¿…è€ƒé¢˜ï¼ˆé€šä¿—æ˜“æ‡‚ç²¾åç‰ˆï¼‰">é¢è¯•é¢˜ç¬”è®°è®°å½•(äºŒ)é¢è¯•å¿…è€ƒé¢˜ï¼ˆé€šä¿—æ˜“æ‡‚ç²¾åç‰ˆï¼‰</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/worknote/" title="åˆ†ç±»äº å·¥ä½œæ—¥å¸¸ç¬”è®°">å·¥ä½œæ—¥å¸¸ç¬”è®°</a> <i class="ic i-angle-right"></i> <a href="/categories/worknote/java/" title="åˆ†ç±»äº Java">Java</a> <i class="ic i-angle-right"></i> <a href="/categories/worknote/java/javautil/" title="åˆ†ç±»äº Javaå¸¸ç”¨å·¥å…·">Javaå¸¸ç”¨å·¥å…·</a></div><span><a href="/worknote/javautil/util-3/" title="æ–‡ä»¶è¿›è¡Œé‡å‘½å">æ–‡ä»¶è¿›è¡Œé‡å‘½å</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/worknote/" title="åˆ†ç±»äº å·¥ä½œæ—¥å¸¸ç¬”è®°">å·¥ä½œæ—¥å¸¸ç¬”è®°</a> <i class="ic i-angle-right"></i> <a href="/categories/worknote/java/" title="åˆ†ç±»äº Java">Java</a></div><span><a href="/worknote/timing-1/" title="å®šæ—¶ä»»åŠ¡">å®šæ—¶ä»»åŠ¡</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/review/" title="åˆ†ç±»äº å¤ä¹ å›é¡¾">å¤ä¹ å›é¡¾</a> <i class="ic i-angle-right"></i> <a href="/categories/review/java/" title="åˆ†ç±»äº Java">Java</a> <i class="ic i-angle-right"></i> <a href="/categories/review/java/javahigh/" title="åˆ†ç±»äº Javaé«˜çº§">Javaé«˜çº§</a></div><span><a href="/review/java/javahigh/thread-4/" title="å¤šçº¿ç¨‹ä¹‹åˆ›å»ºçº¿ç¨‹ä¸‰ç§æ–¹å¼">å¤šçº¿ç¨‹ä¹‹åˆ›å»ºçº¿ç¨‹ä¸‰ç§æ–¹å¼</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="åˆ†ç±»äº è®¡ç®—æœºç§‘å­¦">è®¡ç®—æœºç§‘å­¦</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/database/" title="åˆ†ç±»äº æ•°æ®åº“">æ•°æ®åº“</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/database/MQ/" title="åˆ†ç±»äº MQ">MQ</a></div><span><a href="/database/msg/rabbitmq-1/" title="RabbitMqå­¦ä¹ ç¬”è®°">RabbitMqå­¦ä¹ ç¬”è®°</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/worknote/" title="åˆ†ç±»äº å·¥ä½œæ—¥å¸¸ç¬”è®°">å·¥ä½œæ—¥å¸¸ç¬”è®°</a> <i class="ic i-angle-right"></i> <a href="/categories/worknote/java/" title="åˆ†ç±»äº Java">Java</a></div><span><a href="/worknote/interview-4/" title="é¢è¯•æ€»ç»“ä¹‹åŒ—äº¬è¡Œ">é¢è¯•æ€»ç»“ä¹‹åŒ—äº¬è¡Œ</a></span></li></ul></div><div><h2>æœ€æ–°è¯„è®º</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 â€“ <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">WangXuefeng @ Oxygen Anoxia</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="ç«™ç‚¹æ€»å­—æ•°">631k å­—</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">9:34</span></div><div class="powered-by">åŸºäº <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"computer-science/java/javahigh/proxy-1/",favicon:{show:"ï¼ˆâ—Â´3ï½€â—ï¼‰ã‚„ã‚Œã‚„ã‚Œã ãœ",hide:"(Â´Ğ”ï½€)å¤§å¤‰ã ï¼"},search:{placeholder:"æ–‡ç« æœç´¢",empty:"å…³äº ã€Œ ${query} ã€ï¼Œä»€ä¹ˆä¹Ÿæ²¡æœåˆ°",stats:"${time} ms å†…æ‰¾åˆ° ${hits} æ¡ç»“æœ"},valine:{placeholder:"1. æé—®å‰è¯·å…ˆä»”ç»†é˜…è¯»æœ¬æ–‡æ¡£âš¡\n2. é¡µé¢æ˜¾ç¤ºé—®é¢˜ğŸ’¥ï¼Œè¯·æä¾›æ§åˆ¶å°æˆªå›¾ğŸ“¸æˆ–è€…æ‚¨çš„æµ‹è¯•ç½‘å€\n3. å…¶ä»–ä»»ä½•æŠ¥é”™ğŸ’£ï¼Œè¯·æä¾›è¯¦ç»†æè¿°å’Œæˆªå›¾ğŸ“¸ï¼Œæ–‡ç« ä¸ºä¸ªäººè§è§£ï¼Œæœ‰é—®é¢˜è¯·è¯„è®ºæŒ‡å‡ºï¼ŒåŠæ—¶ä¿®æ”¹ğŸ™…â€ï¼Œç¥é£Ÿç”¨æ„‰å¿«ğŸ’ª"},audio:["https://music.163.com/song?id=1498342485"],fancybox:!0,copyright:'å¤åˆ¶æˆåŠŸï¼Œè½¬è½½è¯·éµå®ˆ <i class="ic i-creative-commons"></i>BY-NC-SA åè®®ã€‚',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html><!-- rebuild by hrmmi -->